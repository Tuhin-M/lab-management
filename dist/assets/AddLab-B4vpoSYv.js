import{c as v,q as C,R as b,s as e,B as h,E as g}from"./index-DgBcbMcU.js";import{T as w}from"./textarea-Bz-w20Wa.js";import{F as I,a as i,b as n,c as t,d as l,e as c}from"./form-DsYPgIbr.js";import{u as F,t as S,z as r}from"./zod-Ne4FsdIx.js";import{I as d}from"./input-CJYTmRyd.js";import{C as L,a as k,b as P,c as A}from"./card-CEAmbz21.js";import{A as E}from"./arrow-left-BhfpUSqy.js";import"./label-DqPonXmE.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=v("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),R=r.object({name:r.string().min(2,{message:"Name must be at least 2 characters"}),description:r.string().min(10,{message:"Description must be at least 10 characters"}),address:r.object({street:r.string().min(1,{message:"Street is required"}),city:r.string().min(1,{message:"City is required"}),state:r.string().min(1,{message:"State is required"}),zipCode:r.string().min(1,{message:"Zip code is required"})}),contactInfo:r.object({phone:r.string().min(10,{message:"Phone number must be at least 10 digits"}),email:r.string().email({message:"Invalid email address"}),website:r.string().optional()}),certifications:r.string()}),J=()=>{const m=C(),[q,u]=b.useState(null),[j,f]=b.useState(null),a=F({resolver:S(R),defaultValues:{name:"",description:"",address:{street:"",city:"",state:"",zipCode:""},contactInfo:{phone:"",email:"",website:""},certifications:""}}),y=s=>{var p;const o=(p=s.target.files)==null?void 0:p[0];if(o){u(o);const x=new FileReader;x.onloadend=()=>{f(x.result)},x.readAsDataURL(o)}},N=async s=>{try{if(!(await fetch("/api/labs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok)throw new Error("Failed to add lab");g.success("Lab added successfully"),m("/lab-dashboard")}catch(o){console.error("Failed to add lab:",o),g.error("Failed to add lab. Please try again.")}};return e.jsx("div",{className:"min-h-screen bg-background pt-16 pb-12",children:e.jsxs("div",{className:"container max-w-3xl mx-auto p-4",children:[e.jsxs(h,{variant:"ghost",className:"mb-6",onClick:()=>m("/lab-dashboard"),children:[e.jsx(E,{className:"h-4 w-4 mr-2"})," Back to Dashboard"]}),e.jsxs(L,{children:[e.jsx(k,{children:e.jsx(P,{className:"text-2xl",children:"Add New Lab"})}),e.jsx(A,{children:e.jsx(I,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(N),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),e.jsx(i,{control:a.control,name:"name",render:({field:s})=>e.jsxs(n,{children:[e.jsx(t,{children:"Lab Name"}),e.jsx(l,{children:e.jsx(d,{placeholder:"Enter lab name",...s})}),e.jsx(c,{})]})}),e.jsx(i,{control:a.control,name:"description",render:({field:s})=>e.jsxs(n,{children:[e.jsx(t,{children:"Description"}),e.jsx(l,{children:e.jsx(w,{placeholder:"Describe your lab, specialties, etc.",rows:4,...s})}),e.jsx(c,{})]})}),e.jsxs("div",{children:[e.jsx(t,{children:"Lab Image"}),e.jsxs("div",{className:"mt-2 flex items-center gap-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 flex flex-col items-center justify-center cursor-pointer hover:border-primary transition-colors",onClick:()=>{var s;return(s=document.getElementById("lab-image"))==null?void 0:s.click()},children:[e.jsx(B,{className:"h-8 w-8 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Click to upload image"}),e.jsx("input",{placeholder:"Enter value",title:"Enter value",type:"file",id:"lab-image",accept:"image/*",className:"hidden",onChange:y})]}),j&&e.jsx("div",{className:"h-24 w-24 relative rounded-md overflow-hidden",children:e.jsx("img",{src:j,alt:"Preview",className:"h-full w-full object-cover"})})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Address"}),e.jsx(i,{control:a.control,name:"address.street",render:({field:s})=>e.jsxs(n,{children:[e.jsx(t,{children:"Street"}),e.jsx(l,{children:e.jsx(d,{placeholder:"Street address",...s})}),e.jsx(c,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{control:a.control,name:"address.city",render:({field:s})=>e.jsxs(n,{children:[e.jsx(t,{children:"City"}),e.jsx(l,{children:e.jsx(d,{placeholder:"City",...s})}),e.jsx(c,{})]})}),e.jsx(i,{control:a.control,name:"address.state",render:({field:s})=>e.jsxs(n,{children:[e.jsx(t,{children:"State"}),e.jsx(l,{children:e.jsx(d,{placeholder:"State",...s})}),e.jsx(c,{})]})})]}),e.jsx(i,{control:a.control,name:"address.zipCode",render:({field:s})=>e.jsxs(n,{children:[e.jsx(t,{children:"PIN Code"}),e.jsx(l,{children:e.jsx(d,{placeholder:"PIN code",...s})}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{control:a.control,name:"contactInfo.phone",render:({field:s})=>e.jsxs(n,{children:[e.jsx(t,{children:"Phone Number"}),e.jsx(l,{children:e.jsx(d,{placeholder:"Phone number",...s})}),e.jsx(c,{})]})}),e.jsx(i,{control:a.control,name:"contactInfo.email",render:({field:s})=>e.jsxs(n,{children:[e.jsx(t,{children:"Email"}),e.jsx(l,{children:e.jsx(d,{placeholder:"Email address",...s})}),e.jsx(c,{})]})})]}),e.jsx(i,{control:a.control,name:"contactInfo.website",render:({field:s})=>e.jsxs(n,{children:[e.jsx(t,{children:"Website (Optional)"}),e.jsx(l,{children:e.jsx(d,{placeholder:"Website URL",...s})}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Certifications"}),e.jsx(i,{control:a.control,name:"certifications",render:({field:s})=>e.jsxs(n,{children:[e.jsx(t,{children:"Certifications & Accreditations"}),e.jsx(l,{children:e.jsx(d,{placeholder:"e.g. NABL, ISO",...s})}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"pt-6 border-t flex justify-end space-x-4",children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>m("/lab-dashboard"),children:"Cancel"}),e.jsx(h,{type:"submit",children:"Add Lab"})]})]})})})]})]})})};export{J as default};
