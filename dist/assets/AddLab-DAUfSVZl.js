import{ae as S,R as f,a7 as e,ah as h,aH as N}from"./index-DGQnzEId.js";import{T as k}from"./textarea-BFjvsdCn.js";import{F as P,a as l,b as i,c as o,d as n,e as d}from"./form-D0N6cZYL.js";import{u as z,t as L,z as a}from"./zod-CevI-mEX.js";import{s as X}from"./storage-DXuholBx.js";import{I as c}from"./input-CIeWkrV3.js";import{C as g,a as u,b as A,c as R}from"./card-B6dWGu8z.js";import{A as D}from"./arrow-left-BfpFyjlb.js";import{U as v}from"./upload-XIdgncCq.js";import"./label-CfCTkVuX.js";const T=a.object({name:a.string().min(2,{message:"Name must be at least 2 characters"}),description:a.string().min(10,{message:"Description must be at least 10 characters"}),address:a.object({street:a.string().min(1,{message:"Street is required"}),city:a.string().min(1,{message:"City is required"}),state:a.string().min(1,{message:"State is required"}),zipCode:a.string().min(1,{message:"Zip code is required"})}),contactInfo:a.object({phone:a.string().min(10,{message:"Phone number must be at least 10 digits"}),email:a.string().email({message:"Invalid email address"}),website:a.string().optional()}),certifications:a.string()}),J=()=>{const p=S(),[b,y]=f.useState(null),[j,w]=f.useState(null),t=z({resolver:L(T),defaultValues:{name:"",description:"",address:{street:"",city:"",state:"",zipCode:""},contactInfo:{phone:"",email:"",website:""},certifications:""}}),C=s=>{var m;const r=(m=s.target.files)==null?void 0:m[0];if(r){y(r);const x=new FileReader;x.onloadend=()=>{w(x.result)},x.readAsDataURL(r)}},F=async s=>{try{let r=null;if(b){const I=`${Date.now()}-${b.name}`;r=await X.uploadImage("labs",I,b)}const m={...s,image:r||"default-lab.jpg"};if(!(await fetch("/api/labs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).ok)throw new Error("Failed to add lab");N.success("Lab added successfully"),p("/lab-dashboard")}catch(r){console.error("Failed to add lab:",r),N.error("Failed to add lab. Please try again.")}};return e.jsxs("div",{className:"min-h-screen bg-slate-50/50 relative overflow-hidden",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-primary/5 rounded-full blur-[100px] opacity-60"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[600px] h-[600px] bg-blue-500/5 rounded-full blur-[100px] opacity-60"})]}),e.jsxs("div",{className:"container max-w-4xl mx-auto px-6 py-12 relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-10",children:[e.jsxs("div",{children:[e.jsxs(h,{variant:"ghost",className:"mb-4 -ml-4 hover:bg-transparent text-slate-500 hover:text-primary transition-colors group",onClick:()=>p("/lab-dashboard"),children:[e.jsx(D,{className:"h-4 w-4 mr-2 group-hover:-translate-x-1 transition-transform"}),"Back to Dashboard"]}),e.jsx("h1",{className:"text-4xl font-extrabold tracking-tight text-slate-900",children:"Add New Laboratory"}),e.jsx("p",{className:"text-slate-500 mt-2 text-lg",children:"Register your facility to start managing tests and appointments."})]}),e.jsx("div",{className:"hidden md:block",children:e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-xl shadow-primary/5 border border-slate-100 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-primary/10 flex items-center justify-center text-primary",children:e.jsx(v,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Quick Setup"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Takes less than 2 minutes"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(g,{className:"border-none shadow-2xl shadow-slate-200/50 rounded-3xl overflow-hidden",children:e.jsx(u,{className:"p-8 md:p-10",children:e.jsx(P,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(F),className:"space-y-10",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-900 text-white flex items-center justify-center font-bold",children:"1"}),e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Lab Identity"})]}),e.jsx(l,{control:t.control,name:"name",render:({field:s})=>e.jsxs(i,{children:[e.jsx(o,{className:"text-slate-700 font-semibold",children:"Laboratory Name"}),e.jsx(n,{children:e.jsx(c,{placeholder:"e.g. Apollo Diagnostics",className:"h-12 rounded-xl border-slate-200 focus:ring-primary/20 bg-slate-50/50",...s})}),e.jsx(d,{})]})}),e.jsx(l,{control:t.control,name:"description",render:({field:s})=>e.jsxs(i,{children:[e.jsx(o,{className:"text-slate-700 font-semibold",children:"Description"}),e.jsx(n,{children:e.jsx(k,{placeholder:"Tell patients about your specialties and expertise...",className:"min-h-[120px] rounded-xl border-slate-200 focus:ring-primary/20 bg-slate-50/50",...s})}),e.jsx(d,{})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-900 text-white flex items-center justify-center font-bold",children:"2"}),e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Contact & Location"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(l,{control:t.control,name:"contactInfo.email",render:({field:s})=>e.jsxs(i,{children:[e.jsx(o,{className:"text-slate-700 font-semibold",children:"Business Email"}),e.jsx(n,{children:e.jsx(c,{className:"h-12 rounded-xl border-slate-200 bg-slate-50/50",placeholder:"contact@lab.com",type:"email",...s})}),e.jsx(d,{})]})}),e.jsx(l,{control:t.control,name:"contactInfo.phone",render:({field:s})=>e.jsxs(i,{children:[e.jsx(o,{className:"text-slate-700 font-semibold",children:"Primary Phone"}),e.jsx(n,{children:e.jsx(c,{className:"h-12 rounded-xl border-slate-200 bg-slate-50/50",placeholder:"+91-XXXXX-XXXXX",...s})}),e.jsx(d,{})]})})]}),e.jsx(l,{control:t.control,name:"address.street",render:({field:s})=>e.jsxs(i,{children:[e.jsx(o,{className:"text-slate-700 font-semibold",children:"Street Address"}),e.jsx(n,{children:e.jsx(c,{className:"h-12 rounded-xl border-slate-200 bg-slate-50/50",placeholder:"Room no, Street, Area",...s})}),e.jsx(d,{})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsx("div",{className:"col-span-2",children:e.jsx(l,{control:t.control,name:"address.city",render:({field:s})=>e.jsxs(i,{children:[e.jsx(o,{className:"text-slate-700 font-semibold",children:"City"}),e.jsx(n,{children:e.jsx(c,{className:"h-12 rounded-xl border-slate-200 bg-slate-50/50",placeholder:"Mumbai",...s})}),e.jsx(d,{})]})})}),e.jsx(l,{control:t.control,name:"address.zipCode",render:({field:s})=>e.jsxs(i,{children:[e.jsx(o,{className:"text-slate-700 font-semibold",children:"PIN Code"}),e.jsx(n,{children:e.jsx(c,{className:"h-12 rounded-xl border-slate-200 bg-slate-50/50",placeholder:"400001",...s})}),e.jsx(d,{})]})})]})]}),e.jsxs("div",{className:"pt-8 border-t border-slate-100 flex items-center justify-between",children:[e.jsx(h,{type:"button",variant:"ghost",className:"rounded-xl h-12 px-8 text-slate-500",onClick:()=>p("/lab-dashboard"),children:"Discard Changes"}),e.jsx(h,{type:"submit",className:"rounded-xl h-12 px-10 shadow-xl shadow-primary/20 font-bold active:scale-95 transition-all",children:"Register Laboratory"})]})]})})})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(g,{className:"border-none shadow-xl shadow-slate-200/50 rounded-3xl overflow-hidden bg-white",children:[e.jsx(A,{className:"pb-2",children:e.jsx(R,{className:"text-lg font-bold",children:"Media Upload"})}),e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{var s;return(s=document.getElementById("lab-image"))==null?void 0:s.click()},children:[e.jsx("div",{className:`aspect-video rounded-2xl border-2 border-dashed transition-all flex flex-col items-center justify-center p-6 ${j?"border-transparent":"border-slate-200 bg-slate-50 group-hover:bg-primary/5 group-hover:border-primary/50"}`,children:j?e.jsx("img",{src:j,alt:"Preview",className:"absolute inset-0 h-full w-full object-cover rounded-2xl shadow-inner"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white flex items-center justify-center shadow-md mb-2 group-hover:scale-110 transition-transform",children:e.jsx(v,{className:"text-slate-400 group-hover:text-primary",size:20})}),e.jsx("p",{className:"text-xs font-semibold text-slate-500 group-hover:text-primary",children:"Click to upload photo"})]})}),e.jsx("input",{placeholder:"Enter value",title:"Enter value",type:"file",id:"lab-image",accept:"image/*",className:"hidden",onChange:C})]}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-4 text-center",children:"Recommended size: 1200x800px. JPG, PNG formats supported."})]})]}),e.jsx(g,{className:"border-none bg-primary text-primary-foreground shadow-2xl shadow-primary/20 rounded-3xl overflow-hidden",children:e.jsxs(u,{className:"p-8",children:[e.jsx("h4",{className:"font-bold text-lg mb-2",children:"Need Assistance?"}),e.jsx("p",{className:"text-xs text-primary-foreground/70 mb-6 leading-relaxed",children:"Our support team is available 24/7 to help you set up your digital laboratory profile."}),e.jsx(h,{variant:"link",className:"p-0 h-auto text-white font-bold text-sm underline decoration-white/30 hover:decoration-white",children:"Contact Support"})]})})]})]})]})]})};export{J as default};
