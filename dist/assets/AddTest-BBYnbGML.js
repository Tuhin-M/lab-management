import{c as j,x as g,ac as v,s as e,O as l,ap as T,aI as b,J as u}from"./index-TcMYSotV.js";import{u as y,a as f,C as N,t as C,z as r}from"./zod-CnCpVjpE.js";import{I as i}from"./input-VpsYF4Vr.js";import{T as S}from"./textarea-DGNrVZoq.js";import{C as w,b as F,d as A,a as P}from"./card-P2OsDbbh.js";import{L as a}from"./label-BmxbEDFR.js";import{S as k,a as D,b as I,c as q,d as o}from"./select-D_VAVDlA.js";import{T as B,a as V,b as L,c as O}from"./tooltip-C7u3zLMd.js";import{A as $}from"./arrow-left-DUUYJY6r.js";import"./index-BdQq_4o_.js";import"./index-CWdTz_rd.js";import"./filterUnsupportedProps-Bb-ms138.js";import"./chevron-down-DLv74dvl.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=j("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),U=r.object({name:r.string().min(2,{message:"Test name must be at least 2 characters"}),category:r.string().min(2,{message:"Category is required"}),sampleType:r.enum(["Blood","Urine","Saliva","Other"],{required_error:"Select sample type"}),price:r.number().min(1,{message:"Price must be a positive number"}),discount:r.number().min(0).max(100).optional(),turnaroundTime:r.string().min(1,{message:"Turnaround time is required"}),duration:r.string().min(1,{message:"Duration is required"}),description:r.string().min(10,{message:"Description must be at least 10 characters"}),parameters:r.array(r.object({name:r.string().min(1,{message:"Parameter required"})})).min(1,{message:"At least one parameter required"})}),ee=()=>{const c=g(),{id:d}=v(),s=y({resolver:C(U),defaultValues:{name:"",category:"",sampleType:"Blood",price:0,discount:0,turnaroundTime:"",duration:"",description:"",parameters:[{name:""}]}}),{fields:m,append:h,remove:p}=f({control:s.control,name:"parameters"}),x=async t=>{try{await b.post(`/labs/${d}/tests`,t),u.success("Test added successfully"),c(`/lab-owner/lab/${d}`)}catch(n){console.error("Failed to add test:",n),u.error("Failed to add test. Please try again.")}};return e.jsx("div",{className:"min-h-screen bg-background pt-16 pb-12",children:e.jsxs("div",{className:"container max-w-xl mx-auto p-4",children:[e.jsxs(l,{variant:"ghost",className:"mb-6 flex items-center",onClick:()=>c(-1),children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs(w,{children:[e.jsx(F,{children:e.jsx(A,{className:"text-2xl",children:"Add New Test"})}),e.jsx(P,{children:e.jsxs("form",{onSubmit:s.handleSubmit(x),className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"name",children:"Test Name"}),e.jsx(i,{id:"name",...s.register("name"),placeholder:"Test Name"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"category",children:"Category"}),e.jsx(i,{id:"category",...s.register("category"),placeholder:"Category"})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Sample Type"}),e.jsx(N,{control:s.control,name:"sampleType",render:({field:t})=>e.jsxs(k,{onValueChange:t.onChange,value:t.value,children:[e.jsx(D,{children:e.jsx(I,{placeholder:"Select sample type"})}),e.jsxs(q,{children:[e.jsx(o,{value:"Blood",children:"Blood"}),e.jsx(o,{value:"Urine",children:"Urine"}),e.jsx(o,{value:"Saliva",children:"Saliva"}),e.jsx(o,{value:"Other",children:"Other"})]})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(a,{htmlFor:"price",children:["Price (₹)",e.jsx(B,{children:e.jsxs(V,{children:[e.jsx(L,{asChild:!0,children:e.jsx(T,{className:"inline ml-1 h-4 w-4 text-muted-foreground"})}),e.jsx(O,{children:"Enter price in INR"})]})})]}),e.jsx(i,{id:"price",...s.register("price",{valueAsNumber:!0}),placeholder:"Price (in ₹)",type:"number"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"discount",children:"Discount (%)"}),e.jsx(i,{id:"discount",...s.register("discount",{valueAsNumber:!0}),placeholder:"Discount (%)",type:"number"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"turnaroundTime",children:"Turnaround Time"}),e.jsx(i,{id:"turnaroundTime",...s.register("turnaroundTime"),placeholder:"Turnaround Time (e.g. 12-24 hours)"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"duration",children:"Duration"}),e.jsx(i,{id:"duration",...s.register("duration"),placeholder:"Duration (e.g. 1 day)"})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"description",children:"Description"}),e.jsx(S,{id:"description",...s.register("description"),placeholder:"Description",rows:3})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Parameters"}),m.map((t,n)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(i,{...s.register(`parameters.${n}.name`),placeholder:`Parameter ${n+1}`,className:"flex-grow"}),m.length>1&&e.jsx(l,{variant:"outline",size:"icon",onClick:()=>p(n),children:e.jsx(M,{className:"h-4 w-4"})})]},t.id)),e.jsx(l,{variant:"outline",type:"button",onClick:()=>h({name:""}),children:"Add Parameter"})]}),e.jsx(l,{type:"submit",className:"mt-6 w-full",children:"Add Test"})]})})]})]})})};export{ee as default};
