import{c as j,ae as f,bc as y,a7 as e,ah as o,br as p,aH as c,aC as v}from"./index-DGQnzEId.js";import{u as N,a as T,C as w,t as C,z as s}from"./zod-CevI-mEX.js";import{I as t}from"./input-CIeWkrV3.js";import{T as S}from"./textarea-BFjvsdCn.js";import{C as z,b as A,c as F,a as P}from"./card-B6dWGu8z.js";import{L as a}from"./label-CfCTkVuX.js";import{S as k,a as I,b as B,c as D,d as n}from"./select-DuyiteEc.js";import{T as _,a as q,b as L,c as V}from"./tooltip-S-A0LX3z.js";import{A as H}from"./arrow-left-BfpFyjlb.js";import"./index-BdQq_4o_.js";import"./index-CipDl9u1.js";import"./filterUnsupportedProps-Bb-ms138.js";import"./chevron-down-BxHl7DOL.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h=j("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),M=s.object({name:s.string().min(2,{message:"Test name must be at least 2 characters"}),category:s.string().min(2,{message:"Category is required"}),sampleType:s.enum(["Blood","Urine","Saliva","Other"],{required_error:"Select sample type"}),price:s.number().min(1,{message:"Price must be a positive number"}),discount:s.number().min(0).max(100).optional(),turnaroundTime:s.string().min(1,{message:"Turnaround time is required"}),duration:s.string().min(1,{message:"Duration is required"}),description:s.string().min(10,{message:"Description must be at least 10 characters"}),parameters:s.array(s.object({name:s.string().min(1,{message:"Parameter required"})})).min(1,{message:"At least one parameter required"})}),ee=()=>{const m=f(),{labId:d}=y(),r=N({resolver:C(M),defaultValues:{name:"",category:"",sampleType:"Blood",price:0,discount:0,turnaroundTime:"",duration:"",description:"",parameters:[{name:""}]}}),{fields:x,append:u,remove:b}=T({control:r.control,name:"parameters"}),g=async l=>{if(!d){c.error("Lab ID is missing. Please try again from the lab dashboard.");return}try{await v.addTestToLab(d,l),c.success("Test added successfully"),m(`/lab-owner/lab/${d}`)}catch(i){console.error("Failed to add test:",i),c.error("Failed to add test. Please try again.")}};return e.jsxs("div",{className:"min-h-screen bg-slate-50/50 flex flex-col pt-20 pb-12 relative overflow-hidden",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-primary/5 rounded-full blur-[100px] opacity-60"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[600px] h-[600px] bg-blue-500/5 rounded-full blur-[100px] opacity-60"})]}),e.jsxs("div",{className:"container max-w-2xl mx-auto px-4 relative z-10",children:[e.jsxs(o,{variant:"ghost",className:"mb-6 flex items-center text-slate-500 hover:text-primary transition-colors group px-0",onClick:()=>m(-1),children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-white shadow-sm flex items-center justify-center mr-3 group-hover:bg-primary group-hover:text-white transition-all",children:e.jsx(H,{size:16})}),e.jsx("span",{className:"font-semibold",children:"Back to Lab"})]}),e.jsxs(z,{className:"border-none shadow-2xl shadow-slate-200/50 rounded-[2.5rem] overflow-hidden bg-white/80 backdrop-blur-md",children:[e.jsx(A,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b border-slate-100 p-8 pt-10",children:e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-primary/10 flex items-center justify-center text-primary shadow-sm",children:e.jsx(p,{size:24})}),e.jsxs("div",{children:[e.jsx(F,{className:"text-3xl font-extrabold tracking-tight text-slate-900",children:"Add New Test"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Define parameters and pricing for your new lab test."})]})]})}),e.jsx(P,{className:"p-8",children:e.jsxs("form",{onSubmit:r.handleSubmit(g),className:"space-y-10",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"name",className:"text-sm font-bold text-slate-700 ml-1",children:"Test Name"}),e.jsx(t,{id:"name",...r.register("name"),placeholder:"e.g. Complete Blood Count",className:"h-12 rounded-xl border-slate-200 focus:ring-primary/20"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"category",className:"text-sm font-bold text-slate-700 ml-1",children:"Category"}),e.jsx(t,{id:"category",...r.register("category"),placeholder:"e.g. Hematology",className:"h-12 rounded-xl border-slate-200 focus:ring-primary/20"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{className:"text-sm font-bold text-slate-700 ml-1",children:"Sample Type"}),e.jsx(w,{control:r.control,name:"sampleType",render:({field:l})=>e.jsxs(k,{onValueChange:l.onChange,value:l.value,children:[e.jsx(I,{className:"h-12 rounded-xl border-slate-200 focus:ring-primary/20",children:e.jsx(B,{placeholder:"Select sample type"})}),e.jsxs(D,{className:"rounded-xl border-slate-200",children:[e.jsx(n,{value:"Blood",children:"Blood"}),e.jsx(n,{value:"Urine",children:"Urine"}),e.jsx(n,{value:"Saliva",children:"Saliva"}),e.jsx(n,{value:"Other",children:"Other"})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"price",className:"text-sm font-bold text-slate-700 ml-1 flex items-center",children:["Price (â‚¹)",e.jsx(_,{children:e.jsxs(q,{children:[e.jsx(L,{asChild:!0,children:e.jsx(p,{size:14,className:"ml-1.5 text-slate-400 cursor-help"})}),e.jsx(V,{className:"rounded-lg",children:"Base price in INR"})]})})]}),e.jsx(t,{id:"price",...r.register("price",{valueAsNumber:!0}),placeholder:"0.00",type:"number",className:"h-12 rounded-xl border-slate-200 focus:ring-primary/20 font-bold text-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"discount",className:"text-sm font-bold text-slate-700 ml-1",children:"Discount (%)"}),e.jsx(t,{id:"discount",...r.register("discount",{valueAsNumber:!0}),placeholder:"0",type:"number",className:"h-12 rounded-xl border-slate-200 focus:ring-primary/20"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"turnaroundTime",className:"text-sm font-bold text-slate-700 ml-1",children:"TAT"}),e.jsx(t,{id:"turnaroundTime",...r.register("turnaroundTime"),placeholder:"12h",className:"h-12 rounded-xl border-slate-200 focus:ring-primary/20"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"duration",className:"text-sm font-bold text-slate-700 ml-1",children:"Duration"}),e.jsx(t,{id:"duration",...r.register("duration"),placeholder:"1d",className:"h-12 rounded-xl border-slate-200 focus:ring-primary/20"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"description",className:"text-sm font-bold text-slate-700 ml-1",children:"Description"}),e.jsx(S,{id:"description",...r.register("description"),placeholder:"Detailed information about the test protocols and requirements...",className:"min-h-[100px] rounded-2xl border-slate-200 focus:ring-primary/20 resize-none"})]}),e.jsxs("div",{className:"bg-slate-50/50 p-6 rounded-3xl border border-slate-100 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[e.jsx(h,{size:18,className:"text-primary"}),"Test Parameters"]}),e.jsx(o,{variant:"outline",type:"button",size:"sm",onClick:()=>u({name:""}),className:"rounded-xl border-primary/20 text-primary hover:bg-primary/5 hover:border-primary font-bold h-9 px-4",children:"+ Add Parameter"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:x.map((l,i)=>e.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-top-2 duration-300",children:[e.jsx(t,{...r.register(`parameters.${i}.name`),placeholder:`Parameter ${i+1}`,className:"h-11 rounded-xl border-slate-200 bg-white"}),x.length>1&&e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>b(i),className:"h-11 w-11 rounded-xl text-slate-400 hover:text-red-500 hover:bg-red-50",children:e.jsx(h,{size:16})})]},l.id))})]}),e.jsx(o,{type:"submit",className:"w-full h-14 text-lg font-extrabold rounded-2xl shadow-xl shadow-primary/20 hover:scale-[1.01] transition-all bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-700 mt-4",children:"Verify & Add Test to Menu"})]})})]})]})]})};export{ee as default};
