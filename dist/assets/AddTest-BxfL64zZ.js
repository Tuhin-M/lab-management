import{c as j,q as g,a0 as v,s as e,B as o,ad as T,E as u}from"./index-DgBcbMcU.js";import{u as b,a as y,C as f,t as N,z as r}from"./zod-Ne4FsdIx.js";import{I as i}from"./input-CJYTmRyd.js";import{T as C}from"./textarea-Bz-w20Wa.js";import{C as S,a as w,b as F,c as A}from"./card-CEAmbz21.js";import{L as a}from"./label-DqPonXmE.js";import{S as P,a as k,b as D,c as I,d as l}from"./select-CyLyTx59.js";import{T as q,a as B,b as V,c as L}from"./tooltip-VntyZpML.js";import{A as $}from"./arrow-left-BhfpUSqy.js";import{I as E}from"./info-CyGVKbpC.js";import"./index-BdQq_4o_.js";import"./index-C06rPHWt.js";import"./index-CokvLBSM.js";import"./index-BBzG8Kdz.js";import"./filterUnsupportedProps-Bb-ms138.js";import"./chevron-down-ZgyTMxJo.js";import"./check-DOKdhm6x.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=j("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),O=r.object({name:r.string().min(2,{message:"Test name must be at least 2 characters"}),category:r.string().min(2,{message:"Category is required"}),sampleType:r.enum(["Blood","Urine","Saliva","Other"],{required_error:"Select sample type"}),price:r.number().min(1,{message:"Price must be a positive number"}),discount:r.number().min(0).max(100).optional(),turnaroundTime:r.string().min(1,{message:"Turnaround time is required"}),duration:r.string().min(1,{message:"Duration is required"}),description:r.string().min(10,{message:"Description must be at least 10 characters"}),parameters:r.array(r.object({name:r.string().min(1,{message:"Parameter required"})})).min(1,{message:"At least one parameter required"})}),ie=()=>{const c=g(),{id:d}=v(),s=b({resolver:N(O),defaultValues:{name:"",category:"",sampleType:"Blood",price:0,discount:0,turnaroundTime:"",duration:"",description:"",parameters:[{name:""}]}}),{fields:m,append:h,remove:p}=y({control:s.control,name:"parameters"}),x=async t=>{try{await T.post(`/labs/${d}/tests`,t),u.success("Test added successfully"),c(`/lab-owner/lab/${d}`)}catch(n){console.error("Failed to add test:",n),u.error("Failed to add test. Please try again.")}};return e.jsx("div",{className:"min-h-screen bg-background pt-16 pb-12",children:e.jsxs("div",{className:"container max-w-xl mx-auto p-4",children:[e.jsxs(o,{variant:"ghost",className:"mb-6 flex items-center",onClick:()=>c(-1),children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs(S,{children:[e.jsx(w,{children:e.jsx(F,{className:"text-2xl",children:"Add New Test"})}),e.jsx(A,{children:e.jsxs("form",{onSubmit:s.handleSubmit(x),className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"name",children:"Test Name"}),e.jsx(i,{id:"name",...s.register("name"),placeholder:"Test Name"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"category",children:"Category"}),e.jsx(i,{id:"category",...s.register("category"),placeholder:"Category"})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Sample Type"}),e.jsx(f,{control:s.control,name:"sampleType",render:({field:t})=>e.jsxs(P,{onValueChange:t.onChange,value:t.value,children:[e.jsx(k,{children:e.jsx(D,{placeholder:"Select sample type"})}),e.jsxs(I,{children:[e.jsx(l,{value:"Blood",children:"Blood"}),e.jsx(l,{value:"Urine",children:"Urine"}),e.jsx(l,{value:"Saliva",children:"Saliva"}),e.jsx(l,{value:"Other",children:"Other"})]})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(a,{htmlFor:"price",children:["Price (₹)",e.jsx(q,{children:e.jsxs(B,{children:[e.jsx(V,{asChild:!0,children:e.jsx(E,{className:"inline ml-1 h-4 w-4 text-muted-foreground"})}),e.jsx(L,{children:"Enter price in INR"})]})})]}),e.jsx(i,{id:"price",...s.register("price",{valueAsNumber:!0}),placeholder:"Price (in ₹)",type:"number"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"discount",children:"Discount (%)"}),e.jsx(i,{id:"discount",...s.register("discount",{valueAsNumber:!0}),placeholder:"Discount (%)",type:"number"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"turnaroundTime",children:"Turnaround Time"}),e.jsx(i,{id:"turnaroundTime",...s.register("turnaroundTime"),placeholder:"Turnaround Time (e.g. 12-24 hours)"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"duration",children:"Duration"}),e.jsx(i,{id:"duration",...s.register("duration"),placeholder:"Duration (e.g. 1 day)"})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"description",children:"Description"}),e.jsx(C,{id:"description",...s.register("description"),placeholder:"Description",rows:3})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Parameters"}),m.map((t,n)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(i,{...s.register(`parameters.${n}.name`),placeholder:`Parameter ${n+1}`,className:"flex-grow"}),m.length>1&&e.jsx(o,{variant:"outline",size:"icon",onClick:()=>p(n),children:e.jsx(M,{className:"h-4 w-4"})})]},t.id)),e.jsx(o,{variant:"outline",type:"button",onClick:()=>h({name:""}),children:"Add Parameter"})]}),e.jsx(o,{type:"submit",className:"mt-6 w-full",children:"Add Test"})]})})]})]})})};export{ie as default};
