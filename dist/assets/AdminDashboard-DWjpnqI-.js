import{c as M,r as t,bd as S,s as e,O as _,_ as f}from"./index-TcMYSotV.js";import{C as l,b as h,d as j,a as c}from"./card-P2OsDbbh.js";import{T as H,a as P,b as u,c as p}from"./tabs-Ui8SnYbM.js";import{I as z}from"./input-VpsYF4Vr.js";import{B as N}from"./badge-D56tjCZ2.js";import{T as Q,a as $,b as v,c as o,d as q,e as n}from"./table-tvGct60w.js";import{S as J,a as W,b as G,c as K,d as i}from"./select-D_VAVDlA.js";import{U as k}from"./users-BlnwG2r1.js";import{B as b}from"./building-2-Hw8Vxgcg.js";import{C as D}from"./calendar-BLN8T912.js";import{A as X}from"./activity-De_C-h-f.js";import{D as Y}from"./dollar-sign-BGtCWDCx.js";import{T as L}from"./trending-up-fbsYgyMa.js";import{S as Z}from"./search-B-slDbzw.js";import"./index-BdQq_4o_.js";import"./index-CWdTz_rd.js";import"./filterUnsupportedProps-Bb-ms138.js";import"./chevron-down-DLv74dvl.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=M("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=M("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),A="http://localhost:5000/api",Ne=()=>{const[a,R]=t.useState(null),[y,B]=t.useState([]),[U,w]=t.useState(!0),[I,O]=t.useState("overview"),[d,E]=t.useState(""),[x,F]=t.useState("");t.useEffect(()=>{T(),g()},[]);const T=async()=>{try{const s=await S.get(`${A}/admin/analytics`);R(s.data)}catch(s){console.error("Failed to fetch analytics:",s)}},g=async()=>{try{w(!0);const s={};d&&(s.search=d),x&&(s.role=x);const r=await S.get(`${A}/admin/users`,{params:s});B(r.data.users)}catch(s){console.error("Failed to fetch users:",s)}finally{w(!1)}};t.useEffect(()=>{const s=setTimeout(()=>{g()},300);return()=>clearTimeout(s)},[d,x]);const m=({title:s,value:r,icon:V,trend:C})=>e.jsx(l,{children:e.jsx(c,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s}),e.jsx("h3",{className:"text-2xl font-bold mt-1",children:r}),C&&e.jsxs("p",{className:"text-xs text-green-600 mt-1 flex items-center",children:[e.jsx(L,{className:"h-3 w-3 mr-1"}),C]})]}),e.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:V})]})})});return e.jsx("div",{className:"min-h-screen bg-background pt-16",children:e.jsxs("div",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your platform"})]}),e.jsxs(_,{onClick:()=>{T(),g()},children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsxs(H,{value:I,onValueChange:O,children:[e.jsxs(P,{className:"mb-6",children:[e.jsxs(u,{value:"overview",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Overview"]}),e.jsxs(u,{value:"users",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Users"]}),e.jsxs(u,{value:"labs",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Labs"]}),e.jsxs(u,{value:"doctors",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Doctors"]})]}),e.jsx(p,{value:"overview",children:a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(m,{title:"Total Users",value:a.overview.totalUsers,icon:e.jsx(k,{className:"h-6 w-6 text-primary"})}),e.jsx(m,{title:"Total Doctors",value:a.overview.totalDoctors,icon:e.jsx(f,{className:"h-6 w-6 text-primary"})}),e.jsx(m,{title:"Total Labs",value:a.overview.totalLabs,icon:e.jsx(b,{className:"h-6 w-6 text-primary"})}),e.jsx(m,{title:"Total Bookings",value:a.overview.totalBookings,icon:e.jsx(D,{className:"h-6 w-6 text-primary"})})]}),e.jsxs(l,{children:[e.jsx(h,{children:e.jsx(j,{children:"Last 30 Days"})}),e.jsx(c,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx(X,{className:"h-8 w-8 mx-auto text-blue-600 mb-2"}),e.jsx("p",{className:"text-2xl font-bold",children:a.recent30Days.bookings}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Test Bookings"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx(D,{className:"h-8 w-8 mx-auto text-green-600 mb-2"}),e.jsx("p",{className:"text-2xl font-bold",children:a.recent30Days.appointments}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Appointments"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx(Y,{className:"h-8 w-8 mx-auto text-yellow-600 mb-2"}),e.jsxs("p",{className:"text-2xl font-bold",children:["â‚¹",a.recent30Days.revenue.toLocaleString()]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Revenue"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx(L,{className:"h-8 w-8 mx-auto text-purple-600 mb-2"}),e.jsx("p",{className:"text-2xl font-bold",children:a.recent30Days.transactions}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Transactions"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsx(h,{children:e.jsx(j,{children:"Users by Role"})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-3",children:Object.entries(a.breakdowns.usersByRole).map(([s,r])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"capitalize",children:s.toLowerCase().replace("_"," ")}),e.jsx(N,{variant:"secondary",children:r})]},s))})})]}),e.jsxs(l,{children:[e.jsx(h,{children:e.jsx(j,{children:"Bookings by Status"})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-3",children:Object.entries(a.breakdowns.bookingsByStatus).map(([s,r])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"capitalize",children:s.toLowerCase().replace("_"," ")}),e.jsx(N,{variant:"outline",children:r})]},s))})})]})]})]})}),e.jsx(p,{value:"users",children:e.jsxs(l,{children:[e.jsx(h,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(j,{children:"User Management"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(z,{placeholder:"Search users...",value:d,onChange:s=>E(s.target.value),className:"pl-10 w-64"})]}),e.jsxs(J,{value:x,onValueChange:F,children:[e.jsx(W,{className:"w-40",children:e.jsx(G,{placeholder:"All Roles"})}),e.jsxs(K,{children:[e.jsx(i,{value:"",children:"All Roles"}),e.jsx(i,{value:"PATIENT",children:"Patient"}),e.jsx(i,{value:"DOCTOR",children:"Doctor"}),e.jsx(i,{value:"LAB_OWNER",children:"Lab Owner"}),e.jsx(i,{value:"ADMIN",children:"Admin"}),e.jsx(i,{value:"STAFF",children:"Staff"})]})]})]})]})}),e.jsx(c,{children:e.jsxs(Q,{children:[e.jsx($,{children:e.jsxs(v,{children:[e.jsx(o,{children:"Name"}),e.jsx(o,{children:"Email"}),e.jsx(o,{children:"Phone"}),e.jsx(o,{children:"Role"}),e.jsx(o,{children:"Joined"})]})}),e.jsx(q,{children:U?e.jsx(v,{children:e.jsx(n,{colSpan:5,className:"text-center py-8",children:"Loading..."})}):y.length===0?e.jsx(v,{children:e.jsx(n,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No users found"})}):y.map(s=>e.jsxs(v,{children:[e.jsx(n,{className:"font-medium",children:s.name}),e.jsx(n,{children:s.email}),e.jsx(n,{children:s.phone||"-"}),e.jsx(n,{children:e.jsx(N,{variant:s.role==="ADMIN"?"destructive":"secondary",children:s.role})}),e.jsx(n,{children:new Date(s.createdAt).toLocaleDateString()})]},s.id))})]})})]})}),e.jsx(p,{value:"labs",children:e.jsx(l,{children:e.jsxs(c,{className:"py-12 text-center",children:[e.jsx(b,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"Lab Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Coming soon - Manage lab registrations and approvals"})]})})}),e.jsx(p,{value:"doctors",children:e.jsx(l,{children:e.jsxs(c,{className:"py-12 text-center",children:[e.jsx(f,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"Doctor Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Coming soon - Manage doctor registrations and approvals"})]})})})]})]})})};export{Ne as default};
