import{c as A,a_ as ye,a7 as e,a$ as os,r as n,b0 as cs,b1 as we,b2 as ds,af as ms,b3 as xs,b4 as hs,b5 as us,b6 as gs,b7 as ps,b8 as Ce,b9 as fs,ba as js,ab as N,bb as Ae,ae as vs,bc as Ns,aY as oe,ai as P,aW as S,aj as _,ah as m,aH as x,a6 as bs,bd as R,be as ys,bf as ws,bg as Cs,bh as G}from"./index-DGQnzEId.js";import{I as ce}from"./input-CIeWkrV3.js";import{T as de}from"./textarea-BFjvsdCn.js";import{C as I,a as M,b as K,e as As}from"./card-B6dWGu8z.js";import{B as me}from"./badge-mzHaQXoz.js";import{D as xe,a as he,b as ue,c as ge,f as ks}from"./dialog-BTwoG3e5.js";import{m as y}from"./motion-bVXQQQD1.js";import{U as Ds}from"./users-DMU3bB3k.js";import{Z as Ps}from"./zap-CmKT8DTj.js";import{S as pe}from"./sparkles-VHr_ncJG.js";import{S as fe}from"./send-Cn_d8FxV.js";import{A as je}from"./index-DYj1Spqv.js";import{T as Ss}from"./trending-up-RS5ulvDY.js";import{A as Y}from"./award-DZ25ifJZ.js";import{A as _s}from"./arrow-left-BfpFyjlb.js";import{S as ve,T as Rs}from"./triangle-alert-BVT9YK8l.js";import{C as Ts}from"./clock-Cwo_8Tkt.js";import{E as Es}from"./eye-DmvSNwIU.js";import{E as $s}from"./ellipsis-BdqMWVMc.js";import{T as zs}from"./trash-2-BIoGVKZg.js";import{T as Ne,M as Is}from"./thumbs-up-CiCYQCY7.js";import{H as Ms}from"./heart-51uiRBlH.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=A("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=A("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=A("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=A("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=A("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=A("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var ke="AlertDialog",[Bs,Da]=ms(ke,[ye]),p=ye(),De=r=>{const{__scopeAlertDialog:i,...l}=r,o=p(i);return e.jsx(os,{...o,...l,modal:!0})};De.displayName=ke;var Us="AlertDialogTrigger",qs=n.forwardRef((r,i)=>{const{__scopeAlertDialog:l,...o}=r,h=p(l);return e.jsx(js,{...h,...o,ref:i})});qs.displayName=Us;var Ws="AlertDialogPortal",Pe=r=>{const{__scopeAlertDialog:i,...l}=r,o=p(i);return e.jsx(cs,{...o,...l})};Pe.displayName=Ws;var Gs="AlertDialogOverlay",Se=n.forwardRef((r,i)=>{const{__scopeAlertDialog:l,...o}=r,h=p(l);return e.jsx(fs,{...h,...o,ref:i})});Se.displayName=Gs;var C="AlertDialogContent",[Ks,Ys]=Bs(C),Zs=us("AlertDialogContent"),_e=n.forwardRef((r,i)=>{const{__scopeAlertDialog:l,children:o,...h}=r,w=p(l),g=n.useRef(null),k=we(i,g),T=n.useRef(null);return e.jsx(ds,{contentName:C,titleName:Re,docsSlug:"alert-dialog",children:e.jsx(Ks,{scope:l,cancelRef:T,children:e.jsxs(xs,{role:"alertdialog",...w,...h,ref:k,onOpenAutoFocus:hs(h.onOpenAutoFocus,b=>{var f;b.preventDefault(),(f=T.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:b=>b.preventDefault(),onInteractOutside:b=>b.preventDefault(),children:[e.jsx(Zs,{children:o}),e.jsx(Qs,{contentRef:g})]})})})});_e.displayName=C;var Re="AlertDialogTitle",Te=n.forwardRef((r,i)=>{const{__scopeAlertDialog:l,...o}=r,h=p(l);return e.jsx(gs,{...h,...o,ref:i})});Te.displayName=Re;var Ee="AlertDialogDescription",$e=n.forwardRef((r,i)=>{const{__scopeAlertDialog:l,...o}=r,h=p(l);return e.jsx(ps,{...h,...o,ref:i})});$e.displayName=Ee;var Js="AlertDialogAction",ze=n.forwardRef((r,i)=>{const{__scopeAlertDialog:l,...o}=r,h=p(l);return e.jsx(Ce,{...h,...o,ref:i})});ze.displayName=Js;var Ie="AlertDialogCancel",Me=n.forwardRef((r,i)=>{const{__scopeAlertDialog:l,...o}=r,{cancelRef:h}=Ys(Ie,l),w=p(l),g=we(i,h);return e.jsx(Ce,{...w,...o,ref:g})});Me.displayName=Ie;var Qs=({contentRef:r})=>{const i=`\`${C}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${C}\` by passing a \`${Ee}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${C}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return n.useEffect(()=>{var o;document.getElementById((o=r.current)==null?void 0:o.getAttribute("aria-describedby"))||console.warn(i)},[i,r]),null},Xs=De,ea=Pe,Oe=Se,Fe=_e,Le=ze,He=Me,Ve=Te,Be=$e;const sa=Xs,aa=ea,Ue=n.forwardRef(({className:r,...i},l)=>e.jsx(Oe,{className:N("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...i,ref:l}));Ue.displayName=Oe.displayName;const qe=n.forwardRef(({className:r,...i},l)=>e.jsxs(aa,{children:[e.jsx(Ue,{}),e.jsx(Fe,{ref:l,className:N("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...i})]}));qe.displayName=Fe.displayName;const We=({className:r,...i})=>e.jsx("div",{className:N("flex flex-col space-y-2 text-center sm:text-left",r),...i});We.displayName="AlertDialogHeader";const Ge=({className:r,...i})=>e.jsx("div",{className:N("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...i});Ge.displayName="AlertDialogFooter";const Ke=n.forwardRef(({className:r,...i},l)=>e.jsx(Ve,{ref:l,className:N("text-lg font-semibold",r),...i}));Ke.displayName=Ve.displayName;const Ye=n.forwardRef(({className:r,...i},l)=>e.jsx(Be,{ref:l,className:N("text-sm text-muted-foreground",r),...i}));Ye.displayName=Be.displayName;const Ze=n.forwardRef(({className:r,...i},l)=>e.jsx(Le,{ref:l,className:N(Ae(),r),...i}));Ze.displayName=Le.displayName;const Je=n.forwardRef(({className:r,...i},l)=>e.jsx(He,{ref:l,className:N(Ae({variant:"outline"}),"mt-2 sm:mt-0",r),...i}));Je.displayName=He.displayName;const ta=[{tag:"#DiabetesAwareness",posts:234,trending:!0},{tag:"#MentalHealth",posts:189,trending:!0},{tag:"#FitnessGoals",posts:156,trending:!1},{tag:"#HealthyEating",posts:143,trending:!1},{tag:"#HeartHealth",posts:98,trending:!0}],ra=[{name:"Dr. Sarah Johnson",avatar:"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=100",posts:45,isVerified:!0},{name:"HealthPlus Labs",avatar:"https://images.unsplash.com/photo-1579684385127-1ef15d508118?w=100",posts:38,isVerified:!0},{name:"Dr. Priya Patel",avatar:"https://images.unsplash.com/photo-1594824476967-48c8b964273f?w=100",posts:32,isVerified:!0}],Pa=()=>{var re,le,ie;const r=vs(),{postId:i}=Ns(),[l,o]=n.useState([]),[h,w]=n.useState(!0),[g,k]=n.useState(""),[T,b]=n.useState([]),[f,Z]=n.useState({}),[O,F]=n.useState(null),[j,E]=n.useState(null),[$,J]=n.useState(""),[L,Qe]=n.useState(!1),[H,z]=n.useState(null),[v,V]=n.useState(""),[B,U]=n.useState(null),[c,Xe]=n.useState(null);n.useEffect(()=>{(async()=>{const a=await bs.getCurrentUser();Xe(a)})()},[]);const D=async()=>{try{w(!0);const{data:s}=await R.getAllPosts();if(s){const a=s.map(t=>{var d,ne;let u=(d=t.author)==null?void 0:d.name;return(!u||u==="Community Member")&&(u=t.user_id?`User ${t.user_id.substring(0,8)}`:"Anonymous"),{id:t.id,author:{id:t.user_id,name:u,avatar:((ne=t.author)==null?void 0:ne.avatar_url)||`https://api.dicebear.com/7.x/notionists/svg?seed=${t.user_id}`,title:"Community Member",isVerified:!1,followers:0},content:t.content,image:t.image_url,createdAt:new Date(t.created_at).toLocaleDateString(),views:t.view_count||0,reactions:{like:t.likes||0,love:0,celebrate:0},userReaction:null,saved:!1,comments:[],tags:t.tags||[]}});o(a)}}catch(s){console.error("Failed to load posts",s),x.error("Failed to load community posts")}finally{w(!1)}};n.useEffect(()=>{D()},[]),n.useEffect(()=>{if(i&&l.length>0){const s=l.find(a=>a.id===i);s&&F(s)}},[i,l]);const es=async()=>{var a;if(!c){x.error("Please login to create a post"),r("/login");return}if(!g.trim()){x.error("Please write something to post");return}const s=((a=g.match(/#\w+/g))==null?void 0:a.map(t=>t.slice(1)))||[];try{const{data:t,error:u}=await R.createPost({content:g,tags:s,user_id:c.id});if(u)throw u;x.success("ðŸŽ‰ Post created successfully!"),k(""),D()}catch(t){console.error(t),x.error("Failed to create post")}},q=async(s,a)=>{if(!c){x.error("Login to react");return}o(l.map(t=>{if(t.id===s){const u=t.userReaction===a;return{...t,userReaction:u?null:a,reactions:{...t.reactions,[a]:u?t.reactions[a]-1:t.reactions[a]+1}}}return t}))},ss=s=>{o(l.map(a=>{if(a.id===s){const t=a.saved;return x.success(t?"Removed from saved":"Added to saved posts"),{...a,saved:!a.saved}}return a}))},Q=async s=>{var t;if(!c){x.error("Please login to comment"),r("/login");return}const a=(t=f[s])==null?void 0:t.trim();if(a)try{await R.addComment(s,a,c.id),Z({...f,[s]:""}),x.success("Comment added!"),D()}catch{x.error("Failed to add comment")}},as=s=>{b(a=>a.includes(s)?a.filter(t=>t!==s):[...a,s])},W=s=>{F(s),r(`/community/post/${s.id}`,{replace:!0})},X=()=>{F(null),r("/community",{replace:!0})},ee=s=>{navigator.clipboard.writeText(`${window.location.origin}/community/post/${s.id}`),x.success("Link copied to clipboard!")},ts=async()=>{var a;if(!H||!v.trim())return;const s=((a=v.match(/#\w+/g))==null?void 0:a.map(t=>t.slice(1)))||[];try{const{error:t}=await R.editPost(H.id,{content:v,tags:s});if(t)throw t;x.success("Post updated!"),z(null),V(""),D()}catch(t){console.error(t),x.error("Failed to update post")}},rs=async()=>{if(B)try{const{error:s}=await R.deletePost(B);if(s)throw s;x.success("Post deleted!"),U(null),D()}catch(s){console.error(s),x.error("Failed to delete post")}},ls=()=>{x("ðŸ—³ï¸ Poll feature coming soon!",{description:"Stay tuned for updates!"})},is=s=>{z(s),V(s.content)},ns=s=>c?(console.log("isPostOwner check:",{currentUserId:c.id,postAuthorId:s.author.id,match:c.id===s.author.id}),c.id===s.author.id):(console.log("isPostOwner: No currentUser"),!1),se=j?l.filter(s=>s.tags.includes(j)):l,ae=s=>s.reactions.like+s.reactions.love+s.reactions.celebrate,te=({post:s,isDetail:a=!1})=>{var t,u;return e.jsxs(I,{className:"bg-white/90 backdrop-blur-md border-0 shadow-[0_4px_20px_-4px_rgba(0,0,0,0.1)] hover:shadow-[0_8px_30px_-4px_rgba(0,0,0,0.15)] rounded-2xl overflow-hidden group transition-all duration-300",children:[e.jsx(K,{className:"p-5 pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>!a&&W(s),children:[e.jsxs(P,{className:"h-12 w-12 ring-2 ring-primary/10 ring-offset-2",children:[e.jsx(S,{src:s.author.avatar}),e.jsx(_,{className:"bg-gradient-to-br from-primary to-blue-500 text-white font-bold",children:s.author.name.charAt(0)})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold hover:text-primary transition-colors",children:s.author.name}),s.author.isVerified&&e.jsxs(me,{variant:"secondary",className:"bg-primary/10 text-primary text-xs px-1.5 py-0",children:[e.jsx(Y,{className:"h-3 w-3 mr-0.5"})," Verified"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{children:s.author.title}),e.jsx("span",{children:"â€¢"}),e.jsx(Ts,{className:"h-3 w-3"}),e.jsx("span",{children:s.createdAt})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mr-2",children:[e.jsx(Es,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:s.views.toLocaleString()})]}),e.jsxs(ys,{children:[e.jsx(ws,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",className:"rounded-full h-8 w-8",children:e.jsx($s,{className:"h-4 w-4 text-muted-foreground"})})}),e.jsx(Cs,{align:"end",className:"w-48",children:ns(s)?e.jsxs(e.Fragment,{children:[e.jsxs(G,{onClick:()=>is(s),children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Edit Post"]}),e.jsxs(G,{onClick:()=>U(s.id),className:"text-destructive focus:text-destructive",children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"Delete Post"]})]}):e.jsxs(G,{onClick:()=>ee(s),children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Share"]})})]})]})]})}),e.jsxs(M,{className:"px-5 pb-3",children:[e.jsx("p",{className:`whitespace-pre-wrap text-gray-800 leading-relaxed ${!a&&"cursor-pointer"}`,onClick:()=>!a&&W(s),children:s.content}),s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:s.tags.map(d=>e.jsxs(me,{variant:"outline",className:"bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100 cursor-pointer transition-colors",onClick:()=>E(j===d?null:d),children:["#",d]},d))}),s.image&&e.jsx("div",{className:`mt-4 rounded-xl overflow-hidden ${!a&&"cursor-pointer"}`,onClick:()=>!a&&W(s),children:e.jsx("img",{src:s.image,alt:"Post",className:"w-full object-cover max-h-[400px] hover:scale-[1.02] transition-transform duration-300"})}),ae(s)>0&&e.jsxs("div",{className:"flex items-center gap-2 mt-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex -space-x-1",children:[s.reactions.like>0&&e.jsx("span",{className:"text-base",children:"ðŸ‘"}),s.reactions.love>0&&e.jsx("span",{className:"text-base",children:"â¤ï¸"}),s.reactions.celebrate>0&&e.jsx("span",{className:"text-base",children:"âœ¨"})]}),e.jsxs("span",{children:[ae(s).toLocaleString()," reactions"]})]})]}),e.jsxs(As,{className:"px-5 py-3 border-t border-gray-100 flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(m,{variant:"ghost",size:"sm",className:`rounded-full hover:bg-blue-50 transition-all ${s.userReaction==="like"?"text-blue-600 bg-blue-50":""}`,onClick:()=>q(s.id,"like"),children:[e.jsx(Ne,{className:`h-4 w-4 mr-1.5 ${s.userReaction==="like"?"fill-current":""}`}),s.reactions.like>0&&s.reactions.like]}),e.jsxs(m,{variant:"ghost",size:"sm",className:`rounded-full hover:bg-red-50 transition-all ${s.userReaction==="love"?"text-red-500 bg-red-50":""}`,onClick:()=>q(s.id,"love"),children:[e.jsx(Ms,{className:`h-4 w-4 mr-1.5 ${s.userReaction==="love"?"fill-current":""}`}),s.reactions.love>0&&s.reactions.love]}),e.jsxs(m,{variant:"ghost",size:"sm",className:`rounded-full hover:bg-yellow-50 transition-all ${s.userReaction==="celebrate"?"text-yellow-600 bg-yellow-50":""}`,onClick:()=>q(s.id,"celebrate"),children:[e.jsx(pe,{className:`h-4 w-4 mr-1.5 ${s.userReaction==="celebrate"?"fill-current":""}`}),s.reactions.celebrate>0&&s.reactions.celebrate]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(m,{variant:"ghost",size:"sm",className:"rounded-full",onClick:()=>a?null:as(s.id),children:[e.jsx(Is,{className:"h-4 w-4 mr-1.5"}),s.comments.length>0&&s.comments.length]}),e.jsx(m,{variant:"ghost",size:"sm",className:`rounded-full ${s.saved?"text-primary":""}`,onClick:()=>ss(s.id),children:s.saved?e.jsx(Os,{className:"h-4 w-4 fill-current"}):e.jsx(Fs,{className:"h-4 w-4"})}),e.jsx(m,{variant:"ghost",size:"sm",className:"rounded-full",onClick:()=>ee(s),children:e.jsx(be,{className:"h-4 w-4"})})]})]}),e.jsx(je,{children:(T.includes(s.id)||a)&&e.jsxs(y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"w-full space-y-3 mt-4",children:[s.comments.map(d=>e.jsxs("div",{className:"flex gap-3 p-3 bg-gradient-to-r from-slate-50 to-gray-50 rounded-xl",children:[e.jsxs(P,{className:"h-9 w-9",children:[e.jsx(S,{src:d.author.avatar}),e.jsx(_,{children:d.author.name.charAt(0)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-semibold",children:d.author.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:d.createdAt})]}),e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:d.text}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("button",{className:"text-xs text-muted-foreground hover:text-primary flex items-center gap-1",children:[e.jsx(Ne,{className:"h-3 w-3"})," ",d.likes>0&&d.likes]}),e.jsx("button",{className:"text-xs text-muted-foreground hover:text-primary",children:"Reply"})]})]})]},d.id)),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsxs(P,{className:"h-9 w-9",children:[e.jsx(S,{src:((t=c==null?void 0:c.user_metadata)==null?void 0:t.avatar)||`https://api.dicebear.com/7.x/notionists/svg?seed=${c==null?void 0:c.email}`}),e.jsx(_,{children:"U"})]}),e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx(ce,{placeholder:"Write a comment...",value:f[s.id]||"",onChange:d=>Z({...f,[s.id]:d.target.value}),className:"rounded-full border-gray-200",onKeyDown:d=>d.key==="Enter"&&Q(s.id)}),e.jsx(m,{size:"icon",className:"rounded-full shrink-0",onClick:()=>Q(s.id),disabled:!((u=f[s.id])!=null&&u.trim()),children:e.jsx(fe,{className:"h-4 w-4"})})]})]})]})})]})]})};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pt-20 relative overflow-hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-[linear-gradient(to_right,#80808008_1px,transparent_1px),linear-gradient(to_bottom,#80808008_1px,transparent_1px)] bg-[size:32px_32px] pointer-events-none"}),e.jsx("div",{className:"fixed left-0 top-0 w-[600px] h-[600px] bg-gradient-to-br from-primary/8 to-purple-500/5 rounded-full blur-[120px] -translate-x-1/2 -translate-y-1/2 pointer-events-none"}),e.jsx("div",{className:"fixed right-0 bottom-0 w-[600px] h-[600px] bg-gradient-to-tl from-pink-500/8 to-blue-500/5 rounded-full blur-[120px] translate-x-1/2 translate-y-1/2 pointer-events-none"}),e.jsxs("main",{className:"container mx-auto px-4 py-6 relative z-10",children:[e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs("div",{className:"bg-gradient-to-r from-primary via-purple-500 to-pink-500 rounded-3xl p-8 border border-white/20 shadow-2xl relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-white rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"})]}),e.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row lg:items-center justify-between gap-6",children:[e.jsxs("div",{className:"text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-3 bg-white/20 backdrop-blur-sm rounded-2xl",children:e.jsx(Ds,{className:"h-8 w-8"})}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold tracking-tight",children:"Health Community"})]}),e.jsx("p",{className:"text-white/80 text-lg max-w-xl",children:"Share, learn, and connect with healthcare professionals and wellness enthusiasts"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"bg-white/15 backdrop-blur-sm rounded-2xl p-5 text-center border border-white/20",children:[e.jsx("p",{className:"text-3xl font-bold text-white",children:l.length}),e.jsx("p",{className:"text-sm text-white/70",children:"Posts"})]}),e.jsxs("div",{className:"bg-white/15 backdrop-blur-sm rounded-2xl p-5 text-center border border-white/20",children:[e.jsx("p",{className:"text-3xl font-bold text-white",children:"2.5K"}),e.jsx("p",{className:"text-sm text-white/70",children:"Members"})]}),e.jsxs("div",{className:"bg-white/15 backdrop-blur-sm rounded-2xl p-5 text-center border border-white/20",children:[e.jsx("p",{className:"text-3xl font-bold text-white",children:"12K"}),e.jsx("p",{className:"text-sm text-white/70",children:"Reactions"})]})]})]})]})}),j&&e.jsx(y.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6",children:e.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-50 text-blue-700 px-4 py-2 rounded-full",children:[e.jsxs("span",{children:["Showing posts with #",j]}),e.jsx("button",{onClick:()=>E(null),className:"hover:bg-blue-100 rounded-full p-1",children:e.jsx(oe,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(I,{className:"bg-white/90 backdrop-blur-md border-0 shadow-xl rounded-2xl overflow-hidden",children:e.jsx(M,{className:"p-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(P,{className:"h-12 w-12 ring-2 ring-primary/20 ring-offset-2",children:[e.jsx(S,{src:((re=c==null?void 0:c.user_metadata)==null?void 0:re.avatar)||`https://api.dicebear.com/7.x/notionists/svg?seed=${c==null?void 0:c.email}`}),e.jsx(_,{className:"bg-gradient-to-br from-primary to-purple-500 text-white",children:((ie=(le=c==null?void 0:c.user_metadata)==null?void 0:le.name)==null?void 0:ie.charAt(0))||"U"})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(de,{placeholder:"Share something about health, wellness, or your medical insights... âœ¨",value:g,onChange:s=>k(s.target.value),className:"min-h-[140px] resize-none border-gray-200 focus:ring-2 focus:ring-primary/20 rounded-xl text-base bg-gradient-to-br from-white to-slate-50 placeholder:text-muted-foreground/60"}),e.jsxs("div",{className:"absolute bottom-3 right-3 text-xs text-muted-foreground",children:[e.jsx("span",{className:g.length>500?"text-red-500 font-semibold":"",children:g.length}),"/500"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Quick tags:"}),["#HealthTip","#Wellness","#MentalHealth","#Fitness","#Nutrition"].map(s=>e.jsx("button",{onClick:()=>k(a=>a+" "+s),className:"text-xs px-2.5 py-1 rounded-full bg-primary/10 text-primary hover:bg-primary/20 transition-colors font-medium",children:s},s))]}),L&&e.jsxs("div",{className:"flex gap-2 animate-in fade-in slide-in-from-top-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Vs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ce,{placeholder:"Paste image URL here...",value:$,onChange:s=>J(s.target.value),className:"pl-9 rounded-xl border-gray-200"})]}),$&&e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>J(""),className:"text-muted-foreground hover:text-destructive",children:e.jsx(oe,{className:"h-4 w-4"})})]}),$&&e.jsx("div",{className:"relative rounded-xl overflow-hidden border border-gray-200",children:e.jsx("img",{src:$,alt:"Preview",className:"w-full max-h-[200px] object-cover",onError:s=>{s.currentTarget.style.display="none",x.error("Invalid image URL")}})}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsxs(m,{variant:"ghost",size:"sm",className:`rounded-xl hover:bg-blue-50 hover:text-blue-600 ${L?"bg-blue-50 text-blue-600":"text-muted-foreground"}`,onClick:()=>Qe(!L),children:[e.jsx(Hs,{className:"h-5 w-5 mr-1.5"}),"Photo"]}),e.jsxs(m,{variant:"ghost",size:"sm",className:"text-muted-foreground rounded-xl hover:bg-purple-50 hover:text-purple-600",onClick:ls,children:[e.jsx(Ps,{className:"h-5 w-5 mr-1.5"}),"Poll"]}),e.jsxs(m,{variant:"ghost",size:"sm",className:"text-muted-foreground rounded-xl hover:bg-orange-50 hover:text-orange-600",children:[e.jsx(pe,{className:"h-5 w-5 mr-1.5"}),"Tips"]})]}),e.jsxs(m,{onClick:es,className:"rounded-xl shadow-lg px-6 bg-gradient-to-r from-primary to-purple-500 hover:opacity-90 hover:scale-105 transition-all",disabled:!g.trim()||g.length>500,children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Publish"]})]})]})]})})})}),e.jsx(je,{children:se.map((s,a)=>e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:.05*a},children:e.jsx(te,{post:s})},s.id))}),se.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("p",{className:"text-muted-foreground",children:["No posts found for #",j]}),e.jsx(m,{variant:"link",onClick:()=>E(null),children:"Clear filter"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(y.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:e.jsxs(I,{className:"bg-white/90 backdrop-blur-md border-0 shadow-xl rounded-2xl overflow-hidden",children:[e.jsx(K,{className:"pb-3",children:e.jsxs("h3",{className:"font-bold flex items-center gap-2 text-lg",children:[e.jsx("div",{className:"p-1.5 bg-orange-100 rounded-lg",children:e.jsx(Ls,{className:"h-5 w-5 text-orange-500"})}),"Trending Topics"]})}),e.jsx(M,{className:"space-y-2",children:ta.map(s=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-xl cursor-pointer transition-all ${j===s.tag.slice(1)?"bg-primary/10 text-primary":"hover:bg-slate-50"}`,onClick:()=>E(j===s.tag.slice(1)?null:s.tag.slice(1)),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.trending&&e.jsx(Ss,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"font-medium",children:s.tag})]}),e.jsx("span",{className:"text-xs text-muted-foreground bg-gray-100 px-2 py-1 rounded-full",children:s.posts})]},s.tag))})]})}),e.jsx(y.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:e.jsxs(I,{className:"bg-white/90 backdrop-blur-md border-0 shadow-xl rounded-2xl overflow-hidden",children:[e.jsx(K,{className:"pb-3",children:e.jsxs("h3",{className:"font-bold flex items-center gap-2 text-lg",children:[e.jsx("div",{className:"p-1.5 bg-yellow-100 rounded-lg",children:e.jsx(Y,{className:"h-5 w-5 text-yellow-600"})}),"Top Contributors"]})}),e.jsx(M,{className:"space-y-3",children:ra.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors",children:[e.jsxs("span",{className:`text-lg font-bold w-6 ${a===0?"text-yellow-500":a===1?"text-gray-400":"text-orange-400"}`,children:["#",a+1]}),e.jsxs(P,{className:"h-10 w-10 ring-2 ring-offset-1 ring-gray-100",children:[e.jsx(S,{src:s.avatar}),e.jsx(_,{children:s.name.charAt(0)})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("p",{className:"font-medium truncate",children:s.name}),s.isVerified&&e.jsx(Y,{className:"h-4 w-4 text-primary shrink-0"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.posts," posts"]})]})]},s.name))})]})})]})]})]}),e.jsx(xe,{open:!!O,onOpenChange:()=>X(),children:e.jsxs(he,{className:"max-w-2xl max-h-[90vh] overflow-y-auto p-0",children:[e.jsx(ue,{className:"p-4 border-b sticky top-0 bg-white z-10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{variant:"ghost",size:"icon",onClick:X,className:"rounded-full",children:e.jsx(_s,{className:"h-5 w-5"})}),e.jsx(ge,{children:"Post"})]})}),O&&e.jsx("div",{className:"p-4",children:e.jsx(te,{post:O,isDetail:!0})})]})}),e.jsx(xe,{open:!!H,onOpenChange:()=>z(null),children:e.jsxs(he,{className:"sm:max-w-lg",children:[e.jsx(ue,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-primary"}),"Edit Post"]})}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(de,{value:v,onChange:s=>V(s.target.value),className:"min-h-[150px] resize-none",placeholder:"Edit your post..."}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("span",{className:`text-xs ${v.length>500?"text-red-500":"text-muted-foreground"}`,children:[v.length,"/500"]})})]}),e.jsxs(ks,{className:"gap-2 sm:gap-0",children:[e.jsx(m,{variant:"outline",onClick:()=>z(null),children:"Cancel"}),e.jsx(m,{onClick:ts,disabled:!v.trim()||v.length>500,children:"Save Changes"})]})]})}),e.jsx(sa,{open:!!B,onOpenChange:()=>U(null),children:e.jsxs(qe,{children:[e.jsxs(We,{children:[e.jsxs(Ke,{className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"h-5 w-5 text-destructive"}),"Delete Post?"]}),e.jsx(Ye,{children:"This action cannot be undone. This will permanently delete your post and remove it from the community feed."})]}),e.jsxs(Ge,{children:[e.jsx(Je,{children:"Cancel"}),e.jsx(Ze,{onClick:rs,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})};export{Pa as default};
