import{c as z,s as e,U as me,B as b,O as E,r as j,T as ue,v as T,y as xe,al as X,X as B,Y as K,am as V,an as fe,_ as re,q as je,ao as G,E as R}from"./index-DgBcbMcU.js";import{T as pe}from"./TopNavigation-r2xhEDCs.js";import{C as D,c as S,a as J,b as Q,e as ae}from"./card-CEAmbz21.js";import{C as ie}from"./calendar-zC7BfHlE.js";import{t as v,c as ge,e as ve,d as Ne,g as le,a as be,b as ye,m as oe,h as $,f as we,C as Te}from"./calendar-CkFIFfEJ.js";import{I as H}from"./input-CJYTmRyd.js";import{T as se,a as te,b as w,c as M}from"./tabs-B_zr_1HW.js";import{S as De}from"./search-CYFaOCj1.js";import{P as ne}from"./plus-BIoghTCB.js";import{A as ce}from"./activity-CfxJzsKz.js";import{H as Se}from"./heart-5RhJeG2g.js";import{C as U}from"./CartesianGrid-BJaYbF3p.js";import{u as Ce,t as ke,o as Me,s as Y,d as Re,e as _e}from"./zod-Ne4FsdIx.js";import{F as Pe,a as _,b as P,c as k,d as L,e as A}from"./form-DsYPgIbr.js";import{T as Le}from"./textarea-Bz-w20Wa.js";import{S as Ae,a as He,b as Fe,c as Ie,d as q}from"./select-CyLyTx59.js";import{P as Ee,a as Ve,b as Oe}from"./popover-T6qfyh6N.js";import"./index-C06rPHWt.js";import"./index-BBzG8Kdz.js";import"./chevron-down-ZgyTMxJo.js";import"./chevron-right-D9H9ncpN.js";import"./index-ENNysaz7.js";import"./label-DqPonXmE.js";import"./index-BdQq_4o_.js";import"./index-CokvLBSM.js";import"./filterUnsupportedProps-Bb-ms138.js";import"./check-DOKdhm6x.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=z("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=z("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=z("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=z("Hospital",[["path",{d:"M12 6v4",key:"16clxf"}],["path",{d:"M14 14h-4",key:"esezmu"}],["path",{d:"M14 18h-4",key:"16mqa2"}],["path",{d:"M14 8h-4",key:"z8ypaz"}],["path",{d:"M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2",key:"b1k337"}],["path",{d:"M18 22V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v18",key:"16g51d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=z("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);function Z(t,a){const s=v(t),l=v(a),r=s.getTime()-l.getTime();return r<0?-1:r>0?1:r}function Ue(t){return ge(t,Date.now())}function Ye(t){return a=>{const l=(t?Math[t]:Math.trunc)(a);return l===0?0:l}}function qe(t,a){return+v(t)-+v(a)}function We(t){const a=v(t);return a.setHours(23,59,59,999),a}function Ze(t){const a=v(t);return+We(a)==+ve(a)}function Je(t,a){const s=v(t),l=v(a),r=Z(s,l),m=Math.abs(Ne(s,l));let i;if(m<1)i=0;else{s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-r*m);let o=Z(s,l)===-r;Ze(v(t))&&m===1&&Z(t,l)===1&&(o=!1),i=r*(m-Number(o))}return i===0?0:i}function Qe(t,a,s){const l=qe(t,a)/1e3;return Ye(s==null?void 0:s.roundingMethod)(l)}function Ge(t,a,s){const l=be(),r=(s==null?void 0:s.locale)??l.locale??ye,m=2520,i=Z(t,a);if(isNaN(i))throw new RangeError("Invalid time value");const o=Object.assign({},s,{addSuffix:s==null?void 0:s.addSuffix,comparison:i});let u,c;i>0?(u=v(a),c=v(t)):(u=v(t),c=v(a));const d=Qe(c,u),g=(le(c)-le(u))/1e3,f=Math.round((d-g)/60);let N;if(f<2)return s!=null&&s.includeSeconds?d<5?r.formatDistance("lessThanXSeconds",5,o):d<10?r.formatDistance("lessThanXSeconds",10,o):d<20?r.formatDistance("lessThanXSeconds",20,o):d<40?r.formatDistance("halfAMinute",0,o):d<60?r.formatDistance("lessThanXMinutes",1,o):r.formatDistance("xMinutes",1,o):f===0?r.formatDistance("lessThanXMinutes",1,o):r.formatDistance("xMinutes",f,o);if(f<45)return r.formatDistance("xMinutes",f,o);if(f<90)return r.formatDistance("aboutXHours",1,o);if(f<oe){const p=Math.round(f/60);return r.formatDistance("aboutXHours",p,o)}else{if(f<m)return r.formatDistance("xDays",1,o);if(f<$){const p=Math.round(f/oe);return r.formatDistance("xDays",p,o)}else if(f<$*2)return N=Math.round(f/$),r.formatDistance("aboutXMonths",N,o)}if(N=Je(c,u),N<12){const p=Math.round(f/$);return r.formatDistance("xMonths",p,o)}else{const p=N%12,n=Math.trunc(N/12);return p<3?r.formatDistance("aboutXYears",n,o):p<9?r.formatDistance("overXYears",n,o):r.formatDistance("almostXYears",n+1,o)}}function es(t,a){return Ge(t,Ue(t),a)}const ss=t=>{switch(t){case"prescription":return e.jsx(E,{className:"text-blue-500"});case"test_result":return e.jsx(E,{className:"text-green-500"});case"health_metric":return e.jsx(E,{className:"text-purple-500"});case"doctor_note":return e.jsx(E,{className:"text-orange-500"});default:return e.jsx(E,{})}},ts=t=>{switch(t){case"prescription":return"Prescription";case"test_result":return"Test Result";case"health_metric":return"Health Metric";case"doctor_note":return"Doctor Note";default:return t}},rs=({record:t,onView:a,onDelete:s})=>e.jsx(D,{className:"mb-4 overflow-hidden hover:shadow-md transition-shadow",children:e.jsx(S,{className:"p-0",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"p-4 md:p-6 flex-grow",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[ss(t.recordType),e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-muted",children:ts(t.recordType)})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(ie,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:es(new Date(t.date),{addSuffix:!0})})]})]}),e.jsx("h3",{className:"text-lg font-semibold mt-2",children:t.title}),t.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:t.description}),e.jsxs("div",{className:"mt-3 space-y-1 text-sm",children:[t.doctorName&&e.jsxs("div",{className:"flex items-center text-muted-foreground",children:[e.jsx(me,{className:"h-3 w-3 mr-2"}),e.jsxs("span",{children:["Dr. ",t.doctorName]})]}),t.hospitalName&&e.jsxs("div",{className:"flex items-center text-muted-foreground",children:[e.jsx(Ke,{className:"h-3 w-3 mr-2"}),e.jsx("span",{children:t.hospitalName})]})]}),t.tags&&t.tags.length>0&&e.jsxs("div",{className:"flex items-center mt-3 gap-1 flex-wrap",children:[e.jsx($e,{className:"h-3 w-3 text-muted-foreground"}),t.tags.map((l,r)=>e.jsx("span",{className:"text-xs px-2 py-0.5 bg-secondary text-secondary-foreground rounded-full",children:l},r))]}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsx(b,{variant:"outline",size:"sm",onClick:()=>a(t._id),children:"View Details"}),e.jsx(b,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive",onClick:()=>s(t._id),children:"Delete"})]})]}),t.fileUrl&&e.jsx("div",{className:"w-full md:w-32 bg-muted flex items-center justify-center",children:e.jsx("div",{className:"p-2",children:e.jsx("img",{src:t.fileUrl,alt:t.title,className:"w-full h-auto object-cover",onError:l=>{l.currentTarget.style.display="none";const r=l.currentTarget.parentElement;if(r){const m=document.createElement("div");m.innerHTML='<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline></svg>',m.className="text-muted-foreground",r.appendChild(m)}}})})})]})})}),as=({records:t,onViewRecord:a,onDeleteRecord:s,onAddRecord:l})=>{const[r,m]=j.useState(""),[i,o]=j.useState("all"),u=t.filter(c=>{const d=c.title.toLowerCase().includes(r.toLowerCase())||c.description&&c.description.toLowerCase().includes(r.toLowerCase())||c.doctorName&&c.doctorName.toLowerCase().includes(r.toLowerCase())||c.hospitalName&&c.hospitalName.toLowerCase().includes(r.toLowerCase());return(i==="all"||c.recordType===i)&&d});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"relative w-full sm:max-w-xs",children:[e.jsx(De,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(H,{type:"text",placeholder:"Search records...",className:"pl-8",value:r,onChange:c=>m(c.target.value)})]}),e.jsxs(b,{onClick:l,children:[e.jsx(ne,{className:"mr-2 h-4 w-4"})," Add Record"]})]}),e.jsxs(se,{defaultValue:"all",onValueChange:o,children:[e.jsxs(te,{className:"w-full md:w-auto flex justify-start overflow-auto",children:[e.jsx(w,{value:"all",children:"All Records"}),e.jsx(w,{value:"prescription",children:"Prescriptions"}),e.jsx(w,{value:"test_result",children:"Test Results"}),e.jsx(w,{value:"health_metric",children:"Health Metrics"}),e.jsx(w,{value:"doctor_note",children:"Doctor Notes"})]}),e.jsx(M,{value:i,className:"mt-4",children:u.length>0?e.jsx("div",{className:"space-y-4",children:u.map(c=>e.jsx(rs,{record:c,onView:a,onDelete:s},c._id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 border rounded-lg bg-muted/10",children:[e.jsx("p",{className:"text-muted-foreground",children:"No health records found"}),e.jsxs(b,{variant:"outline",className:"mt-4",onClick:l,children:[e.jsx(ne,{className:"mr-2 h-4 w-4"})," Add Your First Record"]})]})})]})]})},ls={light:"",dark:".dark"},de=j.createContext(null);function he(){const t=j.useContext(de);if(!t)throw new Error("useChart must be used within a <ChartContainer />");return t}const O=j.forwardRef(({id:t,className:a,children:s,config:l,...r},m)=>{const i=j.useId(),o=`chart-${t||i.replace(/:/g,"")}`;return e.jsx(de.Provider,{value:{config:l},children:e.jsxs("div",{"data-chart":o,ref:m,className:T("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",a),...r,children:[e.jsx(os,{id:o,config:l}),e.jsx(xe,{children:s})]})})});O.displayName="Chart";const os=({id:t,config:a})=>{const s=Object.entries(a).filter(([l,r])=>r.theme||r.color);return s.length?e.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(ls).map(([l,r])=>`
${r} [data-chart=${t}] {
${s.map(([m,i])=>{var u;const o=((u=i.theme)==null?void 0:u[l])||i.color;return o?`  --color-${m}: ${o};`:null}).join(`
`)}
}
`).join(`
`)}}):null},W=ue,ns=j.forwardRef(({active:t,payload:a,className:s,indicator:l="dot",hideLabel:r=!1,hideIndicator:m=!1,label:i,labelFormatter:o,labelClassName:u,formatter:c,color:d,nameKey:g,labelKey:f},N)=>{const{config:p}=he(),n=j.useMemo(()=>{var I;if(r||!(a!=null&&a.length))return null;const[x]=a,C=`${f||x.dataKey||x.name||"value"}`,F=ee(p,x,C),y=!f&&typeof i=="string"?((I=p[i])==null?void 0:I.label)||i:F==null?void 0:F.label;return o?e.jsx("div",{className:T("font-medium",u),children:o(y,a)}):y?e.jsx("div",{className:T("font-medium",u),children:y}):null},[i,o,a,r,u,p,f]);if(!t||!(a!=null&&a.length))return null;const h=a.length===1&&l!=="dot";return e.jsxs("div",{ref:N,className:T("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",s),children:[h?null:n,e.jsx("div",{className:"grid gap-1.5",children:a.map((x,C)=>{const F=`${g||x.name||x.dataKey||"value"}`,y=ee(p,x,F),I=d||x.payload.fill||x.color;return e.jsx("div",{className:T("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",l==="dot"&&"items-center"),children:c&&(x==null?void 0:x.value)!==void 0&&x.name?c(x.value,x.name,x,C,x.payload):e.jsxs(e.Fragment,{children:[y!=null&&y.icon?e.jsx(y.icon,{}):!m&&e.jsx("div",{className:T("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":l==="dot","w-1":l==="line","w-0 border-[1.5px] border-dashed bg-transparent":l==="dashed","my-0.5":h&&l==="dashed"}),style:{"--color-bg":I,"--color-border":I}}),e.jsxs("div",{className:T("flex flex-1 justify-between leading-none",h?"items-end":"items-center"),children:[e.jsxs("div",{className:"grid gap-1.5",children:[h?n:null,e.jsx("span",{className:"text-muted-foreground",children:(y==null?void 0:y.label)||x.name})]}),x.value&&e.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:x.value.toLocaleString()})]})]})},x.dataKey)})})]})});ns.displayName="ChartTooltip";const cs=j.forwardRef(({className:t,hideIcon:a=!1,payload:s,verticalAlign:l="bottom",nameKey:r},m)=>{const{config:i}=he();return s!=null&&s.length?e.jsx("div",{ref:m,className:T("flex items-center justify-center gap-4",l==="top"?"pb-3":"pt-3",t),children:s.map(o=>{const u=`${r||o.dataKey||"value"}`,c=ee(i,o,u);return e.jsxs("div",{className:T("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[c!=null&&c.icon&&!a?e.jsx(c.icon,{}):e.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:o.color}}),c==null?void 0:c.label]},o.value)})}):null});cs.displayName="ChartLegend";function ee(t,a,s){if(typeof a!="object"||a===null)return;const l="payload"in a&&typeof a.payload=="object"&&a.payload!==null?a.payload:void 0;let r=s;return s in a&&typeof a[s]=="string"?r=a[s]:l&&s in l&&typeof l[s]=="string"&&(r=l[s]),r in t?t[r]:t[s]}const is=({healthData:t})=>{const a=[{date:"2023-01-01",weight:75,bloodPressureSystolic:120,bloodPressureDiastolic:80,bloodSugar:90,cholesterolTotal:190},{date:"2023-02-01",weight:74,bloodPressureSystolic:118,bloodPressureDiastolic:78,bloodSugar:88,cholesterolTotal:185},{date:"2023-03-01",weight:73.5,bloodPressureSystolic:122,bloodPressureDiastolic:82,bloodSugar:92,cholesterolTotal:180},{date:"2023-04-01",weight:72,bloodPressureSystolic:119,bloodPressureDiastolic:79,bloodSugar:87,cholesterolTotal:178},{date:"2023-05-01",weight:72.5,bloodPressureSystolic:121,bloodPressureDiastolic:80,bloodSugar:86,cholesterolTotal:175},{date:"2023-06-01",weight:71,bloodPressureSystolic:118,bloodPressureDiastolic:78,bloodSugar:85,cholesterolTotal:172}],s=t.length>0?t:a,l=d=>{if(s.length<2)return 0;const g=s[s.length-1][d],f=s[0][d];return(g-f)/f*100},r=l("weight"),m=l("bloodPressureSystolic"),i=l("bloodSugar"),o=l("cholesterolTotal"),u=d=>d<0?e.jsx(ze,{className:"h-4 w-4 text-green-500"}):d>0?e.jsx(Xe,{className:"h-4 w-4 text-red-500"}):null,c=d=>new Date(d).toLocaleDateString("en-US",{month:"short",year:"numeric"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(D,{children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Weight"}),e.jsxs("h3",{className:"text-2xl font-bold mt-1",children:[s[s.length-1].weight," kg"]})]}),e.jsx(ce,{className:"h-5 w-5 text-blue-500"})]}),e.jsxs("div",{className:"flex items-center mt-2 text-xs",children:[u(r),e.jsxs("span",{className:r<0?"text-green-500":"text-red-500",children:[Math.abs(r).toFixed(1),"% from start"]})]})]})}),e.jsx(D,{children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Blood Pressure"}),e.jsxs("h3",{className:"text-2xl font-bold mt-1",children:[s[s.length-1].bloodPressureSystolic,"/",s[s.length-1].bloodPressureDiastolic]})]}),e.jsx(Se,{className:"h-5 w-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center mt-2 text-xs",children:[u(m),e.jsxs("span",{className:m<0?"text-green-500":"text-red-500",children:[Math.abs(m).toFixed(1),"% from start"]})]})]})}),e.jsx(D,{children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Blood Sugar"}),e.jsxs("h3",{className:"text-2xl font-bold mt-1",children:[s[s.length-1].bloodSugar," mg/dL"]})]}),e.jsx(Be,{className:"h-5 w-5 text-purple-500"})]}),e.jsxs("div",{className:"flex items-center mt-2 text-xs",children:[u(i),e.jsxs("span",{className:i<0?"text-green-500":"text-red-500",children:[Math.abs(i).toFixed(1),"% from start"]})]})]})}),e.jsx(D,{children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Cholesterol"}),e.jsxs("h3",{className:"text-2xl font-bold mt-1",children:[s[s.length-1].cholesterolTotal," mg/dL"]})]}),e.jsx(ce,{className:"h-5 w-5 text-green-500"})]}),e.jsxs("div",{className:"flex items-center mt-2 text-xs",children:[u(o),e.jsxs("span",{className:o<0?"text-green-500":"text-red-500",children:[Math.abs(o).toFixed(1),"% from start"]})]})]})})]}),e.jsxs(D,{children:[e.jsx(J,{className:"pb-2",children:e.jsx(Q,{children:"Health Trends"})}),e.jsx(S,{children:e.jsxs(se,{defaultValue:"weight",children:[e.jsxs(te,{children:[e.jsx(w,{value:"weight",children:"Weight"}),e.jsx(w,{value:"bloodPressure",children:"Blood Pressure"}),e.jsx(w,{value:"bloodSugar",children:"Blood Sugar"}),e.jsx(w,{value:"cholesterol",children:"Cholesterol"})]}),e.jsx(M,{value:"weight",className:"pt-4",children:e.jsx("div",{className:"h-80",children:e.jsx(O,{config:{weight:{label:"Weight",color:"#3b82f6"}},children:e.jsxs(X,{data:s,children:[e.jsx(U,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"date",tickFormatter:c}),e.jsx(K,{}),e.jsx(W,{content:({active:d,payload:g,label:f})=>d&&g&&g.length?e.jsxs("div",{className:"border rounded-lg shadow-sm bg-background p-2",children:[e.jsx("div",{className:"text-xs font-medium",children:c(f)}),e.jsxs("div",{className:"text-sm font-semibold",children:[g[0].value," kg"]})]}):null}),e.jsx(V,{type:"monotone",dataKey:"weight",stroke:"#3b82f6",activeDot:{r:8}})]})})})}),e.jsx(M,{value:"bloodPressure",className:"pt-4",children:e.jsx("div",{className:"h-80",children:e.jsx(O,{config:{systolic:{label:"Systolic",color:"#ef4444"},diastolic:{label:"Diastolic",color:"#f97316"}},children:e.jsxs(X,{data:s,children:[e.jsx(U,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"date",tickFormatter:c}),e.jsx(K,{}),e.jsx(fe,{}),e.jsx(W,{}),e.jsx(V,{type:"monotone",dataKey:"bloodPressureSystolic",name:"Systolic",stroke:"#ef4444",activeDot:{r:8}}),e.jsx(V,{type:"monotone",dataKey:"bloodPressureDiastolic",name:"Diastolic",stroke:"#f97316",activeDot:{r:8}})]})})})}),e.jsx(M,{value:"bloodSugar",className:"pt-4",children:e.jsx("div",{className:"h-80",children:e.jsx(O,{config:{sugar:{label:"Blood Sugar",color:"#8b5cf6"}},children:e.jsxs(X,{data:s,children:[e.jsx(U,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"date",tickFormatter:c}),e.jsx(K,{}),e.jsx(W,{}),e.jsx(V,{type:"monotone",dataKey:"bloodSugar",name:"Blood Sugar",stroke:"#8b5cf6",activeDot:{r:8}})]})})})}),e.jsx(M,{value:"cholesterol",className:"pt-4",children:e.jsx("div",{className:"h-80",children:e.jsx(O,{config:{cholesterol:{label:"Total Cholesterol",color:"#22c55e"}},children:e.jsxs(X,{data:s,children:[e.jsx(U,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"date",tickFormatter:c}),e.jsx(K,{}),e.jsx(W,{}),e.jsx(V,{type:"monotone",dataKey:"cholesterolTotal",name:"Total Cholesterol",stroke:"#22c55e",activeDot:{r:8}})]})})})})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(b,{children:"Add Health Metric"})})]})},ds=Me({recordType:_e(["prescription","test_result","health_metric","doctor_note"]),title:Y().min(2,{message:"Title must be at least 2 characters"}),date:Re(),doctorName:Y().optional(),hospitalName:Y().optional(),description:Y().optional()}),hs=({onSubmit:t,onCancel:a})=>{const[s,l]=j.useState([]),[r,m]=j.useState(""),[i,o]=j.useState(null),[u,c]=j.useState(null),d=Ce({resolver:ke(ds),defaultValues:{recordType:"prescription",title:"",date:new Date,doctorName:"",hospitalName:"",description:""}}),g=()=>{r.trim()&&!s.includes(r.trim())&&(l([...s,r.trim()]),m(""))},f=n=>{l(s.filter(h=>h!==n))},N=n=>{if(n.target.files&&n.target.files[0]){const h=n.target.files[0];if(o(h),h.type.startsWith("image/")){const x=new FileReader;x.onload=()=>{c(x.result)},x.readAsDataURL(h)}else c(null)}},p=n=>{const h=new FormData;Object.entries(n).forEach(([x,C])=>{C!=null&&(x==="date"?h.append(x,C.toISOString()):h.append(x,C))}),s.length>0&&h.append("tags",JSON.stringify(s)),i&&h.append("file",i),t(h)};return e.jsxs(D,{className:"max-w-2xl mx-auto",children:[e.jsx(J,{children:e.jsx(Q,{children:"Add Health Record"})}),e.jsx(S,{children:e.jsx(Pe,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(p),className:"space-y-6",children:[e.jsx(_,{control:d.control,name:"recordType",render:({field:n})=>e.jsxs(P,{children:[e.jsx(k,{children:"Record Type"}),e.jsxs(Ae,{onValueChange:n.onChange,defaultValue:n.value,children:[e.jsx(L,{children:e.jsx(He,{children:e.jsx(Fe,{placeholder:"Select record type"})})}),e.jsxs(Ie,{children:[e.jsx(q,{value:"prescription",children:"Prescription"}),e.jsx(q,{value:"test_result",children:"Test Result"}),e.jsx(q,{value:"health_metric",children:"Health Metric"}),e.jsx(q,{value:"doctor_note",children:"Doctor Note"})]})]}),e.jsx(A,{})]})}),e.jsx(_,{control:d.control,name:"title",render:({field:n})=>e.jsxs(P,{children:[e.jsx(k,{children:"Title"}),e.jsx(L,{children:e.jsx(H,{placeholder:"Enter a title for the record",...n})}),e.jsx(A,{})]})}),e.jsx(_,{control:d.control,name:"date",render:({field:n})=>e.jsxs(P,{className:"flex flex-col",children:[e.jsx(k,{children:"Date"}),e.jsxs(Ee,{children:[e.jsx(Ve,{asChild:!0,children:e.jsx(L,{children:e.jsxs(b,{variant:"outline",className:T("w-full pl-3 text-left font-normal",!n.value&&"text-muted-foreground"),children:[n.value?we(n.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(ie,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(Oe,{className:"w-auto p-0",align:"start",children:e.jsx(Te,{mode:"single",selected:n.value,onSelect:n.onChange,initialFocus:!0})})]}),e.jsx(A,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(_,{control:d.control,name:"doctorName",render:({field:n})=>e.jsxs(P,{children:[e.jsx(k,{children:"Doctor Name"}),e.jsx(L,{children:e.jsx(H,{placeholder:"Doctor name (optional)",...n})}),e.jsx(A,{})]})}),e.jsx(_,{control:d.control,name:"hospitalName",render:({field:n})=>e.jsxs(P,{children:[e.jsx(k,{children:"Hospital/Clinic"}),e.jsx(L,{children:e.jsx(H,{placeholder:"Hospital or clinic name (optional)",...n})}),e.jsx(A,{})]})})]}),e.jsx(_,{control:d.control,name:"description",render:({field:n})=>e.jsxs(P,{children:[e.jsx(k,{children:"Description"}),e.jsx(L,{children:e.jsx(Le,{placeholder:"Add a description or notes (optional)",className:"min-h-[100px]",...n})}),e.jsx(A,{})]})}),e.jsxs("div",{children:[e.jsx(k,{className:"block mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:s.map((n,h)=>e.jsxs("div",{className:"flex items-center bg-secondary text-secondary-foreground px-3 py-1 rounded-full text-sm",children:[n,e.jsx(b,{type:"button",variant:"ghost",size:"sm",className:"h-5 w-5 p-0 ml-1",onClick:()=>f(n),children:e.jsx(re,{className:"h-3 w-3"})})]},h))}),e.jsxs("div",{className:"flex",children:[e.jsx(H,{value:r,onChange:n=>m(n.target.value),placeholder:"Add tags...",className:"mr-2",onKeyDown:n=>{n.key==="Enter"&&(n.preventDefault(),g())}}),e.jsx(b,{type:"button",variant:"outline",onClick:g,children:"Add"})]})]}),e.jsxs("div",{children:[e.jsx(k,{className:"block mb-2",children:"Upload File"}),e.jsx(H,{type:"file",onChange:N,className:"mb-2"}),u&&e.jsxs("div",{className:"mt-2 relative w-32 h-32 border rounded overflow-hidden",children:[e.jsx("img",{src:u,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx(b,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 h-6 w-6 p-0",onClick:()=>{o(null),c(null)},children:e.jsx(re,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(b,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),e.jsx(b,{type:"submit",children:"Save Record"})]})]})})})]})},Vs=()=>{const t=je(),[a,s]=j.useState([]),[l,r]=j.useState(!0),[m,i]=j.useState("records"),[o,u]=j.useState(!1);j.useEffect(()=>{(async()=>{try{r(!0);const h=await G.getAllRecords();s(h.data)}catch(h){console.error("Error fetching health records:",h),R.error("Failed to load health records")}finally{r(!1)}})()},[]);const c=n=>{R.info(`Viewing record ${n}`)},d=async n=>{try{await G.deleteRecord(n),s(a.filter(h=>h._id!==n)),R.success("Record deleted successfully")}catch(h){console.error("Error deleting record:",h),R.error("Failed to delete record")}},g=()=>{u(!0)},f=async n=>{try{const h=await G.createRecord(n);s([...a,h.data]),u(!1),R.success("Record added successfully")}catch(h){console.error("Error adding record:",h),R.error("Failed to add record")}},N=()=>{u(!1)},p=[{_id:"1",recordType:"prescription",title:"Amoxicillin 500mg",date:"2023-05-15T10:30:00Z",doctorName:"Dr. Sarah Johnson",hospitalName:"City Medical Center",description:"Take 1 tablet 3 times daily after meals for 7 days.",tags:["antibiotic","infection"]},{_id:"2",recordType:"test_result",title:"Complete Blood Count (CBC)",date:"2023-06-02T14:45:00Z",doctorName:"Dr. Michael Chen",hospitalName:"HealthPlus Diagnostics",description:"Normal blood cell counts. Slight elevation in white blood cells.",tags:["blood test","routine checkup"]},{_id:"3",recordType:"health_metric",title:"Blood Pressure Reading",date:"2023-06-20T08:15:00Z",description:"Morning reading: 120/80 mmHg",tags:["blood pressure","morning"]},{_id:"4",recordType:"doctor_note",title:"Annual Physical Examination",date:"2023-04-10T11:00:00Z",doctorName:"Dr. Emily Williams",hospitalName:"Wellness Clinic",description:"Patient is in good health. Recommended to maintain current diet and exercise regimen.",tags:["checkup","annual"]},{_id:"5",recordType:"test_result",title:"Lipid Profile",date:"2023-03-25T09:30:00Z",doctorName:"Dr. Robert Lee",hospitalName:"Metropolis Labs",description:"Cholesterol: 190 mg/dL, HDL: 60 mg/dL, LDL: 110 mg/dL, Triglycerides: 100 mg/dL",tags:["cholesterol","lipids"]}];return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(pe,{activeModule:"doctors"}),e.jsxs("main",{className:"flex-grow container mx-auto py-6 px-4",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Health Records"}),e.jsx(b,{onClick:()=>t("/profile"),children:"Back to Profile"})]}),o?e.jsx(hs,{onSubmit:f,onCancel:N}):e.jsxs(se,{value:m,onValueChange:i,children:[e.jsxs(te,{className:"mb-6",children:[e.jsx(w,{value:"records",children:"My Records"}),e.jsx(w,{value:"analytics",children:"Health Analytics"})]}),e.jsx(M,{value:"records",children:e.jsxs(D,{children:[e.jsxs(J,{children:[e.jsx(Q,{children:"Health Records"}),e.jsx(ae,{children:"Manage your prescriptions, test results, and health metrics"})]}),e.jsx(S,{children:e.jsx(as,{records:a.length>0?a:p,onViewRecord:c,onDeleteRecord:d,onAddRecord:g})})]})}),e.jsx(M,{value:"analytics",children:e.jsxs(D,{children:[e.jsxs(J,{children:[e.jsx(Q,{children:"Health Analytics"}),e.jsx(ae,{children:"Track and analyze your health metrics over time"})]}),e.jsx(S,{children:e.jsx(is,{healthData:[]})})]})})]})]})]})};export{Vs as default};
