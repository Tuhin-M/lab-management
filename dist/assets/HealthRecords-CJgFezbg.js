import{c as ee,s as e,U as ue,O as w,aa as E,r as x,T as me,v as C,E as xe,aT as X,X as $,Y as B,aU as V,aV as fe,a9 as re,J as R,x as je,aW as Q}from"./index-TcMYSotV.js";import{C as S,a as k,b as q,d as J,e as ae}from"./card-P2OsDbbh.js";import{C as ie}from"./calendar-BLN8T912.js";import{t as y,c as ge,e as pe,d as ve,g as le,a as Ne,b as be,m as oe,h as K,f as ye,C as we}from"./calendar-BArorj_6.js";import{T as Te}from"./tag-DM66RsKH.js";import{I as A}from"./input-VpsYF4Vr.js";import{T as se,a as te,b as D,c as _}from"./tabs-Ui8SnYbM.js";import{S as De}from"./search-B-slDbzw.js";import{P as ne}from"./plus-D-76Onsn.js";import{A as ce}from"./activity-De_C-h-f.js";import{H as Ce}from"./heart-8OLC-eam.js";import{D as Se}from"./droplets-R78RJN0u.js";import{C as O}from"./CartesianGrid-BFQHPrmh.js";import{s as ke}from"./storage-BSit0ain.js";import{u as Me,t as Re,o as _e,s as z,d as Pe,e as Le}from"./zod-CnCpVjpE.js";import{F as Fe,a as P,b as L,c as M,d as F,e as H}from"./form-xz68HsE9.js";import{T as He}from"./textarea-DGNrVZoq.js";import{S as Ae,a as Ie,b as Ee,c as Ve,d as W}from"./select-D_VAVDlA.js";import{P as Ue,a as Xe,b as $e}from"./popover-CONKk_ZS.js";import"./label-BmxbEDFR.js";import"./index-BdQq_4o_.js";import"./index-CWdTz_rd.js";import"./filterUnsupportedProps-Bb-ms138.js";import"./chevron-down-DLv74dvl.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=ee("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=ee("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=ee("Hospital",[["path",{d:"M12 6v4",key:"16clxf"}],["path",{d:"M14 14h-4",key:"esezmu"}],["path",{d:"M14 18h-4",key:"16mqa2"}],["path",{d:"M14 8h-4",key:"z8ypaz"}],["path",{d:"M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2",key:"b1k337"}],["path",{d:"M18 22V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v18",key:"16g51d"}]]);function Z(t,a){const s=y(t),o=y(a),r=s.getTime()-o.getTime();return r<0?-1:r>0?1:r}function ze(t){return ge(t,Date.now())}function We(t){return a=>{const o=(t?Math[t]:Math.trunc)(a);return o===0?0:o}}function Ye(t,a){return+y(t)-+y(a)}function Ze(t){const a=y(t);return a.setHours(23,59,59,999),a}function qe(t){const a=y(t);return+Ze(a)==+pe(a)}function Je(t,a){const s=y(t),o=y(a),r=Z(s,o),h=Math.abs(ve(s,o));let i;if(h<1)i=0;else{s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-r*h);let n=Z(s,o)===-r;qe(y(t))&&h===1&&Z(t,o)===1&&(n=!1),i=r*(h-Number(n))}return i===0?0:i}function Qe(t,a,s){const o=Ye(t,a)/1e3;return We(s==null?void 0:s.roundingMethod)(o)}function Ge(t,a,s){const o=Ne(),r=(s==null?void 0:s.locale)??o.locale??be,h=2520,i=Z(t,a);if(isNaN(i))throw new RangeError("Invalid time value");const n=Object.assign({},s,{addSuffix:s==null?void 0:s.addSuffix,comparison:i});let u,c;i>0?(u=y(a),c=y(t)):(u=y(t),c=y(a));const m=Qe(c,u),v=(le(c)-le(u))/1e3,d=Math.round((m-v)/60);let N;if(d<2)return s!=null&&s.includeSeconds?m<5?r.formatDistance("lessThanXSeconds",5,n):m<10?r.formatDistance("lessThanXSeconds",10,n):m<20?r.formatDistance("lessThanXSeconds",20,n):m<40?r.formatDistance("halfAMinute",0,n):m<60?r.formatDistance("lessThanXMinutes",1,n):r.formatDistance("xMinutes",1,n):d===0?r.formatDistance("lessThanXMinutes",1,n):r.formatDistance("xMinutes",d,n);if(d<45)return r.formatDistance("xMinutes",d,n);if(d<90)return r.formatDistance("aboutXHours",1,n);if(d<oe){const j=Math.round(d/60);return r.formatDistance("aboutXHours",j,n)}else{if(d<h)return r.formatDistance("xDays",1,n);if(d<K){const j=Math.round(d/oe);return r.formatDistance("xDays",j,n)}else if(d<K*2)return N=Math.round(d/K),r.formatDistance("aboutXMonths",N,n)}if(N=Je(c,u),N<12){const j=Math.round(d/K);return r.formatDistance("xMonths",j,n)}else{const j=N%12,g=Math.trunc(N/12);return j<3?r.formatDistance("aboutXYears",g,n):j<9?r.formatDistance("overXYears",g,n):r.formatDistance("almostXYears",g+1,n)}}function es(t,a){return Ge(t,ze(t),a)}const ss=t=>{switch(t){case"prescription":return e.jsx(E,{className:"text-blue-500"});case"test_result":return e.jsx(E,{className:"text-green-500"});case"health_metric":return e.jsx(E,{className:"text-purple-500"});case"doctor_note":return e.jsx(E,{className:"text-orange-500"});default:return e.jsx(E,{})}},ts=t=>{switch(t){case"prescription":return"Prescription";case"test_result":return"Test Result";case"health_metric":return"Health Metric";case"doctor_note":return"Doctor Note";default:return t}},rs=({record:t,onView:a,onDelete:s})=>e.jsx(S,{className:"mb-4 overflow-hidden hover:shadow-md transition-shadow",children:e.jsx(k,{className:"p-0",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"p-4 md:p-6 flex-grow",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[ss(t.recordType),e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-muted",children:ts(t.recordType)})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(ie,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:es(new Date(t.date),{addSuffix:!0})})]})]}),e.jsx("h3",{className:"text-lg font-semibold mt-2",children:t.title}),t.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:t.description}),e.jsxs("div",{className:"mt-3 space-y-1 text-sm",children:[t.doctorName&&e.jsxs("div",{className:"flex items-center text-muted-foreground",children:[e.jsx(ue,{className:"h-3 w-3 mr-2"}),e.jsxs("span",{children:["Dr. ",t.doctorName]})]}),t.hospitalName&&e.jsxs("div",{className:"flex items-center text-muted-foreground",children:[e.jsx(Oe,{className:"h-3 w-3 mr-2"}),e.jsx("span",{children:t.hospitalName})]})]}),t.tags&&t.tags.length>0&&e.jsxs("div",{className:"flex items-center mt-3 gap-1 flex-wrap",children:[e.jsx(Te,{className:"h-3 w-3 text-muted-foreground"}),t.tags.map((o,r)=>e.jsx("span",{className:"text-xs px-2 py-0.5 bg-secondary text-secondary-foreground rounded-full",children:o},r))]}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsx(w,{variant:"outline",size:"sm",onClick:()=>a(t._id),children:"View Details"}),e.jsx(w,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive",onClick:()=>s(t._id),children:"Delete"})]})]}),t.fileUrl&&e.jsx("div",{className:"w-full md:w-32 bg-muted flex items-center justify-center",children:e.jsx("div",{className:"p-2",children:e.jsx("img",{src:t.fileUrl,alt:t.title,className:"w-full h-auto object-cover",onError:o=>{o.currentTarget.style.display="none";const r=o.currentTarget.parentElement;if(r){const h=document.createElement("div");h.innerHTML='<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline></svg>',h.className="text-muted-foreground",r.appendChild(h)}}})})})]})})}),as=({records:t,onViewRecord:a,onDeleteRecord:s,onAddRecord:o})=>{const[r,h]=x.useState(""),[i,n]=x.useState("all"),u=t.filter(c=>{const m=c.title.toLowerCase().includes(r.toLowerCase())||c.description&&c.description.toLowerCase().includes(r.toLowerCase())||c.doctorName&&c.doctorName.toLowerCase().includes(r.toLowerCase())||c.hospitalName&&c.hospitalName.toLowerCase().includes(r.toLowerCase());return(i==="all"||c.recordType===i)&&m});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"relative w-full sm:max-w-xs",children:[e.jsx(De,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(A,{type:"text",placeholder:"Search records...",className:"pl-8",value:r,onChange:c=>h(c.target.value)})]}),e.jsxs(w,{onClick:o,children:[e.jsx(ne,{className:"mr-2 h-4 w-4"})," Add Record"]})]}),e.jsxs(se,{defaultValue:"all",onValueChange:n,children:[e.jsxs(te,{className:"w-full md:w-auto flex justify-start overflow-auto",children:[e.jsx(D,{value:"all",children:"All Records"}),e.jsx(D,{value:"prescription",children:"Prescriptions"}),e.jsx(D,{value:"test_result",children:"Test Results"}),e.jsx(D,{value:"health_metric",children:"Health Metrics"}),e.jsx(D,{value:"doctor_note",children:"Doctor Notes"})]}),e.jsx(_,{value:i,className:"mt-4",children:u.length>0?e.jsx("div",{className:"space-y-4",children:u.map(c=>e.jsx(rs,{record:c,onView:a,onDelete:s},c._id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 border rounded-lg bg-muted/10",children:[e.jsx("p",{className:"text-muted-foreground",children:"No health records found"}),e.jsxs(w,{variant:"outline",className:"mt-4",onClick:o,children:[e.jsx(ne,{className:"mr-2 h-4 w-4"})," Add Your First Record"]})]})})]})]})},ls={light:"",dark:".dark"},de=x.createContext(null);function he(){const t=x.useContext(de);if(!t)throw new Error("useChart must be used within a <ChartContainer />");return t}const U=x.forwardRef(({id:t,className:a,children:s,config:o,...r},h)=>{const i=x.useId(),n=`chart-${t||i.replace(/:/g,"")}`;return e.jsx(de.Provider,{value:{config:o},children:e.jsxs("div",{"data-chart":n,ref:h,className:C("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",a),...r,children:[e.jsx(os,{id:n,config:o}),e.jsx(xe,{children:s})]})})});U.displayName="Chart";const os=({id:t,config:a})=>{const s=Object.entries(a).filter(([o,r])=>r.theme||r.color);return s.length?e.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(ls).map(([o,r])=>`
${r} [data-chart=${t}] {
${s.map(([h,i])=>{var u;const n=((u=i.theme)==null?void 0:u[o])||i.color;return n?`  --color-${h}: ${n};`:null}).join(`
`)}
}
`).join(`
`)}}):null},Y=me,ns=x.forwardRef(({active:t,payload:a,className:s,indicator:o="dot",hideLabel:r=!1,hideIndicator:h=!1,label:i,labelFormatter:n,labelClassName:u,formatter:c,color:m,nameKey:v,labelKey:d},N)=>{const{config:j}=he(),g=x.useMemo(()=>{var I;if(r||!(a!=null&&a.length))return null;const[l]=a,p=`${d||l.dataKey||l.name||"value"}`,T=G(j,l,p),b=!d&&typeof i=="string"?((I=j[i])==null?void 0:I.label)||i:T==null?void 0:T.label;return n?e.jsx("div",{className:C("font-medium",u),children:n(b,a)}):b?e.jsx("div",{className:C("font-medium",u),children:b}):null},[i,n,a,r,u,j,d]);if(!t||!(a!=null&&a.length))return null;const f=a.length===1&&o!=="dot";return e.jsxs("div",{ref:N,className:C("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",s),children:[f?null:g,e.jsx("div",{className:"grid gap-1.5",children:a.map((l,p)=>{const T=`${v||l.name||l.dataKey||"value"}`,b=G(j,l,T),I=m||l.payload.fill||l.color;return e.jsx("div",{className:C("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",o==="dot"&&"items-center"),children:c&&(l==null?void 0:l.value)!==void 0&&l.name?c(l.value,l.name,l,p,l.payload):e.jsxs(e.Fragment,{children:[b!=null&&b.icon?e.jsx(b.icon,{}):!h&&e.jsx("div",{className:C("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":o==="dot","w-1":o==="line","w-0 border-[1.5px] border-dashed bg-transparent":o==="dashed","my-0.5":f&&o==="dashed"}),style:{"--color-bg":I,"--color-border":I}}),e.jsxs("div",{className:C("flex flex-1 justify-between leading-none",f?"items-end":"items-center"),children:[e.jsxs("div",{className:"grid gap-1.5",children:[f?g:null,e.jsx("span",{className:"text-muted-foreground",children:(b==null?void 0:b.label)||l.name})]}),l.value&&e.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:l.value.toLocaleString()})]})]})},l.dataKey)})})]})});ns.displayName="ChartTooltip";const cs=x.forwardRef(({className:t,hideIcon:a=!1,payload:s,verticalAlign:o="bottom",nameKey:r},h)=>{const{config:i}=he();return s!=null&&s.length?e.jsx("div",{ref:h,className:C("flex items-center justify-center gap-4",o==="top"?"pb-3":"pt-3",t),children:s.map(n=>{const u=`${r||n.dataKey||"value"}`,c=G(i,n,u);return e.jsxs("div",{className:C("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[c!=null&&c.icon&&!a?e.jsx(c.icon,{}):e.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:n.color}}),c==null?void 0:c.label]},n.value)})}):null});cs.displayName="ChartLegend";function G(t,a,s){if(typeof a!="object"||a===null)return;const o="payload"in a&&typeof a.payload=="object"&&a.payload!==null?a.payload:void 0;let r=s;return s in a&&typeof a[s]=="string"?r=a[s]:o&&s in o&&typeof o[s]=="string"&&(r=o[s]),r in t?t[r]:t[s]}const is=({healthData:t})=>{const a=[{date:"2023-01-01",weight:75,bloodPressureSystolic:120,bloodPressureDiastolic:80,bloodSugar:90,cholesterolTotal:190},{date:"2023-02-01",weight:74,bloodPressureSystolic:118,bloodPressureDiastolic:78,bloodSugar:88,cholesterolTotal:185},{date:"2023-03-01",weight:73.5,bloodPressureSystolic:122,bloodPressureDiastolic:82,bloodSugar:92,cholesterolTotal:180},{date:"2023-04-01",weight:72,bloodPressureSystolic:119,bloodPressureDiastolic:79,bloodSugar:87,cholesterolTotal:178},{date:"2023-05-01",weight:72.5,bloodPressureSystolic:121,bloodPressureDiastolic:80,bloodSugar:86,cholesterolTotal:175},{date:"2023-06-01",weight:71,bloodPressureSystolic:118,bloodPressureDiastolic:78,bloodSugar:85,cholesterolTotal:172}],s=t.length>0?t:a,o=m=>{if(s.length<2)return 0;const v=s[s.length-1][m],d=s[0][m];return(v-d)/d*100},r=o("weight"),h=o("bloodPressureSystolic"),i=o("bloodSugar"),n=o("cholesterolTotal"),u=m=>m<0?e.jsx(Be,{className:"h-4 w-4 text-green-500"}):m>0?e.jsx(Ke,{className:"h-4 w-4 text-red-500"}):null,c=m=>new Date(m).toLocaleDateString("en-US",{month:"short",year:"numeric"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(S,{children:e.jsxs(k,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Weight"}),e.jsxs("h3",{className:"text-2xl font-bold mt-1",children:[s[s.length-1].weight," kg"]})]}),e.jsx(ce,{className:"h-5 w-5 text-blue-500"})]}),e.jsxs("div",{className:"flex items-center mt-2 text-xs",children:[u(r),e.jsxs("span",{className:r<0?"text-green-500":"text-red-500",children:[Math.abs(r).toFixed(1),"% from start"]})]})]})}),e.jsx(S,{children:e.jsxs(k,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Blood Pressure"}),e.jsxs("h3",{className:"text-2xl font-bold mt-1",children:[s[s.length-1].bloodPressureSystolic,"/",s[s.length-1].bloodPressureDiastolic]})]}),e.jsx(Ce,{className:"h-5 w-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center mt-2 text-xs",children:[u(h),e.jsxs("span",{className:h<0?"text-green-500":"text-red-500",children:[Math.abs(h).toFixed(1),"% from start"]})]})]})}),e.jsx(S,{children:e.jsxs(k,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Blood Sugar"}),e.jsxs("h3",{className:"text-2xl font-bold mt-1",children:[s[s.length-1].bloodSugar," mg/dL"]})]}),e.jsx(Se,{className:"h-5 w-5 text-purple-500"})]}),e.jsxs("div",{className:"flex items-center mt-2 text-xs",children:[u(i),e.jsxs("span",{className:i<0?"text-green-500":"text-red-500",children:[Math.abs(i).toFixed(1),"% from start"]})]})]})}),e.jsx(S,{children:e.jsxs(k,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Cholesterol"}),e.jsxs("h3",{className:"text-2xl font-bold mt-1",children:[s[s.length-1].cholesterolTotal," mg/dL"]})]}),e.jsx(ce,{className:"h-5 w-5 text-green-500"})]}),e.jsxs("div",{className:"flex items-center mt-2 text-xs",children:[u(n),e.jsxs("span",{className:n<0?"text-green-500":"text-red-500",children:[Math.abs(n).toFixed(1),"% from start"]})]})]})})]}),e.jsxs(S,{children:[e.jsx(q,{className:"pb-2",children:e.jsx(J,{children:"Health Trends"})}),e.jsx(k,{children:e.jsxs(se,{defaultValue:"weight",children:[e.jsxs(te,{children:[e.jsx(D,{value:"weight",children:"Weight"}),e.jsx(D,{value:"bloodPressure",children:"Blood Pressure"}),e.jsx(D,{value:"bloodSugar",children:"Blood Sugar"}),e.jsx(D,{value:"cholesterol",children:"Cholesterol"})]}),e.jsx(_,{value:"weight",className:"pt-4",children:e.jsx("div",{className:"h-80",children:e.jsx(U,{config:{weight:{label:"Weight",color:"#3b82f6"}},children:e.jsxs(X,{data:s,children:[e.jsx(O,{strokeDasharray:"3 3"}),e.jsx($,{dataKey:"date",tickFormatter:c}),e.jsx(B,{}),e.jsx(Y,{content:({active:m,payload:v,label:d})=>m&&v&&v.length?e.jsxs("div",{className:"border rounded-lg shadow-sm bg-background p-2",children:[e.jsx("div",{className:"text-xs font-medium",children:c(d)}),e.jsxs("div",{className:"text-sm font-semibold",children:[v[0].value," kg"]})]}):null}),e.jsx(V,{type:"monotone",dataKey:"weight",stroke:"#3b82f6",activeDot:{r:8}})]})})})}),e.jsx(_,{value:"bloodPressure",className:"pt-4",children:e.jsx("div",{className:"h-80",children:e.jsx(U,{config:{systolic:{label:"Systolic",color:"#ef4444"},diastolic:{label:"Diastolic",color:"#f97316"}},children:e.jsxs(X,{data:s,children:[e.jsx(O,{strokeDasharray:"3 3"}),e.jsx($,{dataKey:"date",tickFormatter:c}),e.jsx(B,{}),e.jsx(fe,{}),e.jsx(Y,{}),e.jsx(V,{type:"monotone",dataKey:"bloodPressureSystolic",name:"Systolic",stroke:"#ef4444",activeDot:{r:8}}),e.jsx(V,{type:"monotone",dataKey:"bloodPressureDiastolic",name:"Diastolic",stroke:"#f97316",activeDot:{r:8}})]})})})}),e.jsx(_,{value:"bloodSugar",className:"pt-4",children:e.jsx("div",{className:"h-80",children:e.jsx(U,{config:{sugar:{label:"Blood Sugar",color:"#8b5cf6"}},children:e.jsxs(X,{data:s,children:[e.jsx(O,{strokeDasharray:"3 3"}),e.jsx($,{dataKey:"date",tickFormatter:c}),e.jsx(B,{}),e.jsx(Y,{}),e.jsx(V,{type:"monotone",dataKey:"bloodSugar",name:"Blood Sugar",stroke:"#8b5cf6",activeDot:{r:8}})]})})})}),e.jsx(_,{value:"cholesterol",className:"pt-4",children:e.jsx("div",{className:"h-80",children:e.jsx(U,{config:{cholesterol:{label:"Total Cholesterol",color:"#22c55e"}},children:e.jsxs(X,{data:s,children:[e.jsx(O,{strokeDasharray:"3 3"}),e.jsx($,{dataKey:"date",tickFormatter:c}),e.jsx(B,{}),e.jsx(Y,{}),e.jsx(V,{type:"monotone",dataKey:"cholesterolTotal",name:"Total Cholesterol",stroke:"#22c55e",activeDot:{r:8}})]})})})})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(w,{children:"Add Health Metric"})})]})},ds=_e({recordType:Le(["prescription","test_result","health_metric","doctor_note"]),title:z().min(2,{message:"Title must be at least 2 characters"}),date:Pe(),doctorName:z().optional(),hospitalName:z().optional(),description:z().optional()}),hs=({onSubmit:t,onCancel:a})=>{const[s,o]=x.useState([]),[r,h]=x.useState(""),[i,n]=x.useState(null),[u,c]=x.useState(null),[m,v]=x.useState(!1),d=Me({resolver:Re(ds),defaultValues:{recordType:"prescription",title:"",date:new Date,doctorName:"",hospitalName:"",description:""}}),N=()=>{r.trim()&&!s.includes(r.trim())&&(o([...s,r.trim()]),h(""))},j=l=>{o(s.filter(p=>p!==l))},g=l=>{if(l.target.files&&l.target.files[0]){const p=l.target.files[0];if(n(p),p.type.startsWith("image/")){const T=new FileReader;T.onload=()=>{c(T.result)},T.readAsDataURL(p)}else c(null)}},f=async l=>{try{v(!0);let p=null;if(i){const b=`${Date.now()}-${i.name}`;p=await ke.uploadImage("health-records",b,i)}const T={...l,tags:s,fileUrl:p};t(T)}catch(p){console.error("Error uploading file:",p),R.error("Failed to upload file")}finally{v(!1)}};return e.jsxs(S,{className:"max-w-2xl mx-auto",children:[e.jsx(q,{children:e.jsx(J,{children:"Add Health Record"})}),e.jsx(k,{children:e.jsx(Fe,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(f),className:"space-y-6",children:[e.jsx(P,{control:d.control,name:"recordType",render:({field:l})=>e.jsxs(L,{children:[e.jsx(M,{children:"Record Type"}),e.jsxs(Ae,{onValueChange:l.onChange,defaultValue:l.value,children:[e.jsx(F,{children:e.jsx(Ie,{children:e.jsx(Ee,{placeholder:"Select record type"})})}),e.jsxs(Ve,{children:[e.jsx(W,{value:"prescription",children:"Prescription"}),e.jsx(W,{value:"test_result",children:"Test Result"}),e.jsx(W,{value:"health_metric",children:"Health Metric"}),e.jsx(W,{value:"doctor_note",children:"Doctor Note"})]})]}),e.jsx(H,{})]})}),e.jsx(P,{control:d.control,name:"title",render:({field:l})=>e.jsxs(L,{children:[e.jsx(M,{children:"Title"}),e.jsx(F,{children:e.jsx(A,{placeholder:"Enter a title for the record",...l})}),e.jsx(H,{})]})}),e.jsx(P,{control:d.control,name:"date",render:({field:l})=>e.jsxs(L,{className:"flex flex-col",children:[e.jsx(M,{children:"Date"}),e.jsxs(Ue,{children:[e.jsx(Xe,{asChild:!0,children:e.jsx(F,{children:e.jsxs(w,{variant:"outline",className:C("w-full pl-3 text-left font-normal",!l.value&&"text-muted-foreground"),children:[l.value?ye(l.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(ie,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx($e,{className:"w-auto p-0",align:"start",children:e.jsx(we,{mode:"single",selected:l.value,onSelect:l.onChange,initialFocus:!0})})]}),e.jsx(H,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(P,{control:d.control,name:"doctorName",render:({field:l})=>e.jsxs(L,{children:[e.jsx(M,{children:"Doctor Name"}),e.jsx(F,{children:e.jsx(A,{placeholder:"Doctor name (optional)",...l})}),e.jsx(H,{})]})}),e.jsx(P,{control:d.control,name:"hospitalName",render:({field:l})=>e.jsxs(L,{children:[e.jsx(M,{children:"Hospital/Clinic"}),e.jsx(F,{children:e.jsx(A,{placeholder:"Hospital or clinic name (optional)",...l})}),e.jsx(H,{})]})})]}),e.jsx(P,{control:d.control,name:"description",render:({field:l})=>e.jsxs(L,{children:[e.jsx(M,{children:"Description"}),e.jsx(F,{children:e.jsx(He,{placeholder:"Add a description or notes (optional)",className:"min-h-[100px]",...l})}),e.jsx(H,{})]})}),e.jsxs("div",{children:[e.jsx(M,{className:"block mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:s.map((l,p)=>e.jsxs("div",{className:"flex items-center bg-secondary text-secondary-foreground px-3 py-1 rounded-full text-sm",children:[l,e.jsx(w,{type:"button",variant:"ghost",size:"sm",className:"h-5 w-5 p-0 ml-1",onClick:()=>j(l),children:e.jsx(re,{className:"h-3 w-3"})})]},p))}),e.jsxs("div",{className:"flex",children:[e.jsx(A,{value:r,onChange:l=>h(l.target.value),placeholder:"Add tags...",className:"mr-2",onKeyDown:l=>{l.key==="Enter"&&(l.preventDefault(),N())}}),e.jsx(w,{type:"button",variant:"outline",onClick:N,children:"Add"})]})]}),e.jsxs("div",{children:[e.jsx(M,{className:"block mb-2",children:"Upload File"}),e.jsx(A,{type:"file",onChange:g,className:"mb-2"}),u&&e.jsxs("div",{className:"mt-2 relative w-32 h-32 border rounded overflow-hidden",children:[e.jsx("img",{src:u,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx(w,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 h-6 w-6 p-0",onClick:()=>{n(null),c(null)},children:e.jsx(re,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(w,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),e.jsx(w,{type:"submit",disabled:m,children:m?"Uploading...":"Save Record"})]})]})})})]})},As=()=>{const t=je(),[a,s]=x.useState([]),[o,r]=x.useState(!0),[h,i]=x.useState("records"),[n,u]=x.useState(!1);x.useEffect(()=>{(async()=>{try{r(!0);const f=await Q.getAllRecords();s(f.data)}catch(f){console.error("Error fetching health records:",f),R.error("Failed to load health records")}finally{r(!1)}})()},[]);const c=g=>{R.info(`Viewing record ${g}`)},m=async g=>{try{await Q.deleteRecord(g),s(a.filter(f=>f._id!==g)),R.success("Record deleted successfully")}catch(f){console.error("Error deleting record:",f),R.error("Failed to delete record")}},v=()=>{u(!0)},d=async g=>{try{const f=await Q.createRecord(g);s([...a,f.data]),u(!1),R.success("Record added successfully")}catch(f){console.error("Error adding record:",f),R.error("Failed to add record")}},N=()=>{u(!1)},j=[{_id:"1",recordType:"prescription",title:"Amoxicillin 500mg",date:"2023-05-15T10:30:00Z",doctorName:"Dr. Sarah Johnson",hospitalName:"City Medical Center",description:"Take 1 tablet 3 times daily after meals for 7 days.",tags:["antibiotic","infection"]},{_id:"2",recordType:"test_result",title:"Complete Blood Count (CBC)",date:"2023-06-02T14:45:00Z",doctorName:"Dr. Michael Chen",hospitalName:"HealthPlus Diagnostics",description:"Normal blood cell counts. Slight elevation in white blood cells.",tags:["blood test","routine checkup"]},{_id:"3",recordType:"health_metric",title:"Blood Pressure Reading",date:"2023-06-20T08:15:00Z",description:"Morning reading: 120/80 mmHg",tags:["blood pressure","morning"]},{_id:"4",recordType:"doctor_note",title:"Annual Physical Examination",date:"2023-04-10T11:00:00Z",doctorName:"Dr. Emily Williams",hospitalName:"Wellness Clinic",description:"Patient is in good health. Recommended to maintain current diet and exercise regimen.",tags:["checkup","annual"]},{_id:"5",recordType:"test_result",title:"Lipid Profile",date:"2023-03-25T09:30:00Z",doctorName:"Dr. Robert Lee",hospitalName:"Metropolis Labs",description:"Cholesterol: 190 mg/dL, HDL: 60 mg/dL, LDL: 110 mg/dL, Triglycerides: 100 mg/dL",tags:["cholesterol","lipids"]}];return e.jsx("div",{className:"min-h-screen bg-background flex flex-col pt-16",children:e.jsxs("main",{className:"flex-grow container mx-auto py-6 px-4",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Health Records"}),e.jsx(w,{onClick:()=>t("/profile"),children:"Back to Profile"})]}),n?e.jsx(hs,{onSubmit:d,onCancel:N}):e.jsxs(se,{value:h,onValueChange:i,children:[e.jsxs(te,{className:"mb-6",children:[e.jsx(D,{value:"records",children:"My Records"}),e.jsx(D,{value:"analytics",children:"Health Analytics"})]}),e.jsx(_,{value:"records",children:e.jsxs(S,{children:[e.jsxs(q,{children:[e.jsx(J,{children:"Health Records"}),e.jsx(ae,{children:"Manage your prescriptions, test results, and health metrics"})]}),e.jsx(k,{children:e.jsx(as,{records:a.length>0?a:j,onViewRecord:c,onDeleteRecord:m,onAddRecord:v})})]})}),e.jsx(_,{value:"analytics",children:e.jsxs(S,{children:[e.jsxs(q,{children:[e.jsx(J,{children:"Health Analytics"}),e.jsx(ae,{children:"Track and analyze your health metrics over time"})]}),e.jsx(k,{children:e.jsx(is,{healthData:[]})})]})})]})]})})};export{As as default};
