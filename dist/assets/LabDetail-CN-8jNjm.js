import{a7 as e,ah as l,aC as B,aH as f,ae as E,bq as R,bc as V,r as u,aO as $}from"./index-DGQnzEId.js";import{C as F}from"./calendar-Ck8xVGdk.js";import{T as O,a as q,b as C,c as o,d as G,e as i}from"./table-agm1sfEJ.js";import{I as K}from"./input-CIeWkrV3.js";import{P as W,a as J,b as Q}from"./popover-lFmkDFEp.js";import{S as L,a as _,b as z,c as M,d as x}from"./select-DuyiteEc.js";import{B as h}from"./badge-mzHaQXoz.js";import{C as U}from"./calendar-DBL91Vks.js";import{C as b,b as j,a as g}from"./card-B6dWGu8z.js";import{T as X,a as Y,b as S,c as A}from"./tabs-fxqR1EoR.js";import{A as I}from"./arrow-left-BfpFyjlb.js";import{P as Z}from"./phone-DrZSZXI4.js";import{M as ee}from"./mail-B474Adb7.js";import{S as D}from"./shield-DhL_B5m7.js";import"./filterUnsupportedProps-Bb-ms138.js";import"./index-BdQq_4o_.js";import"./index-CipDl9u1.js";import"./chevron-down-BxHl7DOL.js";const se=({labId:n,appointments:m,onStatusChange:r,onSearch:N,onFilter:p})=>{const a=async(s,c)=>{try{await B.updateAppointmentStatus(s,c),f.success(`Appointment status updated to ${c}`),r()}catch(y){console.error("Error updating appointment status:",y),f.error("Failed to update appointment status")}},v=s=>{switch(s){case"scheduled":return e.jsx(h,{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-300",children:"Scheduled"});case"completed":return e.jsx(h,{variant:"outline",className:"bg-green-100 text-green-800 border-green-300",children:"Completed"});case"cancelled":return e.jsx(h,{variant:"outline",className:"bg-red-100 text-red-800 border-red-300",children:"Cancelled"});default:return e.jsx(h,{variant:"outline",children:s})}},w=s=>s==="paid"?e.jsx(h,{className:"bg-green-100 text-green-800 border-green-300",children:"Paid"}):e.jsx(h,{className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:"Pending"});return e.jsxs("div",{className:"bg-white rounded-md shadow",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Appointments"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{placeholder:"Search patients/tests",onChange:s=>N(s.target.value),className:"w-64"}),e.jsxs(L,{onValueChange:s=>p({status:s}),children:[e.jsx(_,{className:"w-32",children:e.jsx(z,{placeholder:"Status"})}),e.jsxs(M,{children:[e.jsx(x,{value:"all",children:"All"}),e.jsx(x,{value:"scheduled",children:"Scheduled"}),e.jsx(x,{value:"completed",children:"Completed"}),e.jsx(x,{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsxs(l,{variant:"outline",className:"w-40",children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Date"})]})}),e.jsx(Q,{className:"w-auto p-0",children:e.jsx(F,{mode:"single",onSelect:s=>p({date:s==null?void 0:s.toISOString()})})})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(O,{children:[e.jsx(q,{children:e.jsxs(C,{children:[e.jsx(o,{children:"Patient Name"}),e.jsx(o,{children:"Test"}),e.jsx(o,{children:"Date"}),e.jsx(o,{children:"Time"}),e.jsx(o,{children:"Amount"}),e.jsx(o,{children:"Payment"}),e.jsx(o,{children:"Status"}),e.jsx(o,{children:"Action"})]})}),e.jsx(G,{children:m.length===0?e.jsx(C,{children:e.jsx(i,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No appointments found"})}):m.map(s=>e.jsxs(C,{children:[e.jsx(i,{children:s.patientName}),e.jsx(i,{children:s.testName}),e.jsx(i,{children:new Date(s.date).toLocaleDateString()}),e.jsx(i,{children:s.time}),e.jsxs(i,{children:["₹",s.amount]}),e.jsx(i,{children:w(s.paymentStatus)}),e.jsx(i,{children:v(s.status)}),e.jsx(i,{children:e.jsxs(L,{defaultValue:s.status,onValueChange:c=>a(s._id,c),children:[e.jsx(_,{className:"w-[120px]",children:e.jsx(z,{placeholder:"Status"})}),e.jsxs(M,{children:[e.jsx(x,{value:"scheduled",children:"Scheduled"}),e.jsx(x,{value:"completed",children:"Completed"}),e.jsx(x,{value:"cancelled",children:"Cancelled"})]})]})})]},s._id))})]})}),m.length>0&&e.jsx("div",{className:"flex justify-end p-4 border-t",children:e.jsx(l,{variant:"outline",size:"sm",children:"View All"})})]})},ve=()=>{var P;const n=E(),m=R(),{id:r}=V(),[N,p]=u.useState(!0),[a,v]=u.useState(null),[w,s]=u.useState([]),[c,y]=u.useState([]),k=(P=m.state)==null?void 0:P.fromDashboard;u.useEffect(()=>{(async()=>{try{p(!0);const d={_id:r,name:"Central Diagnostics",description:"A leading diagnostic center providing high-quality lab tests and healthcare services.",address:{street:"123 Main Street",city:"Mumbai",state:"Maharashtra",zipCode:"400001"},contactInfo:{phone:"9876543210",email:"contact@centraldiagnostics.com",website:"www.centraldiagnostics.com"},certifications:["NABL","ISO 9001:2015"],operatingHours:{weekdays:{open:"08:00",close:"20:00"},weekends:{open:"09:00",close:"17:00"}},image:"/placeholder.svg",rating:4.5,tests:new Array(12),status:"active"};v(d),s([{_id:"appt1",patientName:"Rahul Sharma",testName:"Complete Blood Count",date:"2025-04-15",time:"10:30 AM",status:"scheduled",paymentStatus:"paid",amount:1200},{_id:"appt2",patientName:"Priya Patel",testName:"Lipid Profile",date:"2025-04-16",time:"11:00 AM",status:"completed",paymentStatus:"paid",amount:1500},{_id:"appt3",patientName:"Amit Kumar",testName:"Thyroid Profile",date:"2025-04-17",time:"09:15 AM",status:"scheduled",paymentStatus:"pending",amount:800}]);const{data:H}=await B.getLabTests(r);y(H||[])}catch(d){console.error("Failed to fetch lab data:",d),f.error("Failed to load lab details")}finally{p(!1)}})()},[r,m.state]);const T=async()=>{f.success("Appointments refreshed")};return N?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"h-12 w-12 border-t-2 border-primary rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-lg",children:"Loading lab details..."})]})}):a?e.jsxs("div",{className:"flex-1 flex flex-col min-h-screen bg-slate-50/50 relative overflow-hidden",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-primary/5 rounded-full blur-[100px] opacity-60"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[600px] h-[600px] bg-blue-500/5 rounded-full blur-[100px] opacity-60"})]}),!k&&e.jsxs("header",{className:"h-20 border-b border-slate-200 bg-white/80 backdrop-blur-md sticky top-0 z-30 px-8 flex items-center justify-between",children:[e.jsxs(l,{variant:"ghost",onClick:()=>n(-1),className:"rounded-xl gap-2 text-slate-500 hover:text-primary transition-colors",children:[e.jsx(I,{size:18}),e.jsx("span",{className:"font-semibold",children:"Back to Dashboard"})]}),e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Lab Administration"}),e.jsx("div",{className:"w-24"})," "]}),e.jsx("main",{className:"flex-1 p-6 md:p-10 relative z-10",children:e.jsxs("div",{className:"container max-w-6xl mx-auto",children:[k&&e.jsxs(l,{variant:"ghost",className:"mb-8 -ml-4 rounded-xl text-slate-500 hover:text-primary transition-colors group",onClick:()=>n(-1),children:[e.jsx(I,{className:"h-5 w-5 mr-3 group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{className:"font-semibold",children:"Exit Lab View"})]}),e.jsxs("div",{className:"grid gap-8 lg:grid-cols-3 items-start",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(b,{className:"border-none shadow-2xl shadow-slate-200/50 rounded-[2rem] overflow-hidden bg-white",children:[e.jsxs("div",{className:"aspect-video overflow-hidden relative group",children:[e.jsx("img",{src:a.image||"/placeholder.svg",alt:a.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs(j,{className:"pt-6 pb-2 px-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-primary bg-primary/10 px-3 py-1 rounded-full",children:"Active Facility"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:5}).map((t,d)=>e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${d<Math.floor(a.rating)?"bg-amber-400":"bg-slate-200"}`},d))})]}),e.jsx("h2",{className:"text-2xl font-extrabold text-slate-900 leading-tight",children:a.name})]}),e.jsxs(g,{className:"px-6 pb-8 space-y-6",children:[e.jsxs("p",{className:"text-sm text-slate-500 leading-relaxed italic",children:['"',a.description,'"']}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-slate-50 flex items-center justify-center text-slate-400",children:e.jsx($,{size:18})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-0.5",children:"Location"}),e.jsxs("p",{className:"text-sm font-medium text-slate-700",children:[a.address.street,", ",a.address.city,", ",a.address.state]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-slate-50 flex items-center justify-center text-slate-400",children:e.jsx(Z,{size:18})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-0.5",children:"Contact"}),e.jsx("p",{className:"text-sm font-medium text-slate-700",children:a.contactInfo.phone})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-slate-50 flex items-center justify-center text-slate-400",children:e.jsx(ee,{size:18})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-0.5",children:"Email"}),e.jsx("p",{className:"text-sm font-medium text-slate-700 truncate",children:a.contactInfo.email})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-50",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3",children:"Accreditations"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.certifications.map((t,d)=>e.jsxs("div",{className:"bg-primary/5 text-primary border border-primary/10 text-[10px] font-bold px-3 py-1.5 rounded-lg flex items-center gap-1.5",children:[e.jsx(D,{size:10}),t]},d))})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Business Hours"}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.6)]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs p-2 rounded-lg bg-slate-50",children:[e.jsx("span",{className:"font-semibold text-slate-500",children:"Mon - Fri"}),e.jsxs("span",{className:"text-slate-900 font-bold",children:[a.operatingHours.weekdays.open," - ",a.operatingHours.weekdays.close]})]}),e.jsxs("div",{className:"flex justify-between text-xs p-2 rounded-lg bg-slate-50",children:[e.jsx("span",{className:"font-semibold text-slate-500",children:"Sat - Sun"}),e.jsxs("span",{className:"text-slate-900 font-bold",children:[a.operatingHours.weekends.open," - ",a.operatingHours.weekends.close]})]})]})]}),e.jsxs("div",{className:"pt-6 flex gap-3",children:[e.jsx(l,{variant:"outline",className:"flex-1 rounded-xl h-11 text-xs font-bold",onClick:()=>n(`/lab-owner/edit-lab/${r}`),children:"Settings"}),e.jsx(l,{className:"flex-1 rounded-xl h-11 text-xs font-bold shadow-lg shadow-primary/20",onClick:()=>n(`/lab-owner/lab/${r}/tests`),children:"Manage Tests"})]})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(X,{defaultValue:"appointments",className:"w-full",children:[e.jsxs(Y,{className:"bg-white/50 backdrop-blur p-1 rounded-2xl border border-slate-200 mb-6 h-auto",children:[e.jsx(S,{value:"appointments",className:"rounded-xl py-3 px-6 data-[state=active]:bg-white data-[state=active]:shadow-lg data-[state=active]:shadow-slate-200/50 font-bold text-sm",children:"Appointments"}),e.jsx(S,{value:"tests",className:"rounded-xl py-3 px-6 data-[state=active]:bg-white data-[state=active]:shadow-lg data-[state=active]:shadow-slate-200/50 font-bold text-sm",children:"Test Menu"}),e.jsx(S,{value:"reports",className:"rounded-xl py-3 px-6 data-[state=active]:bg-white data-[state=active]:shadow-lg data-[state=active]:shadow-slate-200/50 font-bold text-sm",children:"Insights"})]}),e.jsx(A,{value:"appointments",className:"mt-0 focus-visible:outline-none focus-visible:ring-0",children:e.jsxs(b,{className:"border-none shadow-2xl shadow-slate-200/50 rounded-[2rem] overflow-hidden bg-white",children:[e.jsxs(j,{className:"px-8 pt-8 pb-4 flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Appointment Ledger"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Real-time view of scheduled patient visits."})]}),e.jsx(l,{variant:"outline",size:"sm",className:"rounded-xl text-primary font-bold px-4",onClick:T,children:"Refresh"})]}),e.jsx(g,{className:"p-0",children:e.jsx("div",{className:"px-4 pb-8",children:e.jsx(se,{labId:r||"",appointments:w,onStatusChange:T,onSearch:()=>{},onFilter:()=>{}})})})]})}),e.jsx(A,{value:"tests",className:"mt-0 focus-visible:outline-none",children:e.jsxs(b,{className:"border-none shadow-2xl shadow-slate-200/50 rounded-[2rem] overflow-hidden bg-white",children:[e.jsx(j,{className:"px-8 pt-8 pb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Available Tests"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Configure your laboratory's service offerings."})]}),e.jsx(l,{className:"rounded-xl font-bold px-6 shadow-lg shadow-primary/20",onClick:()=>n(`/lab-owner/${r}/add-test`),children:"+ New Test"})]})}),e.jsx(g,{className:"p-8",children:c.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map(t=>e.jsxs("div",{className:"p-4 rounded-2xl border border-slate-100 bg-slate-50/50 hover:bg-white hover:shadow-lg hover:shadow-slate-200/50 transition-all group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-900 group-hover:text-primary transition-colors",children:t.name}),e.jsx("p",{className:"text-xs text-slate-500",children:t.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-primary",children:["₹",t.price]}),t.discountPrice&&t.discountPrice<t.price&&e.jsxs("p",{className:"text-[10px] text-green-600 font-bold",children:["Offer: ₹",t.discountPrice]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-[10px] bg-white px-2 py-1 rounded-lg border border-slate-100 font-medium",children:t.sample_type}),e.jsx("span",{className:"text-[10px] bg-white px-2 py-1 rounded-lg border border-slate-100 font-medium",children:t.turnaround_time})]})]},t.id))}):e.jsxs("div",{className:"text-center py-20 bg-slate-50 rounded-[2rem] border-2 border-dashed border-slate-200",children:[e.jsx("div",{className:"w-20 h-20 bg-white rounded-3xl flex items-center justify-center shadow-md mx-auto mb-6 text-slate-300",children:e.jsx(D,{size:40})}),e.jsx("h4",{className:"text-lg font-bold text-slate-900 mb-2",children:"No active tests found"}),e.jsx("p",{className:"text-sm text-slate-500 max-w-xs mx-auto mb-8",children:"Start adding tests to your laboratory menu to allow patients to book appointments."}),e.jsx(l,{variant:"outline",className:"rounded-xl font-bold px-8 bg-white",onClick:()=>n(`/lab-owner/${r}/add-test`),children:"Configure Menu"})]})})]})}),e.jsx(A,{value:"reports",className:"mt-0 focus-visible:outline-none",children:e.jsxs(b,{className:"border-none shadow-2xl shadow-slate-200/50 rounded-[2rem] overflow-hidden bg-white",children:[e.jsxs(j,{className:"px-8 pt-8 pb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Performance Analytics"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Actionable insights into your lab's growth and operations."})]}),e.jsx(g,{className:"p-8 pb-12",children:e.jsxs("div",{className:"relative group overflow-hidden rounded-[2rem] aspect-video bg-slate-900 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1551288049-bbda38a5fbd7?q=80&w=2070&auto=format&fit=crop')] bg-cover bg-center opacity-30 mix-blend-overlay group-hover:scale-110 transition-transform duration-1000"}),e.jsxs("div",{className:"text-center relative z-10 p-10",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-primary/20 text-primary border border-primary/30 px-4 py-2 rounded-full text-xs font-bold uppercase tracking-widest mb-6",children:[e.jsx("span",{className:"w-2 h-2 bg-primary rounded-full animate-ping"}),"Feature Incoming"]}),e.jsx("h4",{className:"text-3xl font-extrabold text-white mb-4",children:"Enterprise Reporting"}),e.jsx("p",{className:"text-slate-300 text-sm max-w-sm mx-auto mb-8",children:"We're currently calibrating advanced data models to provide you with pixel-perfect laboratory insights."}),e.jsx(l,{className:"rounded-xl bg-white text-slate-900 hover:bg-slate-100 font-bold px-8",children:"Get Early Access"})]})]})})]})})]})})]})]})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Lab not found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"The lab you're looking for doesn't exist or you don't have access."}),e.jsx(l,{onClick:()=>n("/lab-dashboard"),children:"Return to Dashboard"})]})})};export{ve as default};
