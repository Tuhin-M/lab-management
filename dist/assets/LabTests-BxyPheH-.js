import{c as Ue,a7 as e,bi as Ne,aO as ye,ah as M,r as d,bj as Ye,af as Ge,bk as Qe,b4 as z,ag as G,b1 as K,bl as We,bm as Xe,ab as Ze,aN as Je,ae as qe,bn as es,aQ as ss,aR as ts,aS as as,aY as rs,bo as fe}from"./index-DGQnzEId.js";import{S as is}from"./SearchBar-AjmrDpRP.js";import{C as Se,a as Ce,c as ns}from"./card-B6dWGu8z.js";import{B as H}from"./badge-mzHaQXoz.js";import{S as ke}from"./star-CBVwIYeS.js";import{A as os}from"./award-DZ25ifJZ.js";import{C as Re}from"./clock-Cwo_8Tkt.js";import{C as ge}from"./checkbox-oF1nHLaV.js";import{c as De}from"./index-BdQq_4o_.js";import{u as ls}from"./index-CipDl9u1.js";import{f as cs}from"./filterUnsupportedProps-Bb-ms138.js";import{R as ds,a as ms}from"./radio-group-L3fHJYWU.js";import{R as xs,C as us,a as hs}from"./index-CZDBci-J.js";import{F as Pe}from"./filter-B1nUFzXx.js";import{C as Z}from"./select-DuyiteEc.js";import{C as J}from"./chevron-down-BxHl7DOL.js";import{C as ps}from"./CitySelection-CAjn1eul.js";import{R as be}from"./RecommendedFilters-DhMcbmrm.js";import{m as A}from"./motion-bVXQQQD1.js";import{S as je}from"./sparkles-VHr_ncJG.js";import{A as re}from"./index-DYj1Spqv.js";import{A as fs}from"./arrow-left-BfpFyjlb.js";import{C as gs}from"./circle-alert-02Q1hjzx.js";import{L as bs}from"./loader-circle-BkLgqahh.js";import"./input-CIeWkrV3.js";import"./popover-lFmkDFEp.js";import"./search-DLOdkgEU.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=Ue("BadgeIndianRupee",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M8 8h8",key:"1bis0t"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m13 17-5-1h1a4 4 0 0 0 0-8",key:"nu2bwa"}]]),js=({test:s,isSelected:t,onSelect:r})=>{const a=s&&typeof s.price=="number"&&typeof s.discount=="number",l=a?s.price-s.price*s.discount/100:void 0;return e.jsx(Se,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${t?"border-primary border-2":"border"}`,onClick:()=>r(s),children:e.jsxs(Ce,{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.name}),s.isPopular&&e.jsx(H,{variant:"outline",className:"bg-primary/10 text-primary border-primary/20",children:"Popular"})]}),e.jsx("p",{className:"text-muted-foreground text-sm",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs bg-secondary px-2 py-1 rounded-full mt-1 inline-block",children:s.category}),typeof s.price=="number"&&e.jsxs("div",{className:"text-right",children:[a&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs line-through text-muted-foreground",children:["₹",s.price]}),e.jsxs("span",{className:"text-xs bg-primary/10 text-primary px-1 rounded",children:[s.discount,"% off"]})]}),e.jsxs("p",{className:"font-bold text-base",children:["₹",l||s.price]})]})]})]}),t&&e.jsx("div",{className:"flex-shrink-0 bg-primary rounded-full p-1 ml-3",children:e.jsx(Ne,{className:"h-4 w-4 text-white"})})]})})},vs=({lab:s,onSelect:t})=>{const r=s.discount?Math.round(s.price-s.price*s.discount/100):s.price;return e.jsxs(Se,{className:"h-full overflow-hidden transition-all duration-500 hover:shadow-2xl hover:-translate-y-1 border border-border/40 bg-white/90 dark:bg-card/90 backdrop-blur-md group shadow-sm",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110",style:{backgroundImage:`url(${s.imageUrl||"/placeholder.svg"})`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/70 to-transparent opacity-95"}),e.jsx("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:e.jsxs("div",{className:"flex items-center bg-white/10 backdrop-blur-md px-3 py-1 rounded-full text-white border border-white/20 shadow-lg",children:[e.jsx(ke,{className:"h-3.5 w-3.5 text-yellow-500 fill-yellow-500 mr-1.5"}),e.jsx("span",{className:"text-sm font-bold",children:s.rating.toFixed(1)}),e.jsxs("span",{className:"text-xs text-white/70 ml-1",children:["(",s.reviewCount,")"]})]})}),e.jsxs("div",{className:"absolute bottom-3 left-3 right-3 text-white",children:[e.jsx(ns,{className:"text-xl font-bold mb-1 leading-tight",children:s.name}),s.accreditation&&e.jsxs("div",{className:"flex items-center text-white/80 text-xs",children:[e.jsx(os,{className:"h-3.5 w-3.5 mr-1.5 text-primary"}),e.jsx("span",{children:s.accreditation})]})]})]}),e.jsx(Ce,{className:"p-5",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(ye,{className:"h-4 w-4 text-primary mt-0.5 mr-2.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.address}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[s.distance.toFixed(1)," km away"]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Re,{className:"h-4 w-4 text-primary mr-2.5 flex-shrink-0"}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${s.openNow?"bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)]":"bg-red-500"}`}),e.jsx("span",{className:"font-medium",children:s.openNow?"Open Now":"Closed"}),e.jsx("span",{className:"mx-2 text-muted-foreground",children:"•"}),e.jsxs("span",{className:"text-muted-foreground",children:[s.waitTime," wait"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 pt-1",children:[s.facilities.slice(0,3).map((a,l)=>e.jsx("span",{className:"text-[10px] font-medium bg-primary/5 text-primary px-2.5 py-1 rounded-full border border-primary/10",children:a},l)),s.facilities.length>3&&e.jsxs("span",{className:"text-[10px] font-medium bg-secondary text-secondary-foreground px-2.5 py-1 rounded-full",children:["+",s.facilities.length-3]})]})]})}),e.jsx("div",{className:"px-5 pb-5 mt-auto",children:e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wider mb-0.5",children:"Test Fee"}),s.discount?e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("span",{className:"font-bold text-xl text-primary",children:["₹",r]}),e.jsxs("span",{className:"text-xs line-through text-muted-foreground decoration-red-500/50",children:["₹",s.price]})]}):e.jsxs("span",{className:"font-bold text-xl",children:["₹",s.price]})]}),e.jsxs(M,{onClick:()=>t(s),className:"rounded-full px-6 shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all",children:["Select Lab",e.jsx(Ne,{className:"ml-2 h-4 w-4"})]})]})})]})};var Le=["PageUp","PageDown"],Ae=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Fe={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},$="Slider",[ie,ws,Ns]=Qe($),[_e,ut]=Ge($,[Ns]),[ys,te]=_e($),Ee=d.forwardRef((s,t)=>{const{name:r,min:a=0,max:l=100,step:p=1,orientation:c="horizontal",disabled:m=!1,minStepsBetweenThumbs:o=0,defaultValue:b=[a],value:v,onValueChange:x=()=>{},onValueCommit:h=()=>{},inverted:S=!1,form:R,...w}=s,u=d.useRef(new Set),f=d.useRef(0),j=c==="horizontal"?Ss:Cs,[i=[],k]=Ye({prop:v,defaultProp:b,onChange:C=>{var T;(T=[...u.current][f.current])==null||T.focus(),x(C)}}),F=d.useRef(i);function V(C){const E=Ls(i,C);O(C,E)}function _(C){O(C,f.current)}function Q(){const C=F.current[f.current];i[f.current]!==C&&h(i)}function O(C,E,{commit:T}={commit:!1}){const W=Es(p),U=Ts(Math.round((C-a)/p)*p+a,W),I=De(U,[a,l]);k((B=[])=>{const L=Ds(B,I,E);if(_s(L,o*p)){f.current=L.indexOf(I);const X=String(L)!==String(B);return X&&T&&h(L),X?L:B}else return B})}return e.jsx(ys,{scope:s.__scopeSlider,name:r,disabled:m,min:a,max:l,valueIndexToChangeRef:f,thumbs:u.current,values:i,orientation:c,form:R,children:e.jsx(ie.Provider,{scope:s.__scopeSlider,children:e.jsx(ie.Slot,{scope:s.__scopeSlider,children:e.jsx(j,{"aria-disabled":m,"data-disabled":m?"":void 0,...w,ref:t,onPointerDown:z(w.onPointerDown,()=>{m||(F.current=i)}),min:a,max:l,inverted:S,onSlideStart:m?void 0:V,onSlideMove:m?void 0:_,onSlideEnd:m?void 0:Q,onHomeKeyDown:()=>!m&&O(a,0,{commit:!0}),onEndKeyDown:()=>!m&&O(l,i.length-1,{commit:!0}),onStepKeyDown:({event:C,direction:E})=>{if(!m){const U=Le.includes(C.key)||C.shiftKey&&Ae.includes(C.key)?10:1,I=f.current,B=i[I],L=p*U*E;O(B+L,I,{commit:!0})}}})})})})});Ee.displayName=$;var[Te,Be]=_e($,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Ss=d.forwardRef((s,t)=>{const{min:r,max:a,dir:l,inverted:p,onSlideStart:c,onSlideMove:m,onSlideEnd:o,onStepKeyDown:b,...v}=s,[x,h]=d.useState(null),S=K(t,j=>h(j)),R=d.useRef(void 0),w=We(l),u=w==="ltr",f=u&&!p||!u&&p;function N(j){const i=R.current||x.getBoundingClientRect(),k=[0,i.width],V=ce(k,f?[r,a]:[a,r]);return R.current=i,V(j-i.left)}return e.jsx(Te,{scope:s.__scopeSlider,startEdge:f?"left":"right",endEdge:f?"right":"left",direction:f?1:-1,size:"width",children:e.jsx(Ie,{dir:w,"data-orientation":"horizontal",...v,ref:S,style:{...v.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:j=>{const i=N(j.clientX);c==null||c(i)},onSlideMove:j=>{const i=N(j.clientX);m==null||m(i)},onSlideEnd:()=>{R.current=void 0,o==null||o()},onStepKeyDown:j=>{const k=Fe[f?"from-left":"from-right"].includes(j.key);b==null||b({event:j,direction:k?-1:1})}})})}),Cs=d.forwardRef((s,t)=>{const{min:r,max:a,inverted:l,onSlideStart:p,onSlideMove:c,onSlideEnd:m,onStepKeyDown:o,...b}=s,v=d.useRef(null),x=K(t,v),h=d.useRef(void 0),S=!l;function R(w){const u=h.current||v.current.getBoundingClientRect(),f=[0,u.height],j=ce(f,S?[a,r]:[r,a]);return h.current=u,j(w-u.top)}return e.jsx(Te,{scope:s.__scopeSlider,startEdge:S?"bottom":"top",endEdge:S?"top":"bottom",size:"height",direction:S?1:-1,children:e.jsx(Ie,{"data-orientation":"vertical",...b,ref:x,style:{...b.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const u=R(w.clientY);p==null||p(u)},onSlideMove:w=>{const u=R(w.clientY);c==null||c(u)},onSlideEnd:()=>{h.current=void 0,m==null||m()},onStepKeyDown:w=>{const f=Fe[S?"from-bottom":"from-top"].includes(w.key);o==null||o({event:w,direction:f?-1:1})}})})}),Ie=d.forwardRef((s,t)=>{const{__scopeSlider:r,onSlideStart:a,onSlideMove:l,onSlideEnd:p,onHomeKeyDown:c,onEndKeyDown:m,onStepKeyDown:o,...b}=s,v=te($,r);return e.jsx(G.span,{...b,ref:t,onKeyDown:z(s.onKeyDown,x=>{x.key==="Home"?(c(x),x.preventDefault()):x.key==="End"?(m(x),x.preventDefault()):Le.concat(Ae).includes(x.key)&&(o(x),x.preventDefault())}),onPointerDown:z(s.onPointerDown,x=>{const h=x.target;h.setPointerCapture(x.pointerId),x.preventDefault(),v.thumbs.has(h)?h.focus():a(x)}),onPointerMove:z(s.onPointerMove,x=>{x.target.hasPointerCapture(x.pointerId)&&l(x)}),onPointerUp:z(s.onPointerUp,x=>{const h=x.target;h.hasPointerCapture(x.pointerId)&&(h.releasePointerCapture(x.pointerId),p(x))})})}),Me="SliderTrack",Oe=d.forwardRef((s,t)=>{const{__scopeSlider:r,...a}=s,l=te(Me,r);return e.jsx(G.span,{"data-disabled":l.disabled?"":void 0,"data-orientation":l.orientation,...a,ref:t})});Oe.displayName=Me;var ne="SliderRange",Ve=d.forwardRef((s,t)=>{const{__scopeSlider:r,...a}=s,l=te(ne,r),p=Be(ne,r),c=d.useRef(null),m=K(t,c),o=l.values.length,b=l.values.map(h=>Ke(h,l.min,l.max)),v=o>1?Math.min(...b):0,x=100-Math.max(...b);return e.jsx(G.span,{"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,...a,ref:m,style:{...s.style,[p.startEdge]:v+"%",[p.endEdge]:x+"%"}})});Ve.displayName=ne;var oe="SliderThumb",ze=d.forwardRef((s,t)=>{const r=ws(s.__scopeSlider),[a,l]=d.useState(null),p=K(t,m=>l(m)),c=d.useMemo(()=>a?r().findIndex(m=>m.ref.current===a):-1,[r,a]);return e.jsx(ks,{...s,ref:p,index:c})}),ks=d.forwardRef((s,t)=>{const{__scopeSlider:r,index:a,name:l,...p}=s,c=te(oe,r),m=Be(oe,r),[o,b]=d.useState(null),v=K(t,N=>b(N)),x=o?c.form||!!o.closest("form"):!0,h=Xe(o),S=c.values[a],R=S===void 0?0:Ke(S,c.min,c.max),w=Ps(a,c.values.length),u=h==null?void 0:h[m.size],f=u?As(u,R,m.direction):0;return d.useEffect(()=>{if(o)return c.thumbs.add(o),()=>{c.thumbs.delete(o)}},[o,c.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[m.startEdge]:`calc(${R}% + ${f}px)`},children:[e.jsx(ie.ItemSlot,{scope:s.__scopeSlider,children:e.jsx(G.span,{role:"slider","aria-label":s["aria-label"]||w,"aria-valuemin":c.min,"aria-valuenow":S,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...p,ref:v,style:S===void 0?{display:"none"}:s.style,onFocus:z(s.onFocus,()=>{c.valueIndexToChangeRef.current=a})})}),x&&e.jsx(He,{name:l??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:S},a)]})});ze.displayName=oe;var Rs="RadioBubbleInput",He=d.forwardRef(({__scopeSlider:s,value:t,...r},a)=>{const l=d.useRef(null),p=K(l,a),c=ls(t);return d.useEffect(()=>{const m=l.current;if(!m)return;const o=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(o,"value").set;if(c!==t&&v){const x=new Event("input",{bubbles:!0});v.call(m,t),m.dispatchEvent(x)}},[c,t]),e.jsx(G.input,{style:{display:"none"},...r,ref:p,defaultValue:t})});He.displayName=Rs;function Ds(s=[],t,r){const a=[...s];return a[r]=t,a.sort((l,p)=>l-p)}function Ke(s,t,r){const p=100/(r-t)*(s-t);return De(p,[0,100])}function Ps(s,t){return t>2?`Value ${s+1} of ${t}`:t===2?["Minimum","Maximum"][s]:void 0}function Ls(s,t){if(s.length===1)return 0;const r=s.map(l=>Math.abs(l-t)),a=Math.min(...r);return r.indexOf(a)}function As(s,t,r){const a=s/2,p=ce([0,50],[0,a]);return(a-p(t)*r)*r}function Fs(s){return s.slice(0,-1).map((t,r)=>s[r+1]-t)}function _s(s,t){if(t>0){const r=Fs(s);return Math.min(...r)>=t}return!0}function ce(s,t){return r=>{if(s[0]===s[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(s[1]-s[0]);return t[0]+a*(r-s[0])}}function Es(s){return(String(s).split(".")[1]||"").length}function Ts(s,t){const r=Math.pow(10,t);return Math.round(s*r)/r}var $e=Ee,Bs=Oe,Is=Ve,Ms=ze;const le=d.forwardRef(({className:s,...t},r)=>e.jsxs($e,{ref:r,className:Ze("relative flex w-full touch-none select-none items-center",s),...cs(t),children:[e.jsx(Bs,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(Is,{className:"absolute h-full bg-primary"})}),e.jsx(Ms,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));le.displayName=$e.displayName;const q=xs,ee=us,se=hs,Os={rating:0,maxDistance:10,openNow:!1,facilities:{"Home Collection":!1,"Digital Reports":!1,"NABL Accredited":!1,"Open 24x7":!1,"Free Home Delivery":!1,"Insurance Accepted":!1}},we=({onSortChange:s,onFilterChange:t,initialFilters:r,initialSortOption:a="relevance",isMobile:l=!1,onClose:p,onReset:c,isExternalFilterActive:m=!1})=>{const[o,b]=d.useState(r||Os),[v,x]=d.useState(a),[h,S]=d.useState({sort:!0,rating:!0,distance:!0,facilities:!0});d.useEffect(()=>{r&&b(r)},[r]),d.useEffect(()=>{x(a)},[a]);const R=i=>{x(i),s(i)},w=i=>{const k={...o,...i};b(k),t(k)},u=(i,k)=>{w({facilities:{...o.facilities,[i]:k}})},f=i=>{S({...h,[i]:!h[i]})},N=(o.rating>0?1:0)+(o.maxDistance<10?1:0)+(o.openNow?1:0)+Object.values(o.facilities).filter(Boolean).length,j=N>0||m;return e.jsxs("div",{className:`${l?"w-full p-6 bg-background":"w-full max-w-xs sticky top-32"}`,children:[!l&&e.jsxs("div",{className:"flex items-center justify-between mb-6 px-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-primary/10 p-2.5 rounded-xl text-primary",children:e.jsx(Pe,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg leading-none",children:"Filters"}),N>0&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[N," active"]})]})]}),j&&e.jsx(M,{variant:"ghost",size:"sm",className:"h-8 px-2 text-xs hover:bg-destructive/10 hover:text-destructive transition-colors rounded-lg",onClick:()=>{const i={rating:0,maxDistance:10,openNow:!1,facilities:Object.keys(o.facilities).reduce((k,F)=>({...k,[F]:!1}),{})};b(i),x("relevance"),t(i),s("relevance"),c==null||c()},children:"Clear all"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{className:"bg-card/40 backdrop-blur-sm rounded-2xl border border-white/10 shadow-sm overflow-hidden group hover:bg-card/60 transition-colors",children:e.jsxs(q,{open:h.sort,className:"",children:[e.jsx(ee,{asChild:!0,onClick:()=>f("sort"),children:e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer",children:[e.jsx("span",{className:"font-semibold text-sm",children:"Sort By"}),h.sort?e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(J,{className:"h-4 w-4 text-muted-foreground"})]})}),e.jsx(se,{className:"px-4 pb-4",children:e.jsx(ds,{value:v,onValueChange:R,className:"space-y-3",children:[{id:"relevance",label:"Relevance",icon:null},{id:"rating",label:"Rating",icon:e.jsx(ke,{className:"h-3.5 w-3.5 ml-1.5 text-yellow-500 fill-yellow-500"})},{id:"distance",label:"Distance",icon:e.jsx(ye,{className:"h-3.5 w-3.5 ml-1.5 text-blue-500"})},{id:"price-low",label:"Price: Low to High",icon:e.jsx(ve,{className:"h-3.5 w-3.5 ml-1.5 text-green-600"})},{id:"price-high",label:"Price: High to Low",icon:e.jsx(ve,{className:"h-3.5 w-3.5 ml-1.5 text-green-600"})},{id:"wait-time",label:"Wait Time",icon:e.jsx(Re,{className:"h-3.5 w-3.5 ml-1.5 text-orange-500"})}].map(i=>e.jsxs("div",{className:"flex items-center justify-between group/item cursor-pointer p-2 rounded-lg hover:bg-primary/5 transition-colors",children:[e.jsxs("label",{htmlFor:i.id,className:"text-sm cursor-pointer flex items-center flex-1 text-muted-foreground group-hover/item:text-foreground",children:[i.label," ",i.icon]}),e.jsx(ms,{value:i.id,id:i.id,className:"scale-90 border-muted-foreground/30 data-[state=checked]:border-primary"})]},i.id))})})]})}),e.jsx("div",{className:"bg-card/40 backdrop-blur-sm rounded-2xl border border-white/10 shadow-sm overflow-hidden group hover:bg-card/60 transition-colors",children:e.jsxs(q,{open:h.rating,className:"",children:[e.jsx(ee,{asChild:!0,onClick:()=>f("rating"),children:e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold text-sm",children:"Minimum Rating"}),o.rating>0&&e.jsxs(H,{variant:"secondary",className:"ml-2 h-5 px-1.5 text-[10px] bg-yellow-500/10 text-yellow-600 border-yellow-200",children:[o.rating,"+"]})]}),h.rating?e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(J,{className:"h-4 w-4 text-muted-foreground"})]})}),e.jsx(se,{className:"px-4 pb-4",children:e.jsxs("div",{className:"space-y-6 pt-2",children:[e.jsx(le,{value:[o.rating],min:0,max:5,step:.5,onValueChange:i=>w({rating:i[0]}),className:"py-2"}),e.jsxs("div",{className:"flex justify-between items-center text-muted-foreground",children:[e.jsx("span",{className:"text-xs font-medium",children:"Any"}),e.jsxs("span",{className:"text-sm font-bold text-foreground bg-secondary px-2 py-0.5 rounded-md",children:[o.rating," Stars"]}),e.jsx("span",{className:"text-xs font-medium",children:"5.0"})]})]})})]})}),e.jsx("div",{className:"bg-card/40 backdrop-blur-sm rounded-2xl border border-white/10 shadow-sm overflow-hidden group hover:bg-card/60 transition-colors",children:e.jsxs(q,{open:h.distance,className:"",children:[e.jsx(ee,{asChild:!0,onClick:()=>f("distance"),children:e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold text-sm",children:"Distance"}),o.maxDistance<10&&e.jsxs(H,{variant:"secondary",className:"ml-2 h-5 px-1.5 text-[10px] bg-blue-500/10 text-blue-600 border-blue-200",children:[o.maxDistance," km"]})]}),h.distance?e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(J,{className:"h-4 w-4 text-muted-foreground"})]})}),e.jsx(se,{className:"px-4 pb-4",children:e.jsxs("div",{className:"space-y-6 pt-2",children:[e.jsx(le,{value:[o.maxDistance],min:1,max:10,step:1,onValueChange:i=>w({maxDistance:i[0]}),className:"py-2"}),e.jsxs("div",{className:"flex justify-between items-center text-muted-foreground",children:[e.jsx("span",{className:"text-xs font-medium",children:"1 km"}),e.jsxs("span",{className:"text-sm font-bold text-foreground bg-secondary px-2 py-0.5 rounded-md",children:[o.maxDistance," km"]}),e.jsx("span",{className:"text-xs font-medium",children:"10 km"})]}),e.jsx("div",{className:"pt-4 border-t border-border/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-2 hover:bg-muted/50 rounded-lg transition-colors cursor-pointer",children:[e.jsx(ge,{id:"open-now",checked:o.openNow,onCheckedChange:i=>w({openNow:i})}),e.jsxs("label",{htmlFor:"open-now",className:"text-sm font-medium leading-none cursor-pointer flex items-center flex-1",children:["Open Now ",e.jsx("span",{className:"ml-auto inline-block h-2 w-2 rounded-full bg-green-500 shadow-[0_0_6px_rgba(34,197,94,0.6)]"})]})]})})]})})]})}),e.jsx("div",{className:"bg-card/40 backdrop-blur-sm rounded-2xl border border-white/10 shadow-sm overflow-hidden group hover:bg-card/60 transition-colors",children:e.jsxs(q,{open:h.facilities,className:"",children:[e.jsx(ee,{asChild:!0,onClick:()=>f("facilities"),children:e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold text-sm",children:"Facilities"}),Object.values(o.facilities).filter(Boolean).length>0&&e.jsx(H,{variant:"secondary",className:"ml-2 h-5 px-1.5 text-[10px] bg-purple-500/10 text-purple-600 border-purple-200",children:Object.values(o.facilities).filter(Boolean).length})]}),h.facilities?e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(J,{className:"h-4 w-4 text-muted-foreground"})]})}),e.jsx(se,{className:"px-4 pb-4",children:e.jsx("div",{className:"space-y-1 pt-1",children:Object.keys(o.facilities).map(i=>e.jsxs("div",{className:"flex items-center space-x-3 group/item p-2 hover:bg-muted/50 rounded-lg transition-colors cursor-pointer",children:[e.jsx(ge,{id:i,checked:o.facilities[i],onCheckedChange:k=>u(i,k),className:"data-[state=checked]:bg-primary"}),e.jsx("label",{htmlFor:i,className:"text-sm leading-none cursor-pointer flex-1 text-muted-foreground group-hover/item:text-foreground transition-colors",children:i})]},i))})})]})})]})]})},ht=()=>{const{toast:s}=Je(),t=qe(),[r]=es(),a=r.get("search")||"",[l,p]=d.useState("Bengaluru"),[c,m]=d.useState(a),[o,b]=d.useState([]),[v,x]=d.useState([]),[h,S]=d.useState([]),[R,w]=d.useState(!0),[u,f]=d.useState(null),[N,j]=d.useState(null),[i,k]=d.useState([]),[F,V]=d.useState("relevance"),[_,Q]=d.useState({rating:0,maxDistance:10,openNow:!1,facilities:{"Home Collection":!1,"Digital Reports":!1,"NABL Accredited":!1,"Open 24x7":!1,"Free Home Delivery":!1,"Insurance Accepted":!1}}),[O,C]=d.useState(!1);d.useEffect(()=>{(async()=>{try{w(!0);const g=(await fe.getAllTests()).map(y=>{var Y;return{id:y.id,name:y.name,description:y.description,category:((Y=y.category)==null?void 0:Y.name)||"General",price:y.price,isPopular:y.popularity>80}});x(g);const ae=(await fe.getAllLabs({city:l})).map(y=>{var Y,ue,he,pe;return{id:y.id,name:y.name,address:y.address?`${y.address.street}, ${y.address.city}`:"Address not available",distance:Math.random()*5,rating:y.rating||0,reviewCount:((Y=y.reviews)==null?void 0:Y.length)||0,price:((he=(ue=y.tests)==null?void 0:ue[0])==null?void 0:he.price)||0,waitTime:"15-20 min",openNow:!0,facilities:y.certifications||[],imageUrl:y.image_url||"/placeholder.svg",accreditation:(pe=y.certifications)==null?void 0:pe[0]}});S(ae)}catch(P){console.error("Error fetching data:",P),s({title:"Error",description:"Failed to load tests and labs. Please try again later.",variant:"destructive"})}finally{w(!1)}})()},[l,s]);const E=n=>{p(n==="All Locations"?"":n),m(""),b([]),f(null),j(null),s({title:"City Updated",description:`Your location has been set to ${n}`})};d.useEffect(()=>{if(a&&v.length>0){const n=v.filter(P=>P.name.toLowerCase().includes(a.toLowerCase())||P.description.toLowerCase().includes(a.toLowerCase())||P.category.toLowerCase().includes(a.toLowerCase()));b(n)}},[v,a]);const T=n=>{m(n),f(null),j(null);const P=v.filter(g=>g.name.toLowerCase().includes(n.toLowerCase())||g.description.toLowerCase().includes(n.toLowerCase())||g.category.toLowerCase().includes(n.toLowerCase()));b(P),P.length===0&&n!==""&&s({title:"No tests found",description:"Try a different search term",variant:"destructive"})},W=n=>{f(n),j(null)},U=n=>{j(n)},I=n=>{V(n)},B=n=>{Q(n)},L=()=>{p(""),m(""),f(null),j(null),s({title:"Filters Reset",description:"Showing all labs across all locations"})};d.useEffect(()=>{if(!u)return;let n=[...h];_.openNow&&(n=n.filter(g=>g.openNow)),n=n.filter(g=>g.rating>=_.rating),n=n.filter(g=>g.distance<=_.maxDistance);const P=Object.entries(_.facilities).filter(([g,D])=>D).map(([g])=>g);switch(P.length>0&&(n=n.filter(g=>P.every(D=>g.facilities.includes(D)))),F){case"rating":n.sort((g,D)=>D.rating-g.rating);break;case"distance":n.sort((g,D)=>g.distance-D.distance);break;case"price-low":n.sort((g,D)=>g.price-D.price);break;case"price-high":n.sort((g,D)=>D.price-g.price);break;case"wait-time":n.sort((g,D)=>{const ae=parseInt(g.waitTime.split("-")[0]),y=parseInt(D.waitTime.split("-")[0]);return ae-y});break}k(n)},[u,_,F,h]);const X=n=>{t(`/lab/${n.id}`,{state:{lab:n}})},de=n=>{m(n),T(n)},me={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},xe={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return e.jsxs("div",{className:"min-h-screen bg-slate-50/50 flex flex-col pt-16 relative selection:bg-primary/20",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-primary/10 rounded-full blur-[120px] opacity-60"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[600px] h-[600px] bg-blue-500/10 rounded-full blur-[120px] opacity-60"})]}),e.jsxs("div",{className:"relative bg-black text-white pb-24 pt-16 overflow-hidden z-10",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 via-black to-purple-900/20"}),e.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1579154204601-01588f351e67?auto=format&fit=crop&q=80&w=2000')] bg-cover bg-center opacity-10"}),e.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[!u&&e.jsxs(A.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center space-y-6 max-w-4xl mx-auto",children:[e.jsxs(H,{variant:"outline",className:"text-primary border-primary/50 bg-primary/10 backdrop-blur-md mb-2 px-4 py-1.5 text-sm rounded-full",children:[e.jsx(je,{className:"h-3.5 w-3.5 mr-2"}),"Trusted by 500+ Labs"]}),e.jsxs("h1",{className:"text-4xl md:text-7xl font-bold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-white/70",children:["Find the Right Lab for Your"," ",e.jsx("span",{className:"text-primary italic",children:"Diagnostics"})]}),e.jsx("p",{className:"text-lg md:text-xl text-gray-400 max-w-2xl mx-auto leading-relaxed",children:"Compare prices, check reviews, and book appointments with NABL-accredited labs near you."})]}),e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:`mt-10 ${u?"max-w-7xl":"max-w-3xl"} mx-auto transition-all duration-500`,children:e.jsxs("div",{className:`
              backdrop-blur-2xl border p-2 rounded-3xl shadow-2xl flex flex-col md:flex-row gap-2 items-center transition-all duration-300
              ${u?"bg-white/90 border-white/20 shadow-primary/5":"bg-white/10 border-white/20"}
            `,children:[e.jsx("div",{className:`w-full md:w-auto min-w-[220px] border-b md:border-b-0 md:border-r md:pr-2 transition-colors ${u?"border-gray-200":"border-white/10"}`,children:e.jsx(ps,{selectedCity:l||"All Locations",onCityChange:E,className:u?"text-foreground":"text-white placeholder:text-white/70"})}),e.jsx("div",{className:"flex-1 w-full relative z-20",children:e.jsx(is,{onSearch:T,placeholder:"Search for blood tests (e.g. CBC, Lipid Profile)",context:"lab",animated:!1,className:u?"text-foreground":""})})]})})]})]}),e.jsxs("main",{className:"flex-grow container mx-auto -mt-16 relative z-20 px-4 pb-20",children:[e.jsx(re,{children:!u&&e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,height:0},transition:{delay:.4},className:"mb-8",children:e.jsx("div",{className:"bg-card/50 backdrop-blur-md border rounded-2xl p-6 shadow-lg",children:e.jsx(be,{onFilterSelect:de})})})}),e.jsxs(re,{mode:"wait",children:[o.length>0&&!u&&e.jsxs(A.div,{initial:"hidden",animate:"show",exit:"hidden",variants:me,className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5 text-primary"}),"Test Results ",e.jsxs("span",{className:"text-muted-foreground text-sm font-normal",children:["(",o.length," found)"]})]})}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:o.map(n=>e.jsx(A.div,{variants:xe,children:e.jsx(js,{test:n,isSelected:(u==null?void 0:u.id)===n.id,onSelect:W})},n.id))})]},"results"),u&&e.jsxs(A.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-3xl p-6 border shadow-sm relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs(M,{variant:"ghost",size:"sm",className:"mb-2 pl-0 hover:pl-2 transition-all text-muted-foreground hover:text-primary",onClick:()=>{f(null),b(v.filter(n=>n.name.toLowerCase().includes(c.toLowerCase())))},children:[e.jsx(fs,{className:"h-4 w-4 mr-1"}),"Back to results"]}),e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["Labs offering ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary to-blue-600",children:u.name})]}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"Compare prices, ratings, and facilities to choose the best lab for you"})]}),e.jsx("div",{className:"md:hidden",children:e.jsxs(ss,{open:O,onOpenChange:C,children:[e.jsx(ts,{asChild:!0,children:e.jsxs(M,{variant:"outline",className:"w-full",children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Filters & Sort"]})}),e.jsx(as,{side:"left",className:"w-full sm:max-w-md p-0",children:e.jsx("div",{className:"overflow-y-auto h-full",children:e.jsx(we,{onSortChange:I,onFilterChange:B,initialFilters:_,initialSortOption:F,isMobile:!0,onClose:()=>C(!1),onReset:L,isExternalFilterActive:!!l})})})]})})]}),e.jsx(be,{onFilterSelect:de,recommendedFilters:["NABL Accredited","Home Collection","Digital Reports","Open 24x7","Insurance Accepted"],title:"Quick Filters:",className:"mb-0"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("div",{className:"hidden md:block md:w-1/4 lg:w-1/5 space-y-6",children:e.jsx("div",{className:"sticky top-24",children:e.jsx(we,{onSortChange:I,onFilterChange:B,initialFilters:_,initialSortOption:F,onReset:L,isExternalFilterActive:!!l})})}),e.jsx("div",{className:"flex-1",children:i.length>0?e.jsx(A.div,{variants:me,initial:"hidden",animate:"show",className:"grid gap-6 md:grid-cols-1 lg:grid-cols-2",children:i.map(n=>e.jsx(A.div,{variants:xe,children:e.jsx(vs,{lab:n,onSelect:U})},n.id))}):e.jsxs(A.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-20 bg-card border border-dashed rounded-3xl",children:[e.jsx("div",{className:"bg-muted/50 h-20 w-20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(gs,{className:"h-10 w-10 text-muted-foreground"})}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"No labs found"}),e.jsx("p",{className:"text-muted-foreground max-w-sm mx-auto mb-6",children:"We couldn't find any labs matching your current filters. Try adjusting them or searching for a different area."}),e.jsx(M,{variant:"outline",onClick:()=>{Q({rating:0,maxDistance:10,openNow:!1,facilities:{"Home Collection":!1,"Digital Reports":!1,"NABL Accredited":!1,"Open 24x7":!1,"Free Home Delivery":!1,"Insurance Accepted":!1}}),V("relevance"),L()},children:"Reset All Filters"})]})})]})]},"labs")]}),e.jsx(re,{children:N&&e.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>j(null),children:e.jsxs(A.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},onClick:n=>n.stopPropagation(),className:"bg-card max-w-md w-full rounded-3xl shadow-2xl overflow-hidden border ring-1 ring-white/10",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-48 bg-cover bg-center w-full",style:{backgroundImage:`url(${N.imageUrl||"/placeholder.svg"})`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),e.jsx(M,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 bg-black/20 backdrop-blur-md text-white hover:bg-black/40 rounded-full",onClick:()=>j(null),children:e.jsx(rs,{className:"h-4 w-4"})}),e.jsxs("div",{className:"absolute bottom-4 left-6 right-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-0.5",children:N.name}),e.jsx("p",{className:"text-white/80 text-sm truncate",children:N.address})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-xl",children:[e.jsx("span",{className:"text-muted-foreground text-sm font-medium",children:"Selected Test"}),e.jsx("span",{className:"font-bold text-primary",children:u==null?void 0:u.name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Price"}),e.jsx("div",{className:"text-right",children:N.discount?e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("span",{className:"font-bold text-2xl",children:["₹",Math.round(N.price-N.price*N.discount/100)]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("span",{className:"line-through text-muted-foreground",children:["₹",N.price]}),e.jsxs(H,{variant:"secondary",className:"bg-green-500/10 text-green-600 border-0 h-5 px-1.5",children:[N.discount,"% OFF"]})]})]}):e.jsxs("span",{className:"font-bold text-2xl",children:["₹",N.price]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 border rounded-xl bg-card",children:[e.jsx("span",{className:"text-xs text-muted-foreground block mb-1",children:"Wait Time"}),e.jsx("span",{className:"font-semibold",children:N.waitTime})]}),e.jsxs("div",{className:"p-3 border rounded-xl bg-card",children:[e.jsx("span",{className:"text-xs text-muted-foreground block mb-1",children:"Status"}),e.jsxs("span",{className:"font-semibold text-green-600 flex items-center gap-1.5",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-green-500 animate-pulse"}),"Open Now"]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(M,{variant:"outline",className:"flex-1 h-12 rounded-xl border-2",onClick:()=>j(null),children:"Cancel"}),e.jsx(M,{className:"flex-1 h-12 rounded-xl font-bold text-base shadow-lg shadow-primary/20",onClick:()=>X(N),children:"View Details"})]})]})]})})}),R&&e.jsx("div",{className:"fixed inset-0 bg-background/50 backdrop-blur-sm flex items-center justify-center z-[60]",children:e.jsxs("div",{className:"bg-card p-6 rounded-2xl shadow-xl border flex flex-col items-center gap-4",children:[e.jsx(bs,{className:"h-10 w-10 text-primary animate-spin"}),e.jsx("p",{className:"font-medium",children:"Finding best labs..."})]})})]})]})};export{ht as default};
