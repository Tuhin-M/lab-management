import{c as Ke,s as e,B as we,Z as Ne,O as I,r as c,ae as Ue,y as Ye,af as We,ag as z,z as G,ah as H,ai as Ge,aj as Qe,v as Xe,W as Ze,x as Je,ak as qe,$ as es,a0 as ss,a1 as ts,a9 as as,al as he}from"./index-TcMYSotV.js";import{S as rs}from"./SearchBar-D7_8SuMF.js";import{C as ye,a as Se,d as is}from"./card-P2OsDbbh.js";import{B as $}from"./badge-D56tjCZ2.js";import{S as Ce}from"./star-BhQ2SRjD.js";import{A as ns}from"./award-Bfcw5UX6.js";import{C as ke}from"./clock-DnR0Hdhq.js";import{C as fe}from"./checkbox-xrqeEPp5.js";import{c as Re}from"./index-BdQq_4o_.js";import{u as os}from"./index-CWdTz_rd.js";import{f as ls}from"./filterUnsupportedProps-Bb-ms138.js";import{R as cs,a as ds}from"./radio-group-s9ZLyoqn.js";import{R as ms,C as xs,a as us}from"./index-CywvtHU4.js";import{F as De}from"./filter-DuUA3oD4.js";import{C as Z}from"./select-D_VAVDlA.js";import{C as J}from"./chevron-down-DLv74dvl.js";import{C as ps}from"./CitySelection-ClQIQvtv.js";import{R as ge}from"./RecommendedFilters-C1I01tus.js";import{m as P}from"./motion-kiylLBN_.js";import{S as be}from"./sparkles-Dpuoyrx6.js";import{A as re}from"./index-DbtUbGqu.js";import{A as hs}from"./arrow-left-DUUYJY6r.js";import{C as fs}from"./circle-alert-Cpo5ciR4.js";import{L as gs}from"./loader-circle-CezKkU8e.js";import"./input-VpsYF4Vr.js";import"./popover-CONKk_ZS.js";import"./search-B-slDbzw.js";import"./index-BrdCMveb.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=Ke("BadgeIndianRupee",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M8 8h8",key:"1bis0t"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m13 17-5-1h1a4 4 0 0 0 0-8",key:"nu2bwa"}]]),bs=({test:s,isSelected:a,onSelect:o})=>{const r=s&&typeof s.price=="number"&&typeof s.discount=="number",l=r?s.price-s.price*s.discount/100:void 0;return e.jsx(ye,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${a?"border-primary border-2":"border"}`,onClick:()=>o(s),children:e.jsxs(Se,{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.name}),s.isPopular&&e.jsx($,{variant:"outline",className:"bg-primary/10 text-primary border-primary/20",children:"Popular"})]}),e.jsx("p",{className:"text-muted-foreground text-sm",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs bg-secondary px-2 py-1 rounded-full mt-1 inline-block",children:s.category}),typeof s.price=="number"&&e.jsxs("div",{className:"text-right",children:[r&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs line-through text-muted-foreground",children:["₹",s.price]}),e.jsxs("span",{className:"text-xs bg-primary/10 text-primary px-1 rounded",children:[s.discount,"% off"]})]}),e.jsxs("p",{className:"font-bold text-base",children:["₹",l||s.price]})]})]})]}),a&&e.jsx("div",{className:"flex-shrink-0 bg-primary rounded-full p-1 ml-3",children:e.jsx(we,{className:"h-4 w-4 text-white"})})]})})},js=({lab:s,onSelect:a})=>{const o=s.discount?Math.round(s.price-s.price*s.discount/100):s.price;return e.jsxs(ye,{className:"h-full overflow-hidden transition-all duration-500 hover:shadow-2xl hover:-translate-y-1 border border-border/40 bg-white/90 dark:bg-card/90 backdrop-blur-md group shadow-sm",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110",style:{backgroundImage:`url(${s.imageUrl||"/placeholder.svg"})`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/70 to-transparent opacity-95"}),e.jsx("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:e.jsxs("div",{className:"flex items-center bg-white/10 backdrop-blur-md px-3 py-1 rounded-full text-white border border-white/20 shadow-lg",children:[e.jsx(Ce,{className:"h-3.5 w-3.5 text-yellow-500 fill-yellow-500 mr-1.5"}),e.jsx("span",{className:"text-sm font-bold",children:s.rating.toFixed(1)}),e.jsxs("span",{className:"text-xs text-white/70 ml-1",children:["(",s.reviewCount,")"]})]})}),e.jsxs("div",{className:"absolute bottom-3 left-3 right-3 text-white",children:[e.jsx(is,{className:"text-xl font-bold mb-1 leading-tight",children:s.name}),s.accreditation&&e.jsxs("div",{className:"flex items-center text-white/80 text-xs",children:[e.jsx(ns,{className:"h-3.5 w-3.5 mr-1.5 text-primary"}),e.jsx("span",{children:s.accreditation})]})]})]}),e.jsx(Se,{className:"p-5",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(Ne,{className:"h-4 w-4 text-primary mt-0.5 mr-2.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.address}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[s.distance.toFixed(1)," km away"]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ke,{className:"h-4 w-4 text-primary mr-2.5 flex-shrink-0"}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${s.openNow?"bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)]":"bg-red-500"}`}),e.jsx("span",{className:"font-medium",children:s.openNow?"Open Now":"Closed"}),e.jsx("span",{className:"mx-2 text-muted-foreground",children:"•"}),e.jsxs("span",{className:"text-muted-foreground",children:[s.waitTime," wait"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 pt-1",children:[s.facilities.slice(0,3).map((r,l)=>e.jsx("span",{className:"text-[10px] font-medium bg-primary/5 text-primary px-2.5 py-1 rounded-full border border-primary/10",children:r},l)),s.facilities.length>3&&e.jsxs("span",{className:"text-[10px] font-medium bg-secondary text-secondary-foreground px-2.5 py-1 rounded-full",children:["+",s.facilities.length-3]})]})]})}),e.jsx("div",{className:"px-5 pb-5 mt-auto",children:e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wider mb-0.5",children:"Test Fee"}),s.discount?e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("span",{className:"font-bold text-xl text-primary",children:["₹",o]}),e.jsxs("span",{className:"text-xs line-through text-muted-foreground decoration-red-500/50",children:["₹",s.price]})]}):e.jsxs("span",{className:"font-bold text-xl",children:["₹",s.price]})]}),e.jsxs(I,{onClick:()=>a(s),className:"rounded-full px-6 shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all",children:["Select Lab",e.jsx(we,{className:"ml-2 h-4 w-4"})]})]})})]})};var Pe=["PageUp","PageDown"],Le=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ae={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},K="Slider",[ie,vs,ws]=We(K),[Fe,ut]=Ye(K,[ws]),[Ns,te]=Fe(K),Te=c.forwardRef((s,a)=>{const{name:o,min:r=0,max:l=100,step:p=1,orientation:t="horizontal",disabled:d=!1,minStepsBetweenThumbs:h=0,defaultValue:j=[r],value:u,onValueChange:x=()=>{},onValueCommit:b=()=>{},inverted:N=!1,form:k,...v}=s,m=c.useRef(new Set),i=c.useRef(0),w=t==="horizontal"?ys:Ss,[y=[],M]=Ue({prop:u,defaultProp:j,onChange:C=>{var F;(F=[...m.current][i.current])==null||F.focus(),x(C)}}),E=c.useRef(y);function V(C){const A=Ps(y,C);O(C,A)}function L(C){O(C,i.current)}function Q(){const C=E.current[i.current];y[i.current]!==C&&b(y)}function O(C,A,{commit:F}={commit:!1}){const X=Ts(p),U=_s(Math.round((C-r)/p)*p+r,X),B=Re(U,[r,l]);M((T=[])=>{const _=Rs(T,B,A);if(Fs(_,h*p)){i.current=_.indexOf(B);const Y=String(_)!==String(T);return Y&&F&&b(_),Y?_:T}else return T})}return e.jsx(Ns,{scope:s.__scopeSlider,name:o,disabled:d,min:r,max:l,valueIndexToChangeRef:i,thumbs:m.current,values:y,orientation:t,form:k,children:e.jsx(ie.Provider,{scope:s.__scopeSlider,children:e.jsx(ie.Slot,{scope:s.__scopeSlider,children:e.jsx(w,{"aria-disabled":d,"data-disabled":d?"":void 0,...v,ref:a,onPointerDown:z(v.onPointerDown,()=>{d||(E.current=y)}),min:r,max:l,inverted:N,onSlideStart:d?void 0:V,onSlideMove:d?void 0:L,onSlideEnd:d?void 0:Q,onHomeKeyDown:()=>!d&&O(r,0,{commit:!0}),onEndKeyDown:()=>!d&&O(l,y.length-1,{commit:!0}),onStepKeyDown:({event:C,direction:A})=>{if(!d){const U=Pe.includes(C.key)||C.shiftKey&&Le.includes(C.key)?10:1,B=i.current,T=y[B],_=p*U*A;O(T+_,B,{commit:!0})}}})})})})});Te.displayName=K;var[_e,Ee]=Fe(K,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ys=c.forwardRef((s,a)=>{const{min:o,max:r,dir:l,inverted:p,onSlideStart:t,onSlideMove:d,onSlideEnd:h,onStepKeyDown:j,...u}=s,[x,b]=c.useState(null),N=H(a,w=>b(w)),k=c.useRef(void 0),v=Ge(l),m=v==="ltr",i=m&&!p||!m&&p;function f(w){const y=k.current||x.getBoundingClientRect(),M=[0,y.width],V=ce(M,i?[o,r]:[r,o]);return k.current=y,V(w-y.left)}return e.jsx(_e,{scope:s.__scopeSlider,startEdge:i?"left":"right",endEdge:i?"right":"left",direction:i?1:-1,size:"width",children:e.jsx(Be,{dir:v,"data-orientation":"horizontal",...u,ref:N,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const y=f(w.clientX);t==null||t(y)},onSlideMove:w=>{const y=f(w.clientX);d==null||d(y)},onSlideEnd:()=>{k.current=void 0,h==null||h()},onStepKeyDown:w=>{const M=Ae[i?"from-left":"from-right"].includes(w.key);j==null||j({event:w,direction:M?-1:1})}})})}),Ss=c.forwardRef((s,a)=>{const{min:o,max:r,inverted:l,onSlideStart:p,onSlideMove:t,onSlideEnd:d,onStepKeyDown:h,...j}=s,u=c.useRef(null),x=H(a,u),b=c.useRef(void 0),N=!l;function k(v){const m=b.current||u.current.getBoundingClientRect(),i=[0,m.height],w=ce(i,N?[r,o]:[o,r]);return b.current=m,w(v-m.top)}return e.jsx(_e,{scope:s.__scopeSlider,startEdge:N?"bottom":"top",endEdge:N?"top":"bottom",size:"height",direction:N?1:-1,children:e.jsx(Be,{"data-orientation":"vertical",...j,ref:x,style:{...j.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const m=k(v.clientY);p==null||p(m)},onSlideMove:v=>{const m=k(v.clientY);t==null||t(m)},onSlideEnd:()=>{b.current=void 0,d==null||d()},onStepKeyDown:v=>{const i=Ae[N?"from-bottom":"from-top"].includes(v.key);h==null||h({event:v,direction:i?-1:1})}})})}),Be=c.forwardRef((s,a)=>{const{__scopeSlider:o,onSlideStart:r,onSlideMove:l,onSlideEnd:p,onHomeKeyDown:t,onEndKeyDown:d,onStepKeyDown:h,...j}=s,u=te(K,o);return e.jsx(G.span,{...j,ref:a,onKeyDown:z(s.onKeyDown,x=>{x.key==="Home"?(t(x),x.preventDefault()):x.key==="End"?(d(x),x.preventDefault()):Pe.concat(Le).includes(x.key)&&(h(x),x.preventDefault())}),onPointerDown:z(s.onPointerDown,x=>{const b=x.target;b.setPointerCapture(x.pointerId),x.preventDefault(),u.thumbs.has(b)?b.focus():r(x)}),onPointerMove:z(s.onPointerMove,x=>{x.target.hasPointerCapture(x.pointerId)&&l(x)}),onPointerUp:z(s.onPointerUp,x=>{const b=x.target;b.hasPointerCapture(x.pointerId)&&(b.releasePointerCapture(x.pointerId),p(x))})})}),Ie="SliderTrack",Me=c.forwardRef((s,a)=>{const{__scopeSlider:o,...r}=s,l=te(Ie,o);return e.jsx(G.span,{"data-disabled":l.disabled?"":void 0,"data-orientation":l.orientation,...r,ref:a})});Me.displayName=Ie;var ne="SliderRange",Oe=c.forwardRef((s,a)=>{const{__scopeSlider:o,...r}=s,l=te(ne,o),p=Ee(ne,o),t=c.useRef(null),d=H(a,t),h=l.values.length,j=l.values.map(b=>$e(b,l.min,l.max)),u=h>1?Math.min(...j):0,x=100-Math.max(...j);return e.jsx(G.span,{"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,...r,ref:d,style:{...s.style,[p.startEdge]:u+"%",[p.endEdge]:x+"%"}})});Oe.displayName=ne;var oe="SliderThumb",Ve=c.forwardRef((s,a)=>{const o=vs(s.__scopeSlider),[r,l]=c.useState(null),p=H(a,d=>l(d)),t=c.useMemo(()=>r?o().findIndex(d=>d.ref.current===r):-1,[o,r]);return e.jsx(Cs,{...s,ref:p,index:t})}),Cs=c.forwardRef((s,a)=>{const{__scopeSlider:o,index:r,name:l,...p}=s,t=te(oe,o),d=Ee(oe,o),[h,j]=c.useState(null),u=H(a,f=>j(f)),x=h?t.form||!!h.closest("form"):!0,b=Qe(h),N=t.values[r],k=N===void 0?0:$e(N,t.min,t.max),v=Ds(r,t.values.length),m=b==null?void 0:b[d.size],i=m?Ls(m,k,d.direction):0;return c.useEffect(()=>{if(h)return t.thumbs.add(h),()=>{t.thumbs.delete(h)}},[h,t.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${k}% + ${i}px)`},children:[e.jsx(ie.ItemSlot,{scope:s.__scopeSlider,children:e.jsx(G.span,{role:"slider","aria-label":s["aria-label"]||v,"aria-valuemin":t.min,"aria-valuenow":N,"aria-valuemax":t.max,"aria-orientation":t.orientation,"data-orientation":t.orientation,"data-disabled":t.disabled?"":void 0,tabIndex:t.disabled?void 0:0,...p,ref:u,style:N===void 0?{display:"none"}:s.style,onFocus:z(s.onFocus,()=>{t.valueIndexToChangeRef.current=r})})}),x&&e.jsx(ze,{name:l??(t.name?t.name+(t.values.length>1?"[]":""):void 0),form:t.form,value:N},r)]})});Ve.displayName=oe;var ks="RadioBubbleInput",ze=c.forwardRef(({__scopeSlider:s,value:a,...o},r)=>{const l=c.useRef(null),p=H(l,r),t=os(a);return c.useEffect(()=>{const d=l.current;if(!d)return;const h=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(h,"value").set;if(t!==a&&u){const x=new Event("input",{bubbles:!0});u.call(d,a),d.dispatchEvent(x)}},[t,a]),e.jsx(G.input,{style:{display:"none"},...o,ref:p,defaultValue:a})});ze.displayName=ks;function Rs(s=[],a,o){const r=[...s];return r[o]=a,r.sort((l,p)=>l-p)}function $e(s,a,o){const p=100/(o-a)*(s-a);return Re(p,[0,100])}function Ds(s,a){return a>2?`Value ${s+1} of ${a}`:a===2?["Minimum","Maximum"][s]:void 0}function Ps(s,a){if(s.length===1)return 0;const o=s.map(l=>Math.abs(l-a)),r=Math.min(...o);return o.indexOf(r)}function Ls(s,a,o){const r=s/2,p=ce([0,50],[0,r]);return(r-p(a)*o)*o}function As(s){return s.slice(0,-1).map((a,o)=>s[o+1]-a)}function Fs(s,a){if(a>0){const o=As(s);return Math.min(...o)>=a}return!0}function ce(s,a){return o=>{if(s[0]===s[1]||a[0]===a[1])return a[0];const r=(a[1]-a[0])/(s[1]-s[0]);return a[0]+r*(o-s[0])}}function Ts(s){return(String(s).split(".")[1]||"").length}function _s(s,a){const o=Math.pow(10,a);return Math.round(s*o)/o}var He=Te,Es=Me,Bs=Oe,Is=Ve;const le=c.forwardRef(({className:s,...a},o)=>e.jsxs(He,{ref:o,className:Xe("relative flex w-full touch-none select-none items-center",s),...ls(a),children:[e.jsx(Es,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(Bs,{className:"absolute h-full bg-primary"})}),e.jsx(Is,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));le.displayName=He.displayName;const q=ms,ee=xs,se=us,Ms={rating:0,maxDistance:10,openNow:!1,facilities:{"Home Collection":!1,"Digital Reports":!1,"NABL Accredited":!1,"Open 24x7":!1,"Free Home Delivery":!1,"Insurance Accepted":!1}},ve=({onSortChange:s,onFilterChange:a,initialFilters:o,initialSortOption:r="relevance",isMobile:l=!1,onClose:p})=>{const[t,d]=c.useState(o||Ms),[h,j]=c.useState(r),[u,x]=c.useState({sort:!0,rating:!0,distance:!0,facilities:!0});c.useEffect(()=>{o&&d(o)},[o]),c.useEffect(()=>{j(r)},[r]);const b=i=>{j(i),s(i)},N=i=>{const f={...t,...i};d(f),a(f)},k=(i,f)=>{N({facilities:{...t.facilities,[i]:f}})},v=i=>{x({...u,[i]:!u[i]})},m=(t.rating>0?1:0)+(t.maxDistance<10?1:0)+(t.openNow?1:0)+Object.values(t.facilities).filter(Boolean).length;return e.jsxs("div",{className:`${l?"w-full p-6 bg-background":"w-full max-w-xs sticky top-32"}`,children:[!l&&e.jsxs("div",{className:"flex items-center justify-between mb-6 px-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-primary/10 p-2.5 rounded-xl text-primary",children:e.jsx(De,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg leading-none",children:"Filters"}),m>0&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[m," active"]})]})]}),m>0&&e.jsx(I,{variant:"ghost",size:"sm",className:"h-8 px-2 text-xs hover:bg-destructive/10 hover:text-destructive transition-colors rounded-lg",onClick:()=>{const i={rating:0,maxDistance:10,openNow:!1,facilities:Object.keys(t.facilities).reduce((f,w)=>({...f,[w]:!1}),{})};d(i),j("relevance"),a(i),s("relevance")},children:"Clear all"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{className:"bg-card/40 backdrop-blur-sm rounded-2xl border border-white/10 shadow-sm overflow-hidden group hover:bg-card/60 transition-colors",children:e.jsxs(q,{open:u.sort,className:"",children:[e.jsx(ee,{asChild:!0,onClick:()=>v("sort"),children:e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer",children:[e.jsx("span",{className:"font-semibold text-sm",children:"Sort By"}),u.sort?e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(J,{className:"h-4 w-4 text-muted-foreground"})]})}),e.jsx(se,{className:"px-4 pb-4",children:e.jsx(cs,{value:h,onValueChange:b,className:"space-y-3",children:[{id:"relevance",label:"Relevance",icon:null},{id:"rating",label:"Rating",icon:e.jsx(Ce,{className:"h-3.5 w-3.5 ml-1.5 text-yellow-500 fill-yellow-500"})},{id:"distance",label:"Distance",icon:e.jsx(Ne,{className:"h-3.5 w-3.5 ml-1.5 text-blue-500"})},{id:"price-low",label:"Price: Low to High",icon:e.jsx(je,{className:"h-3.5 w-3.5 ml-1.5 text-green-600"})},{id:"price-high",label:"Price: High to Low",icon:e.jsx(je,{className:"h-3.5 w-3.5 ml-1.5 text-green-600"})},{id:"wait-time",label:"Wait Time",icon:e.jsx(ke,{className:"h-3.5 w-3.5 ml-1.5 text-orange-500"})}].map(i=>e.jsxs("div",{className:"flex items-center justify-between group/item cursor-pointer p-2 rounded-lg hover:bg-primary/5 transition-colors",children:[e.jsxs("label",{htmlFor:i.id,className:"text-sm cursor-pointer flex items-center flex-1 text-muted-foreground group-hover/item:text-foreground",children:[i.label," ",i.icon]}),e.jsx(ds,{value:i.id,id:i.id,className:"scale-90 border-muted-foreground/30 data-[state=checked]:border-primary"})]},i.id))})})]})}),e.jsx("div",{className:"bg-card/40 backdrop-blur-sm rounded-2xl border border-white/10 shadow-sm overflow-hidden group hover:bg-card/60 transition-colors",children:e.jsxs(q,{open:u.rating,className:"",children:[e.jsx(ee,{asChild:!0,onClick:()=>v("rating"),children:e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold text-sm",children:"Minimum Rating"}),t.rating>0&&e.jsxs($,{variant:"secondary",className:"ml-2 h-5 px-1.5 text-[10px] bg-yellow-500/10 text-yellow-600 border-yellow-200",children:[t.rating,"+"]})]}),u.rating?e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(J,{className:"h-4 w-4 text-muted-foreground"})]})}),e.jsx(se,{className:"px-4 pb-4",children:e.jsxs("div",{className:"space-y-6 pt-2",children:[e.jsx(le,{value:[t.rating],min:0,max:5,step:.5,onValueChange:i=>N({rating:i[0]}),className:"py-2"}),e.jsxs("div",{className:"flex justify-between items-center text-muted-foreground",children:[e.jsx("span",{className:"text-xs font-medium",children:"Any"}),e.jsxs("span",{className:"text-sm font-bold text-foreground bg-secondary px-2 py-0.5 rounded-md",children:[t.rating," Stars"]}),e.jsx("span",{className:"text-xs font-medium",children:"5.0"})]})]})})]})}),e.jsx("div",{className:"bg-card/40 backdrop-blur-sm rounded-2xl border border-white/10 shadow-sm overflow-hidden group hover:bg-card/60 transition-colors",children:e.jsxs(q,{open:u.distance,className:"",children:[e.jsx(ee,{asChild:!0,onClick:()=>v("distance"),children:e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold text-sm",children:"Distance"}),t.maxDistance<10&&e.jsxs($,{variant:"secondary",className:"ml-2 h-5 px-1.5 text-[10px] bg-blue-500/10 text-blue-600 border-blue-200",children:[t.maxDistance," km"]})]}),u.distance?e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(J,{className:"h-4 w-4 text-muted-foreground"})]})}),e.jsx(se,{className:"px-4 pb-4",children:e.jsxs("div",{className:"space-y-6 pt-2",children:[e.jsx(le,{value:[t.maxDistance],min:1,max:10,step:1,onValueChange:i=>N({maxDistance:i[0]}),className:"py-2"}),e.jsxs("div",{className:"flex justify-between items-center text-muted-foreground",children:[e.jsx("span",{className:"text-xs font-medium",children:"1 km"}),e.jsxs("span",{className:"text-sm font-bold text-foreground bg-secondary px-2 py-0.5 rounded-md",children:[t.maxDistance," km"]}),e.jsx("span",{className:"text-xs font-medium",children:"10 km"})]}),e.jsx("div",{className:"pt-4 border-t border-border/50",children:e.jsxs("div",{className:"flex items-center space-x-3 p-2 hover:bg-muted/50 rounded-lg transition-colors cursor-pointer",children:[e.jsx(fe,{id:"open-now",checked:t.openNow,onCheckedChange:i=>N({openNow:i})}),e.jsxs("label",{htmlFor:"open-now",className:"text-sm font-medium leading-none cursor-pointer flex items-center flex-1",children:["Open Now ",e.jsx("span",{className:"ml-auto inline-block h-2 w-2 rounded-full bg-green-500 shadow-[0_0_6px_rgba(34,197,94,0.6)]"})]})]})})]})})]})}),e.jsx("div",{className:"bg-card/40 backdrop-blur-sm rounded-2xl border border-white/10 shadow-sm overflow-hidden group hover:bg-card/60 transition-colors",children:e.jsxs(q,{open:u.facilities,className:"",children:[e.jsx(ee,{asChild:!0,onClick:()=>v("facilities"),children:e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold text-sm",children:"Facilities"}),Object.values(t.facilities).filter(Boolean).length>0&&e.jsx($,{variant:"secondary",className:"ml-2 h-5 px-1.5 text-[10px] bg-purple-500/10 text-purple-600 border-purple-200",children:Object.values(t.facilities).filter(Boolean).length})]}),u.facilities?e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(J,{className:"h-4 w-4 text-muted-foreground"})]})}),e.jsx(se,{className:"px-4 pb-4",children:e.jsx("div",{className:"space-y-1 pt-1",children:Object.keys(t.facilities).map(i=>e.jsxs("div",{className:"flex items-center space-x-3 group/item p-2 hover:bg-muted/50 rounded-lg transition-colors cursor-pointer",children:[e.jsx(fe,{id:i,checked:t.facilities[i],onCheckedChange:f=>k(i,f),className:"data-[state=checked]:bg-primary"}),e.jsx("label",{htmlFor:i,className:"text-sm leading-none cursor-pointer flex-1 text-muted-foreground group-hover/item:text-foreground transition-colors",children:i})]},i))})})]})})]})]})},pt=()=>{const{toast:s}=Ze(),a=Je(),[o]=qe(),r=o.get("search")||"",[l,p]=c.useState("Bengaluru"),[t,d]=c.useState(r),[h,j]=c.useState([]),[u,x]=c.useState([]),[b,N]=c.useState([]),[k,v]=c.useState(!0),[m,i]=c.useState(null),[f,w]=c.useState(null),[y,M]=c.useState([]),[E,V]=c.useState("relevance"),[L,Q]=c.useState({rating:0,maxDistance:10,openNow:!1,facilities:{"Home Collection":!1,"Digital Reports":!1,"NABL Accredited":!1,"Open 24x7":!1,"Free Home Delivery":!1,"Insurance Accepted":!1}}),[O,C]=c.useState(!1);c.useEffect(()=>{(async()=>{try{v(!0);const g=(await he.getAllTests()).map(S=>{var W;return{id:S.id,name:S.name,description:S.description,category:((W=S.category)==null?void 0:W.name)||"General",price:S.price,isPopular:S.popularity>80}});x(g);const ae=(await he.getAllLabs({city:l})).map(S=>{var W,xe,ue,pe;return{id:S.id,name:S.name,address:S.address?`${S.address.street}, ${S.address.city}`:"Address not available",distance:Math.random()*5,rating:S.rating||0,reviewCount:((W=S.reviews)==null?void 0:W.length)||0,price:((ue=(xe=S.tests)==null?void 0:xe[0])==null?void 0:ue.price)||0,waitTime:"15-20 min",openNow:!0,facilities:S.certifications||[],imageUrl:S.image||"/placeholder.svg",accreditation:(pe=S.certifications)==null?void 0:pe[0]}});N(ae)}catch(R){console.error("Error fetching data:",R),s({title:"Error",description:"Failed to load tests and labs. Please try again later.",variant:"destructive"})}finally{v(!1)}})()},[l,s]);const A=n=>{p(n),d(""),j([]),i(null),w(null),s({title:"City Updated",description:`Your location has been set to ${n}`})};c.useEffect(()=>{if(r&&u.length>0){const n=u.filter(R=>R.name.toLowerCase().includes(r.toLowerCase())||R.description.toLowerCase().includes(r.toLowerCase())||R.category.toLowerCase().includes(r.toLowerCase()));j(n)}},[u,r]);const F=n=>{d(n),i(null),w(null);const R=u.filter(g=>g.name.toLowerCase().includes(n.toLowerCase())||g.description.toLowerCase().includes(n.toLowerCase())||g.category.toLowerCase().includes(n.toLowerCase()));j(R),R.length===0&&n!==""&&s({title:"No tests found",description:"Try a different search term",variant:"destructive"})},X=n=>{i(n),w(null),s({title:"Test Selected",description:`You selected ${n.name}`})},U=n=>{w(n),s({title:"Lab Selected",description:`You selected ${n.name} for your test`})},B=n=>{V(n)},T=n=>{Q(n)};c.useEffect(()=>{if(!m)return;let n=[...b];L.openNow&&(n=n.filter(g=>g.openNow)),n=n.filter(g=>g.rating>=L.rating),n=n.filter(g=>g.distance<=L.maxDistance);const R=Object.entries(L.facilities).filter(([g,D])=>D).map(([g])=>g);switch(R.length>0&&(n=n.filter(g=>R.every(D=>g.facilities.includes(D)))),E){case"rating":n.sort((g,D)=>D.rating-g.rating);break;case"distance":n.sort((g,D)=>g.distance-D.distance);break;case"price-low":n.sort((g,D)=>g.price-D.price);break;case"price-high":n.sort((g,D)=>D.price-g.price);break;case"wait-time":n.sort((g,D)=>{const ae=parseInt(g.waitTime.split("-")[0]),S=parseInt(D.waitTime.split("-")[0]);return ae-S});break}M(n)},[m,L,E,b]);const _=n=>{a(`/lab/${n.id}`,{state:{lab:n}})},Y=n=>{d(n),F(n)},de={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},me={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return e.jsxs("div",{className:"min-h-screen bg-slate-50/50 flex flex-col pt-16 relative selection:bg-primary/20",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-primary/10 rounded-full blur-[120px] opacity-60"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[600px] h-[600px] bg-blue-500/10 rounded-full blur-[120px] opacity-60"})]}),e.jsxs("div",{className:"relative bg-black text-white pb-24 pt-16 overflow-hidden z-10",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 via-black to-purple-900/20"}),e.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1579154204601-01588f351e67?auto=format&fit=crop&q=80&w=2000')] bg-cover bg-center opacity-10"}),e.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[!m&&e.jsxs(P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center space-y-6 max-w-4xl mx-auto",children:[e.jsxs($,{variant:"outline",className:"text-primary border-primary/50 bg-primary/10 backdrop-blur-md mb-2 px-4 py-1.5 text-sm rounded-full",children:[e.jsx(be,{className:"h-3.5 w-3.5 mr-2"}),"Trusted by 500+ Labs"]}),e.jsxs("h1",{className:"text-4xl md:text-7xl font-bold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-white via-white to-white/70",children:["Find the Right Lab for Your"," ",e.jsx("span",{className:"text-primary italic",children:"Diagnostics"})]}),e.jsx("p",{className:"text-lg md:text-xl text-gray-400 max-w-2xl mx-auto leading-relaxed",children:"Compare prices, check reviews, and book appointments with NABL-accredited labs near you."})]}),e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:`mt-10 ${m?"max-w-7xl":"max-w-3xl"} mx-auto transition-all duration-500`,children:e.jsxs("div",{className:`
              backdrop-blur-2xl border p-2 rounded-3xl shadow-2xl flex flex-col md:flex-row gap-2 items-center transition-all duration-300
              ${m?"bg-white/90 border-white/20 shadow-primary/5":"bg-white/10 border-white/20"}
            `,children:[e.jsx("div",{className:`w-full md:w-auto min-w-[220px] border-b md:border-b-0 md:border-r md:pr-2 transition-colors ${m?"border-gray-200":"border-white/10"}`,children:e.jsx(ps,{selectedCity:l,onCityChange:A,className:m?"text-foreground":"text-white placeholder:text-white/70"})}),e.jsx("div",{className:"flex-1 w-full relative z-20",children:e.jsx(rs,{onSearch:F,placeholder:"Search for blood tests (e.g. CBC, Lipid Profile)",context:"lab",animated:!1,className:m?"text-foreground":""})})]})})]})]}),e.jsxs("main",{className:"flex-grow container mx-auto -mt-16 relative z-20 px-4 pb-20",children:[e.jsx(re,{children:!m&&e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,height:0},transition:{delay:.4},className:"mb-8",children:e.jsx("div",{className:"bg-card/50 backdrop-blur-md border rounded-2xl p-6 shadow-lg",children:e.jsx(ge,{onFilterSelect:Y})})})}),e.jsxs(re,{mode:"wait",children:[h.length>0&&!m&&e.jsxs(P.div,{initial:"hidden",animate:"show",exit:"hidden",variants:de,className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5 text-primary"}),"Test Results ",e.jsxs("span",{className:"text-muted-foreground text-sm font-normal",children:["(",h.length," found)"]})]})}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:h.map(n=>e.jsx(P.div,{variants:me,children:e.jsx(bs,{test:n,isSelected:(m==null?void 0:m.id)===n.id,onSelect:X})},n.id))})]},"results"),m&&e.jsxs(P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-3xl p-6 border shadow-sm relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs(I,{variant:"ghost",size:"sm",className:"mb-2 pl-0 hover:pl-2 transition-all text-muted-foreground hover:text-primary",onClick:()=>{i(null),j(u.filter(n=>n.name.toLowerCase().includes(t.toLowerCase())))},children:[e.jsx(hs,{className:"h-4 w-4 mr-1"}),"Back to results"]}),e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["Labs offering ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary to-blue-600",children:m.name})]}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"Compare prices, ratings, and facilities to choose the best lab for you"})]}),e.jsx("div",{className:"md:hidden",children:e.jsxs(es,{open:O,onOpenChange:C,children:[e.jsx(ss,{asChild:!0,children:e.jsxs(I,{variant:"outline",className:"w-full",children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Filters & Sort"]})}),e.jsx(ts,{side:"left",className:"w-full sm:max-w-md p-0",children:e.jsx("div",{className:"overflow-y-auto h-full",children:e.jsx(ve,{onSortChange:B,onFilterChange:T,initialFilters:L,initialSortOption:E,isMobile:!0,onClose:()=>C(!1)})})})]})})]}),e.jsx(ge,{onFilterSelect:Y,recommendedFilters:["NABL Accredited","Home Collection","Digital Reports","Open 24x7","Insurance Accepted"],title:"Quick Filters:",className:"mb-0"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("div",{className:"hidden md:block md:w-1/4 lg:w-1/5 space-y-6",children:e.jsx("div",{className:"sticky top-24",children:e.jsx(ve,{onSortChange:B,onFilterChange:T,initialFilters:L,initialSortOption:E})})}),e.jsx("div",{className:"flex-1",children:y.length>0?e.jsx(P.div,{variants:de,initial:"hidden",animate:"show",className:"grid gap-6 md:grid-cols-1 lg:grid-cols-2",children:y.map(n=>e.jsx(P.div,{variants:me,children:e.jsx(js,{lab:n,onSelect:U})},n.id))}):e.jsxs(P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-20 bg-card border border-dashed rounded-3xl",children:[e.jsx("div",{className:"bg-muted/50 h-20 w-20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(fs,{className:"h-10 w-10 text-muted-foreground"})}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"No labs found"}),e.jsx("p",{className:"text-muted-foreground max-w-sm mx-auto mb-6",children:"We couldn't find any labs matching your current filters. Try adjusting them or searching for a different area."}),e.jsx(I,{variant:"outline",onClick:()=>{const n={rating:0,maxDistance:10,openNow:!1,facilities:Object.keys(L.facilities).reduce((R,g)=>({...R,[g]:!1}),{})};Q(n),V("relevance")},children:"Reset All Filters"})]})})]})]},"labs")]}),e.jsx(re,{children:f&&e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>w(null),children:e.jsxs(P.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},onClick:n=>n.stopPropagation(),className:"bg-card max-w-md w-full rounded-3xl shadow-2xl overflow-hidden border ring-1 ring-white/10",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-48 bg-cover bg-center w-full",style:{backgroundImage:`url(${f.imageUrl||"/placeholder.svg"})`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),e.jsx(I,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 bg-black/20 backdrop-blur-md text-white hover:bg-black/40 rounded-full",onClick:()=>w(null),children:e.jsx(as,{className:"h-4 w-4"})}),e.jsxs("div",{className:"absolute bottom-4 left-6 right-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-0.5",children:f.name}),e.jsx("p",{className:"text-white/80 text-sm truncate",children:f.address})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-xl",children:[e.jsx("span",{className:"text-muted-foreground text-sm font-medium",children:"Selected Test"}),e.jsx("span",{className:"font-bold text-primary",children:m==null?void 0:m.name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Price"}),e.jsx("div",{className:"text-right",children:f.discount?e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("span",{className:"font-bold text-2xl",children:["₹",Math.round(f.price-f.price*f.discount/100)]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("span",{className:"line-through text-muted-foreground",children:["₹",f.price]}),e.jsxs($,{variant:"secondary",className:"bg-green-500/10 text-green-600 border-0 h-5 px-1.5",children:[f.discount,"% OFF"]})]})]}):e.jsxs("span",{className:"font-bold text-2xl",children:["₹",f.price]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 border rounded-xl bg-card",children:[e.jsx("span",{className:"text-xs text-muted-foreground block mb-1",children:"Wait Time"}),e.jsx("span",{className:"font-semibold",children:f.waitTime})]}),e.jsxs("div",{className:"p-3 border rounded-xl bg-card",children:[e.jsx("span",{className:"text-xs text-muted-foreground block mb-1",children:"Status"}),e.jsxs("span",{className:"font-semibold text-green-600 flex items-center gap-1.5",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-green-500 animate-pulse"}),"Open Now"]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(I,{variant:"outline",className:"flex-1 h-12 rounded-xl border-2",onClick:()=>w(null),children:"Cancel"}),e.jsx(I,{className:"flex-1 h-12 rounded-xl font-bold text-base shadow-lg shadow-primary/20",onClick:()=>_(f),children:"View Details"})]})]})]})})}),k&&e.jsx("div",{className:"fixed inset-0 bg-background/50 backdrop-blur-sm flex items-center justify-center z-[60]",children:e.jsxs("div",{className:"bg-card p-6 rounded-2xl shadow-xl border flex flex-col items-center gap-4",children:[e.jsx(gs,{className:"h-10 w-10 text-primary animate-spin"}),e.jsx("p",{className:"font-medium",children:"Finding best labs..."})]})})]})]})};export{pt as default};
