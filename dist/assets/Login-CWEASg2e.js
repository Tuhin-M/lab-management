import{x as F,F as E,R as l,r as L,s as e,t as g,O as I,q as n,a3 as S,J as j}from"./index-TcMYSotV.js";import{F as _,a as d,b as m,c,d as p,e as y}from"./form-xz68HsE9.js";import{u as R,t as A,z as i}from"./zod-CnCpVjpE.js";import{C as M}from"./checkbox-xrqeEPp5.js";import{I as w}from"./input-VpsYF4Vr.js";import{C as z,a as P,c as q}from"./card-P2OsDbbh.js";import{m as o}from"./motion-kiylLBN_.js";import{S as D}from"./sparkles-Dpuoyrx6.js";import{E as O}from"./eye-off-87126ebw.js";import{E as $}from"./eye-Bj4OFAPL.js";import{A as B}from"./arrow-right-C4jZPMIp.js";import"./label-BmxbEDFR.js";import"./index-BrdCMveb.js";import"./index-CWdTz_rd.js";import"./filterUnsupportedProps-Bb-ms138.js";const J=i.object({email:i.string().email({message:"Invalid email address"}),password:i.string().min(1,{message:"Password is required"}),rememberMe:i.boolean().optional()}),te=()=>{const a=F(),N=E(),[x,v]=l.useState(!1),[u,h]=l.useState(!1),[b,f]=l.useState(null);L.useEffect(()=>{(async()=>{if(await n.isAuthenticated()){const s=n.getCurrentUserRole();a(s==="lab_owner"?"/lab-dashboard":"/profile")}})()},[a]);const t=R({resolver:A(J),defaultValues:{email:"",password:"",rememberMe:!1}}),k=async r=>{try{h(!0),f(null);const s=await n.login(r.email,r.password);s&&(N(S({user:s.user,role:s.role})),s.role==="lab_owner"?a("/lab-dashboard"):a("/profile"),j.success("Successfully logged in!"))}catch(s){console.error("Login failed:",s),f(s.message||"Invalid email or password"),j.error(s.message||"Login failed")}finally{h(!1)}};return e.jsxs("div",{className:"min-h-screen relative flex flex-col justify-center items-center p-4 overflow-hidden bg-slate-50/50",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),e.jsx("div",{className:"absolute left-0 top-0 w-[500px] h-[500px] bg-primary/20 rounded-full blur-[100px] -translate-x-1/2 -translate-y-1/2 opacity-50"}),e.jsx("div",{className:"absolute right-0 bottom-0 w-[500px] h-[500px] bg-blue-500/20 rounded-full blur-[100px] translate-x-1/2 translate-y-1/2 opacity-50"}),e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md relative z-10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(o.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.5},className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-primary/10 text-primary mb-4",children:e.jsx(D,{className:"w-6 h-6"})}),e.jsx(o.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-3xl font-bold tracking-tight",children:"Welcome back"}),e.jsx(o.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-muted-foreground mt-2 text-lg",children:"Log in to continue with Ekitsa"})]}),e.jsxs(z,{className:"shadow-2xl border-white/20 bg-white/80 backdrop-blur-md overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/40 to-white/0 pointer-events-none"}),e.jsxs(P,{className:"pt-8 relative z-10",children:[b&&e.jsxs(o.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-6 p-4 bg-red-50/50 backdrop-blur-sm border border-red-200 text-red-700 rounded-lg text-sm flex items-center",role:"alert",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 mr-2 flex-shrink-0"}),e.jsx("span",{className:"font-semibold mr-1",children:"Error:"})," ",b]}),e.jsx(_,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(k),className:"space-y-5",children:[e.jsx(d,{control:t.control,name:"email",render:({field:r,fieldState:s})=>e.jsxs(m,{children:[e.jsx(c,{className:"text-foreground/80",children:"Email"}),e.jsx(p,{children:e.jsx(w,{...r,type:"email",placeholder:"you@example.com",autoComplete:"email",className:`bg-white/50 backdrop-blur-sm border-slate-200 focus:border-primary focus:ring-primary/20 transition-all ${s.invalid?"border-red-500 focus:border-red-500":""}`,"aria-invalid":s.invalid})}),e.jsx(y,{})]})}),e.jsx(d,{control:t.control,name:"password",render:({field:r,fieldState:s})=>e.jsxs(m,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{className:"text-foreground/80",children:"Password"}),e.jsx(g,{to:"#",className:"text-xs text-primary hover:underline font-medium",children:"Forgot password?"})]}),e.jsx(p,{children:e.jsxs("div",{className:"relative",children:[e.jsx(w,{...r,type:x?"text":"password",placeholder:"Enter your password",autoComplete:"current-password",className:`bg-white/50 backdrop-blur-sm border-slate-200 focus:border-primary focus:ring-primary/20 transition-all pr-10 ${s.invalid?"border-red-500 focus:border-red-500":""}`,"aria-invalid":s.invalid}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-primary focus:outline-none transition-colors",onClick:()=>v(C=>!C),tabIndex:-1,children:x?e.jsx(O,{className:"w-5 h-5"}):e.jsx($,{className:"w-5 h-5"})})]})}),e.jsx(y,{})]})}),e.jsx(d,{control:t.control,name:"rememberMe",render:({field:r})=>e.jsxs(m,{className:"flex items-center gap-2 space-y-0",children:[e.jsx(p,{children:e.jsx(M,{checked:r.value,onCheckedChange:r.onChange,id:"rememberMe",className:"data-[state=checked]:bg-primary border-slate-300"})}),e.jsx(c,{htmlFor:"rememberMe",className:"font-normal cursor-pointer text-muted-foreground select-none",children:"Remember me"})]})}),e.jsx(I,{type:"submit",className:"w-full font-semibold text-base py-6 shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all duration-300 transform hover:-translate-y-0.5",disabled:u,children:u?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Logging in..."]}):e.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Log In ",e.jsx(B,{className:"h-5 w-5"})]})})]})})]}),e.jsxs(q,{className:"justify-center bg-slate-50/50 border-t border-slate-100 py-6 relative z-10",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Don't have an account?"}),e.jsx(g,{to:"/signup",className:"ml-2 text-primary font-semibold hover:underline",children:"Sign up"})]})]})]})]})};export{te as default};
