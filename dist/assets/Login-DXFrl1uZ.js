import{c as v,q as k,R as m,r as C,w as t,s as e,B as I,x as L,E}from"./index-DgBcbMcU.js";import{F,a as c,b as x,c as p,d as u,e as j}from"./form-DsYPgIbr.js";import{u as S,t as M,z as n}from"./zod-Ne4FsdIx.js";import{C as R}from"./checkbox-BgHv6apx.js";import{I as g}from"./input-CJYTmRyd.js";import{C as P,c as q,d as A}from"./card-CEAmbz21.js";import{E as B,a as U}from"./eye-62CEUVaH.js";import"./label-DqPonXmE.js";import"./index-BBzG8Kdz.js";import"./index-CokvLBSM.js";import"./filterUnsupportedProps-Bb-ms138.js";import"./check-DOKdhm6x.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=v("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),_=n.object({email:n.string().email({message:"Invalid email address"}),password:n.string().min(1,{message:"Password is required"}),rememberMe:n.boolean().optional()}),Y=()=>{const a=k(),[i,y]=m.useState(!1),[l,h]=m.useState(!1),[b,f]=m.useState(null);C.useEffect(()=>{if(t.isAuthenticated()){const s=t.getCurrentUserRole();a(s==="lab_owner"?"/lab-dashboard":"/profile")}},[a]);const o=S({resolver:M(_),defaultValues:{email:"",password:"",rememberMe:!1}}),N=async s=>{try{h(!0),f(null);const r=await t.login(s.email,s.password);s.rememberMe?localStorage.setItem("token",r.token):sessionStorage.setItem("token",r.token);const d=t.getCurrentUserRole();a(d==="lab_owner"?"/lab-dashboard":"/profile")}catch(r){console.error("Login failed:",r),f("Invalid email or password"),E.error("Login failed")}finally{h(!1)}};return e.jsx("div",{className:"min-h-screen bg-background flex flex-col justify-center items-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold mt-6",children:"Welcome back"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Log in to continue with Ekitsa"})]}),e.jsxs(P,{className:"shadow-lg border-2 border-primary/10",children:[e.jsxs(q,{className:"pt-6",children:[b&&e.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md text-sm animate-shake",role:"alert",children:[e.jsx("span",{className:"font-semibold",children:"Error:"})," ",b]}),e.jsx(F,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(N),className:"space-y-6",children:[e.jsx(c,{control:o.control,name:"email",render:({field:s,fieldState:r})=>e.jsxs(x,{children:[e.jsx(p,{children:"Email"}),e.jsx(u,{children:e.jsx(g,{...s,type:"email",placeholder:"you@example.com",autoComplete:"email",className:r.invalid?"border-red-500 focus:border-red-500":"","aria-invalid":r.invalid,"aria-describedby":"email-error"})}),e.jsx(j,{id:"email-error"})]})}),e.jsx(c,{control:o.control,name:"password",render:({field:s,fieldState:r})=>e.jsxs(x,{children:[e.jsx(p,{children:"Password"}),e.jsx(u,{children:e.jsxs("div",{className:"relative",children:[e.jsx(g,{...s,type:i?"text":"password",placeholder:"Enter your password",autoComplete:"current-password",className:r.invalid?"border-red-500 focus:border-red-500 pr-10":"pr-10","aria-invalid":r.invalid,"aria-describedby":"password-error"}),e.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-primary focus:outline-none",onClick:()=>y(d=>!d),tabIndex:-1,"aria-label":i?"Hide password":"Show password",children:i?e.jsx(B,{className:"w-5 h-5"}):e.jsx(U,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Password is case sensitive."}),e.jsx(j,{id:"password-error"})]})}),e.jsx(c,{control:o.control,name:"rememberMe",render:({field:s})=>e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(u,{children:e.jsx(R,{checked:s.value,onCheckedChange:s.onChange,id:"rememberMe"})}),e.jsx(p,{htmlFor:"rememberMe",className:"font-normal cursor-pointer",children:"Remember me"})]})}),e.jsx(I,{type:"submit",className:"w-full font-semibold text-base py-2 transition-transform duration-100 active:scale-95",disabled:l,"aria-busy":l,children:l?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(w,{className:"animate-spin h-5 w-5"})," Logging in..."]}):e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"})," Log In"]})})]})})]}),e.jsxs(A,{className:"justify-center bg-muted rounded-b-lg py-4",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Don't have an account?"}),e.jsx(L,{to:"/signup",className:"ml-2 text-primary font-medium hover:underline",children:"Sign up"})]})]})]})})};export{Y as default};
