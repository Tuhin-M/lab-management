import{x as _,F as R,R as p,r as A,s as e,U as I,O as L,t as U,q as b,a3 as z,J as w}from"./index-TcMYSotV.js";import{F as J,a as c,b as o,c as l,d as n,e as d}from"./form-xz68HsE9.js";import{R as O,a as N}from"./radio-group-s9ZLyoqn.js";import{u as V,t as B,z as i}from"./zod-CnCpVjpE.js";import{I as m}from"./input-VpsYF4Vr.js";import{C as D,a as G,c as M}from"./card-P2OsDbbh.js";import{m as h}from"./motion-kiylLBN_.js";import{S as q}from"./sparkles-Dpuoyrx6.js";import{C as v}from"./circle-check-DPog_aDM.js";import{F as W}from"./flask-conical-BNhZEWAb.js";import{E as k}from"./eye-off-87126ebw.js";import{E as C}from"./eye-Bj4OFAPL.js";import{A as H}from"./arrow-right-C4jZPMIp.js";import"./label-BmxbEDFR.js";import"./index-CWdTz_rd.js";const K=i.object({name:i.string().min(2,{message:"Name must be at least 2 characters"}),email:i.string().email({message:"Invalid email address"}),phone:i.string().min(10,{message:"Phone number must be at least 10 digits"}),password:i.string().min(8,{message:"Password must be at least 8 characters"}),confirmPassword:i.string(),role:i.enum(["user","lab_owner"])}).refine(r=>r.password===r.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),ce=()=>{const r=_(),P=R(),[x,S]=p.useState(!1),[u,F]=p.useState(!1),[j,g]=p.useState(!1),[f,y]=p.useState(null);A.useEffect(()=>{(async()=>{if(await b.isAuthenticated()){const a=b.getCurrentUserRole();r(a==="lab_owner"?"/lab-dashboard":"/profile")}})()},[r]);const t=V({resolver:B(K),defaultValues:{name:"",email:"",phone:"",password:"",confirmPassword:"",role:"user"}}),E=async s=>{try{g(!0),y(null);const a=await b.signup({name:s.name,email:s.email,phone:s.phone,password:s.password,role:s.role});a&&(P(z({user:a.user,role:a.role})),w.success("Account created successfully! Welcome to Ekitsa."),a.role==="lab_owner"?r("/lab-dashboard"):r("/profile"))}catch(a){console.error("Sign up error:",a),y(a.message||"Registration failed. Please try again."),w.error(a.message||"Registration failed. Please try again.")}finally{g(!1)}};return e.jsxs("div",{className:"min-h-screen relative flex flex-col justify-center items-center p-4 py-16 overflow-hidden bg-slate-50/50",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),e.jsx("div",{className:"absolute left-0 top-0 w-[500px] h-[500px] bg-primary/20 rounded-full blur-[100px] -translate-x-1/2 -translate-y-1/2 opacity-50"}),e.jsx("div",{className:"absolute right-0 bottom-0 w-[500px] h-[500px] bg-blue-500/20 rounded-full blur-[100px] translate-x-1/2 translate-y-1/2 opacity-50"}),e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-lg relative z-10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(h.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.5},className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-primary/10 text-primary mb-4",children:e.jsx(q,{className:"w-6 h-6"})}),e.jsx(h.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-3xl font-bold tracking-tight",children:"Create your account"}),e.jsx(h.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-muted-foreground mt-2 text-lg",children:"Join Ekitsa to book lab tests and manage appointments"})]}),e.jsxs(D,{className:"shadow-2xl border-white/20 bg-white/80 backdrop-blur-md overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/40 to-white/0 pointer-events-none"}),e.jsxs(G,{className:"pt-8 relative z-10",children:[f&&e.jsxs(h.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-6 p-4 bg-red-50/50 backdrop-blur-sm border border-red-200 text-red-700 rounded-lg text-sm flex items-center",role:"alert",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 mr-2 flex-shrink-0"}),e.jsx("span",{className:"font-semibold mr-1",children:"Error:"})," ",f]}),e.jsx(J,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(E),className:"space-y-4",children:[e.jsx(c,{control:t.control,name:"role",render:({field:s})=>e.jsxs(o,{className:"space-y-3",children:[e.jsx(l,{className:"text-base font-semibold",children:"I am registering as a"}),e.jsx(n,{children:e.jsxs(O,{onValueChange:s.onChange,defaultValue:s.value,className:"grid grid-cols-2 gap-4",children:[e.jsxs(o,{children:[e.jsx(n,{children:e.jsx(N,{value:"user",className:"peer sr-only"})}),e.jsxs(l,{className:"flex flex-col items-center justify-between rounded-xl border-2 border-muted bg-white/50 backdrop-blur-sm p-4 hover:bg-slate-50 hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary peer-data-[state=checked]:bg-primary/5 transition-all cursor-pointer h-full",children:[e.jsx(I,{className:"mb-3 h-6 w-6 text-primary"}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("span",{className:"block font-semibold",children:"Patient / User"}),e.jsx("span",{className:"block text-xs text-muted-foreground font-normal",children:"Book tests & appointments"})]}),s.value==="user"&&e.jsx("div",{className:"absolute top-2 right-2 text-primary",children:e.jsx(v,{className:"h-4 w-4"})})]})]}),e.jsxs(o,{children:[e.jsx(n,{children:e.jsx(N,{value:"lab_owner",className:"peer sr-only"})}),e.jsxs(l,{className:"flex flex-col items-center justify-between rounded-xl border-2 border-muted bg-white/50 backdrop-blur-sm p-4 hover:bg-slate-50 hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary peer-data-[state=checked]:bg-primary/5 transition-all cursor-pointer h-full",children:[e.jsx(W,{className:"mb-3 h-6 w-6 text-primary"}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("span",{className:"block font-semibold",children:"Lab Owner"}),e.jsx("span",{className:"block text-xs text-muted-foreground font-normal",children:"Manage labs & tests"})]}),s.value==="lab_owner"&&e.jsx("div",{className:"absolute top-2 right-2 text-primary",children:e.jsx(v,{className:"h-4 w-4"})})]})]})]})}),e.jsx(d,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(c,{control:t.control,name:"name",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Full Name"}),e.jsx(n,{children:e.jsx(m,{placeholder:"John Doe",...s,className:"bg-white/50 backdrop-blur-sm"})}),e.jsx(d,{})]})}),e.jsx(c,{control:t.control,name:"phone",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Phone Number"}),e.jsx(n,{children:e.jsx(m,{type:"tel",placeholder:"9876543210",...s,className:"bg-white/50 backdrop-blur-sm"})}),e.jsx(d,{})]})})]}),e.jsx(c,{control:t.control,name:"email",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Email"}),e.jsx(n,{children:e.jsx(m,{type:"email",placeholder:"john@example.com",...s,className:"bg-white/50 backdrop-blur-sm"})}),e.jsx(d,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(c,{control:t.control,name:"password",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{children:e.jsx(m,{type:x?"text":"password",placeholder:"********",...s,className:"bg-white/50 backdrop-blur-sm pr-10"})}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-primary focus:outline-none",onClick:()=>S(!x),children:x?e.jsx(k,{className:"h-4 w-4"}):e.jsx(C,{className:"h-4 w-4"})})]}),e.jsx(d,{})]})}),e.jsx(c,{control:t.control,name:"confirmPassword",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{children:e.jsx(m,{type:u?"text":"password",placeholder:"********",...s,className:"bg-white/50 backdrop-blur-sm pr-10"})}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-primary focus:outline-none",onClick:()=>F(!u),children:u?e.jsx(k,{className:"h-4 w-4"}):e.jsx(C,{className:"h-4 w-4"})})]}),e.jsx(d,{})]})})]}),e.jsx(L,{type:"submit",className:"w-full mt-6 font-semibold text-base py-6 shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all duration-300 transform hover:-translate-y-0.5",disabled:j,children:j?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Signing up..."]}):e.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Create Account ",e.jsx(H,{className:"h-5 w-5"})]})})]})})]}),e.jsxs(M,{className:"justify-center bg-slate-50/50 border-t border-slate-100 py-6 relative z-10",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Already have an account?"}),e.jsx(U,{to:"/login",className:"ml-2 text-primary font-semibold hover:underline",children:"Log in"})]})]})]})]})};export{ce as default};
