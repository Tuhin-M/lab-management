import{r as s,ah as _,ae as M,s as l,y as A,z as P,ag as S,am as L,aj as O}from"./index-TcMYSotV.js";import{u as z}from"./index-CWdTz_rd.js";var v="Checkbox",[H,F]=A(v),[K,T]=H(v),g=s.forwardRef((e,f)=>{const{__scopeCheckbox:t,name:i,checked:p,defaultChecked:r,required:x,disabled:c,value:h="on",onCheckedChange:m,form:b,...E}=e,[o,y]=s.useState(null),I=_(f,n=>y(n)),d=s.useRef(!1),k=o?b||!!o.closest("form"):!0,[u,R]=M({prop:p,defaultProp:r??!1,onChange:m,caller:v}),D=s.useRef(u);return s.useEffect(()=>{const n=o==null?void 0:o.form;if(n){const C=()=>R(D.current);return n.addEventListener("reset",C),()=>n.removeEventListener("reset",C)}},[o,R]),l.jsxs(K,{scope:t,state:u,disabled:c,children:[l.jsx(P.button,{type:"button",role:"checkbox","aria-checked":a(u)?"mixed":u,"aria-required":x,"data-state":B(u),"data-disabled":c?"":void 0,disabled:c,value:h,...E,ref:I,onKeyDown:S(e.onKeyDown,n=>{n.key==="Enter"&&n.preventDefault()}),onClick:S(e.onClick,n=>{R(C=>a(C)?!0:!C),k&&(d.current=n.isPropagationStopped(),d.current||n.stopPropagation())})}),k&&l.jsx(N,{control:o,bubbles:!d.current,name:i,value:h,checked:u,required:x,disabled:c,form:b,style:{transform:"translateX(-100%)"},defaultChecked:a(r)?!1:r})]})});g.displayName=v;var j="CheckboxIndicator",w=s.forwardRef((e,f)=>{const{__scopeCheckbox:t,forceMount:i,...p}=e,r=T(j,t);return l.jsx(L,{present:i||a(r.state)||r.state===!0,children:l.jsx(P.span,{"data-state":B(r.state),"data-disabled":r.disabled?"":void 0,...p,ref:f,style:{pointerEvents:"none",...e.style}})})});w.displayName=j;var q="CheckboxBubbleInput",N=s.forwardRef(({__scopeCheckbox:e,control:f,checked:t,bubbles:i=!0,defaultChecked:p,...r},x)=>{const c=s.useRef(null),h=_(c,x),m=z(t),b=O(f);s.useEffect(()=>{const o=c.current;if(!o)return;const y=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(y,"checked").set;if(m!==t&&d){const k=new Event("click",{bubbles:i});o.indeterminate=a(t),d.call(o,a(t)?!1:t),o.dispatchEvent(k)}},[m,t,i]);const E=s.useRef(a(t)?!1:t);return l.jsx(P.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??E.current,...r,tabIndex:-1,ref:h,style:{...r.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});N.displayName=q;function a(e){return e==="indeterminate"}function B(e){return a(e)?"indeterminate":e?"checked":"unchecked"}var G=g,J=w;export{J as I,G as R};
